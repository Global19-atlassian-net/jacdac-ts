{"version":3,"sources":["webpack:///./node_modules/@material-ui/icons/NotificationImportant.js","webpack:///./src/components/StyledTreeView.tsx","webpack:///./src/components/JDomTreeView.tsx","webpack:///./node_modules/@material-ui/lab/esm/TreeView/TreeView.js","webpack:///./node_modules/@material-ui/icons/ArrowDropDown.js","webpack:///../src/jdom/iframebridgeclient.ts","webpack:///./src/jacdac/Provider.tsx","webpack:///./src/components/ThemedLayout.tsx","webpack:///./node_modules/@material-ui/lab/esm/TreeItem/TreeItem.js","webpack:///./node_modules/@material-ui/icons/ArrowRight.js","webpack:///./node_modules/@material-ui/lab/esm/TreeView/TreeViewContext.js","webpack:///./node_modules/@material-ui/core/esm/styles/cssUtils.js","webpack:///./node_modules/@material-ui/core/esm/styles/responsiveFontSizes.js"],"names":["_interopRequireDefault","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","useTreeItemStyles","makeStyles","theme","createStyles","root","color","palette","text","secondary","backgroundColor","action","hover","grey","content","fontWeight","typography","fontWeightMedium","fontWeightRegular","group","marginLeft","paddingLeft","spacing","expanded","selected","label","labelRoot","display","alignItems","padding","labelIcon","marginRight","labelText","flexGrow","StyledTreeItem","props","classes","kind","icon","labelInfo","bgColor","checked","setChecked","actions","nodeId","alert","other","useState","checkedState","setCheckedState","TreeItem","className","Switch","inputProps","onChange","ev","c","stopPropagation","KindIcon","tooltip","Typography","variant","component","style","DeviceTreeItem","device","checkboxes","serviceFilter","id","name","useDeviceName","useChange","physical","lost","useEventRaised","LOST","FOUND","dev","services","filter","srv","useTheme","showActions","useMediaQuery","breakpoints","up","serviceNames","ellipseJoin","service","serviceClass","SRV_CTRL","SRV_LOGGER","map","readingRegister","find","useRegisterHumanValue","r","join","indexOf","DeviceActions","reset","rename","ServiceTreeItem","key","dashboard","registerFilter","eventFilter","specification","showSpecificationAction","open","packets","registers","isRegister","info","register","identifier","reg","sort","l","localeCompare","events","isEvent","event","reading","to","shortId","fontSize","RegisterTreeItem","EventTreeItem","lastGetAttempts","attempts","setAttempts","optional","failedGet","humanValue","useEffect","subscribe","GET_ATTEMPT","undefined","count","useEventCount","useStyles","margins","JDomTreeView","defaultExpanded","defaultSelected","defaultChecked","onChecked","onToggle","onSelect","deviceFilter","setExpanded","setSelected","bus","useContext","JACDACContext","devices","handleChecked","v","i","splice","push","ConnectAlert","TreeView","clsx","defaultCollapseIcon","defaultExpandIcon","defaultEndIcon","width","onNodeToggle","nodeIds","onNodeSelect","findNextFirstChar","firstChars","startIndex","char","length","defaultExpandedDefault","defaultSelectedDefault","ref","children","_props$defaultExpande","defaultParentIcon","_props$defaultSelecte","_props$disableSelecti","disableSelection","_props$multiSelect","multiSelect","expandedProp","selectedProp","_React$useState","tabbable","setTabbable","_React$useState2","focusedNodeId","setFocusedNodeId","nodeMap","firstCharMap","visibleNodes","_useControlled","controlled","state","_useControlled2","setExpandedState","_useControlled3","_useControlled4","setSelectedState","isExpanded","Array","isArray","isSelected","getNextNode","nodeIndex","current","getPreviousNode","getLastNode","getFirstNode","focus","lastSelectedNode","lastSelectionWasRange","currentRangeSelection","handleRangeArrowSelect","nodes","base","start","next","handleRangeSelect","end","range","a","b","aIndex","bIndex","Math","min","max","slice","getNodesInRange","newSelected","concat","handleMultipleSelect","handleSingleSelect","selectRange","stacked","arguments","_nodes$start","getNodesToRemove","forEach","node","cleanUpFirstCharMap","newMap","removeNodeFromNodeMap","parent","parentMap","parentChildren","oldFocusedNodeId","prevChildIds","_React$useState3","childrenCalculated","setChildrenCalculated","childIds","child","arr1","arr2","arrayDiff","index","buildVisible","list","item","childs","noopSelection","Provider","icons","focusFirstNode","focusLastNode","focusNextNode","focusPreviousNode","focusByFirstCharacter","lowercaseChar","toLowerCase","firstCharIds","keys","firstChar","expandAllSiblings","diff","newExpanded","toggleExpansion","oldTabbable","isFocused","selectNode","multiple","selectNextNode","selectPreviousNode","rangeSelectToFirst","rangeSelectToLast","selectAllNodes","isTabbable","getParent","mapFirstChar","addNodeToNodeMap","childrenIds","currentMap","childId","currentChildMap","role","margin","listStyle","IFrameBridgeClient","bridgeId","random","packetSent","packetProcessed","postPacket","bind","handleMessage","registerEvents","console","log","this","mount","PACKET_PROCESS","PACKET_SEND","window","addEventListener","removeEventListener","isOriginValid","data","msg","channel","type","handleMessageJacdac","source","handleDriverMessage","clear","pkt","Packet","fromBinary","timestamp","sender","sendPacketAsync","processPacket","broadcast","toBuffer","postMessage","origin","JDIFrameClient","args","URLSearchParams","diagnostic","webUSB","params","location","search","diagnostics","get","parentOrigin","sniffQueryArguments","Flags","createUSBBus","JDBus","setBackgroundFirmwareScans","inIFrame","JACDACProvider","firstConnect","setFirstConnect","connectionState","setConnectionState","BusState","Disconnected","connectAsync","CONNECTION_STATE","disconnectAsync","ThemedLayout","maxSnack","ThemeProvider","dense","CssBaseline","Helmet","rel","href","crossOrigin","collapseIcon","endIcon","expandIcon","iconProp","onClick","onLabelClick","onIconClick","onFocus","onKeyDown","onMouseDown","_props$TransitionComp","TransitionComponent","TransitionProps","_React$useContext","contextIcons","nodeRef","contentRef","handleRef","expandable","Boolean","focused","ariaSelected","handleNextArrow","handlePreviousArrow","textContent","substring","flag","altKey","currentTarget","target","str","ctrlPressed","ctrlKey","metaKey","shiftKey","direction","match","preventDefault","tabIndex","defaultPrevented","iconContainer","unmountOnExit","in","outline","WebkitTapHighlightColor","primary","main","selectedOpacity","hoverOpacity","cursor","flexShrink","justifyContent","position","TreeViewContext","isUnitless","String","parseFloat","toUnitless","convertLength","baseFontSize","toUnit","fromUnit","pxLength","outputLength","toFixed","alignProperty","_ref","size","grid","sizeBelow","sizeAbove","fontGrid","_ref2","lineHeight","pixels","htmlFontSize","responsiveProperty","_ref3","cssProperty","_ref3$unit","unit","_ref3$breakpoints","_ref3$transform","transform","output","factor","breakpoint","round","responsiveFontSizes","themeInput","options","_options$breakpoints","_options$disableAlign","disableAlign","_options$factor","_options$variants","variants","convert","breakpointValues","x","values","remFontSize","maxFontSize","minFontSize","Error"],"mappings":"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","file":"bc603352673be90d612e6d125a13a5d96061ca46-f1d271cb4f67ac9a6ec4.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18 16v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-5 0h-2v-2h2v2zm0-4h-2V8h2v4zm-1 10c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2z\"\n}), 'NotificationImportant');\n\nexports.default = _default;","import React, { useState, ChangeEvent } from 'react';\n// tslint:disable-next-line: no-submodule-imports\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\n// tslint:disable-next-line: no-submodule-imports\n// tslint:disable-next-line: no-submodule-imports\nimport TreeItem, { TreeItemProps } from '@material-ui/lab/TreeItem';\n// tslint:disable-next-line: no-submodule-imports\nimport Typography from '@material-ui/core/Typography';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport KindIcon from \"./KindIcon\"\nimport { Switch } from '@material-ui/core';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport NotificationImportantIcon from '@material-ui/icons/NotificationImportant';\n\ndeclare module 'csstype' {\n    interface Properties {\n        '--tree-view-color'?: string;\n        '--tree-view-bg-color'?: string;\n    }\n}\n\nconst useTreeItemStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        root: {\n            color: theme.palette.text.secondary,\n            '&:hover > $content': {\n                backgroundColor: theme.palette.action.hover,\n            },\n            '&:focus > $content, &$selected > $content': {\n                backgroundColor: `var(--tree-view-bg-color, ${theme.palette.grey[400]})`,\n                color: 'var(--tree-view-color)',\n            },\n            '&:focus > $content $label, &:hover > $content $label, &$selected > $content $label': {\n                backgroundColor: 'transparent',\n            },\n        },\n        content: {\n            color: theme.palette.text.secondary,\n            fontWeight: theme.typography.fontWeightMedium,\n            '$expanded > &': {\n                fontWeight: theme.typography.fontWeightRegular,\n            },\n        },\n        group: {\n            marginLeft: 0,\n            '& $content': {\n                paddingLeft: theme.spacing(1),\n            },\n        },\n        expanded: {},\n        selected: {},\n        label: {\n            fontWeight: 'inherit',\n            color: 'inherit',\n        },\n        labelRoot: {\n            display: 'flex',\n            alignItems: 'center',\n            padding: theme.spacing(0.5, 0),\n        },\n        labelIcon: {\n            marginRight: theme.spacing(0.5),\n        },\n        labelText: {\n            fontWeight: 'inherit',\n            flexGrow: 1,\n        },\n    }),\n);\n\nexport function StyledTreeItem(props: TreeItemProps & {\n    nodeId: string;\n    bgColor?: string;\n    color?: string;\n    kind?: string;\n    icon?: JSX.Element;\n    alert?: string;\n    labelInfo?: string;\n    labelText: string;\n    checked?: boolean;\n    setChecked?: (state: boolean) => void;\n    actions?: JSX.Element | JSX.Element[]\n}) {\n    const classes = useTreeItemStyles();\n    const { labelText, kind, icon, labelInfo, color, bgColor, checked, setChecked, actions, nodeId, alert, ...other } = props;\n    const [checkedState, setCheckedState] = useState(checked)\n\n    const handleChecked = (ev: ChangeEvent<HTMLInputElement>, c: boolean) => {\n        ev.stopPropagation()\n        setChecked(c)\n        setCheckedState(c)\n    }\n    return (\n        <TreeItem\n            nodeId={nodeId}\n            label={\n                <div className={classes.labelRoot}>\n                    {setChecked && <Switch\n                        checked={checkedState}\n                        color=\"primary\"\n                        inputProps={{ 'aria-label': 'secondary checkbox' }}\n                        onChange={handleChecked}\n                    />}\n                    {kind && <KindIcon kind={kind} className={classes.labelIcon} tooltip={true} />}\n                    {icon}\n                    <Typography variant=\"body2\" className={classes.labelText}>\n                        {labelText}\n                    </Typography>\n                    {alert && <NotificationImportantIcon />}\n                    <Typography variant=\"caption\" color=\"inherit\">\n                        {alert && <Typography component=\"span\">\n                            {alert}\n                        </Typography>}\n                        {labelInfo}\n                        {actions}\n                    </Typography>\n                </div>\n            }\n            style={{\n                '--tree-view-color': color,\n                '--tree-view-bg-color': bgColor,\n            }}\n            classes={{\n                root: classes.root,\n                content: classes.content,\n                expanded: classes.expanded,\n                selected: classes.selected,\n                group: classes.group,\n                label: classes.label,\n            }}\n            {...other}\n        />\n    );\n}\n\nexport interface StyledTreeViewItemProps {\n    key: string;\n    expanded: string[];\n    selected: string[];\n    checked?: string[];\n    setChecked?: (id: string, value: boolean) => void;\n}\n\nexport interface StyledTreeViewProps {\n    defaultChecked?: string[];\n    defaultExpanded?: string[];\n    defaultSelected?: string[];\n    onToggle?: (expanded: string[]) => void;\n    onSelect?: (selected: string[]) => void;\n    onChecked?: (checked: string[]) => void;\n}","import React, { useContext, useState, useEffect } from 'react';\nimport clsx from 'clsx';\nimport JACDACContext, { JDContextProps } from '../../../src/react/Context';\n// tslint:disable-next-line: no-submodule-imports\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\n// tslint:disable-next-line: no-submodule-imports\nimport TreeView from '@material-ui/lab/TreeView';\n// tslint:disable-next-line: no-submodule-imports\n// tslint:disable-next-line: no-submodule-imports\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport KindIcon from \"./KindIcon\"\nimport { JDDevice } from '../../../src/jdom/device';\nimport { JDEvent } from '../../../src/jdom/event';\nimport { JDService } from '../../../src/jdom/service';\nimport { JDRegister } from '../../../src/jdom/register';\nimport useChange from \"../jacdac/useChange\";\nimport { isRegister, isEvent } from '../../../src/jdom/spec';\nimport { useMediaQuery, useTheme } from '@material-ui/core';\nimport { useRegisterHumanValue } from '../jacdac/useRegisterValue';\nimport useEventCount from '../jacdac/useEventCount';\nimport DeviceActions from './DeviceActions';\nimport { LOST, FOUND, SRV_CTRL, SRV_LOGGER, GET_ATTEMPT } from '../../../src/jdom/constants';\nimport useEventRaised from '../jacdac/useEventRaised';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport { ellipseJoin } from '../../../src/jdom/utils';\nimport { Link } from 'gatsby-theme-material-ui';\nimport useDeviceName from './useDeviceName';\nimport ConnectAlert from \"./ConnectAlert\"\nimport { StyledTreeItem, StyledTreeViewItemProps, StyledTreeViewProps } from './StyledTreeView';\n// tslint:disable-next-line: no-submodule-imports match-default-export-name\nimport LaunchIcon from '@material-ui/icons/Launch';\n\nfunction DeviceTreeItem(props: { device: JDDevice } & StyledTreeViewItemProps & JDomTreeViewProps) {\n    const { device, checked, setChecked, checkboxes, serviceFilter, ...other } = props\n    const id = device.id\n    const name = useDeviceName(device, true)\n    const physical = useChange(device, d => d.physical)\n    const kind = physical ? \"device\" : \"virtualdevice\"\n    const lost = useEventRaised([LOST, FOUND], device, dev => !!dev?.lost)\n    const services = useChange(device, () => device.services().filter(srv => !serviceFilter || serviceFilter(srv)))\n    const theme = useTheme()\n    const showActions = useMediaQuery(theme.breakpoints.up('sm'))\n\n    const serviceNames = ellipseJoin(services\n        .filter(service => service.serviceClass !== SRV_CTRL && service.serviceClass !== SRV_LOGGER)\n        .map(service => service.name), 2)\n    const readingRegister = services.find(srv => srv.readingRegister)?.readingRegister;\n    const reading = useRegisterHumanValue(readingRegister);\n    const labelInfo = [reading, serviceNames].filter(r => !!r).join(', ');\n\n    const handleChecked = c => setChecked(id, c)\n    return <StyledTreeItem\n        nodeId={id}\n        labelText={name}\n        labelInfo={labelInfo}\n        alert={lost && \"Lost device...\"}\n        kind={kind}\n        checked={checked?.indexOf(id) > -1}\n        setChecked={checkboxes && checkboxes.indexOf(\"device\") > -1 && setChecked && handleChecked}\n        actions={showActions && <DeviceActions device={device} reset={true} rename={true} />}\n    >\n        {services?.map(service => <ServiceTreeItem\n            key={service.id}\n            service={service}\n            checked={checked}\n            setChecked={setChecked}\n            checkboxes={checkboxes}\n            {...other}\n        />)}\n    </StyledTreeItem>\n}\n\nfunction ServiceTreeItem(props: { service: JDService } & StyledTreeViewItemProps & JDomTreeViewProps) {\n    const { service, checked, setChecked, checkboxes, dashboard, registerFilter, eventFilter, ...other } = props;\n    const specification = service.specification;\n    const showSpecificationAction = specification && !dashboard;\n    const id = service.id\n    const name = service.name\n    const open = checked?.indexOf(id) > -1;\n    const packets = specification?.packets;\n    const registers = packets?.filter(isRegister)\n        .map(info => service.register(info.identifier))\n        .filter(reg => !registerFilter || registerFilter(reg))\n        .sort((l, r) => l.name.localeCompare(r.name))\n    const events = packets?.filter(isEvent)\n        .map(info => service.event(info.identifier))\n        .filter(ev => !eventFilter || eventFilter(ev))\n    const readingRegister = service.readingRegister;\n    const reading = useRegisterHumanValue(readingRegister)\n\n    const handleChecked = c => setChecked(id, c)\n    return <StyledTreeItem\n        nodeId={id}\n        labelText={name}\n        labelInfo={reading}\n        kind={\"service\"}\n        checked={open}\n        setChecked={checkboxes?.indexOf(\"service\") > -1 && setChecked && handleChecked}\n        actions={showSpecificationAction && <Link color=\"inherit\" to={`/services/${specification.shortId}`}>\n            <LaunchIcon fontSize={\"small\"} />\n        </Link>}\n    >\n        {registers?.map(register => <RegisterTreeItem\n            key={register.id}\n            register={register}\n            checked={checked}\n            setChecked={setChecked}\n            checkboxes={checkboxes}\n            {...other}\n        />)}\n        {events?.map(event => <EventTreeItem\n            key={event.id}\n            event={event}\n            checked={checked}\n            setChecked={setChecked}\n            checkboxes={checkboxes}\n            {...other}\n        />)}\n    </StyledTreeItem>\n}\n\nfunction RegisterTreeItem(props: { register: JDRegister } & StyledTreeViewItemProps & JDomTreeViewProps) {\n    const { register, checked, setChecked, checkboxes } = props;\n    const { specification, id } = register\n    const [attempts, setAttempts] = useState(register.lastGetAttempts);\n    const optional = !!specification?.optional;\n    const failedGet = attempts > 2;\n    const labelText = `${specification?.name || register.id}${optional ? \"?\" : \"\"}`;\n    const humanValue = useRegisterHumanValue(register)\n\n    useEffect(() => register?.subscribe(GET_ATTEMPT, () => {\n        setAttempts(register.lastGetAttempts)\n    }), [register]);\n\n    const handleChecked = c => {\n        setChecked(id, c)\n    }\n\n    // if register is optional and no data, hide\n    if (optional && failedGet && humanValue === undefined)\n        return <></>;\n\n    return <StyledTreeItem\n        nodeId={id}\n        labelText={labelText}\n        labelInfo={humanValue || (attempts > 0 && `#${attempts}`) || \"\"}\n        kind={specification?.kind || \"register\"}\n        alert={failedGet && !optional && humanValue === undefined && `???`}\n        checked={checked?.indexOf(id) > -1}\n        setChecked={checkboxes?.indexOf(\"register\") > -1 && setChecked && handleChecked}\n    />\n}\n\nfunction EventTreeItem(props: { event: JDEvent } & StyledTreeViewItemProps & JDomTreeViewProps) {\n    const { event, checked, setChecked, checkboxes } = props;\n    const { specification, id } = event\n    const count = useEventCount(event)\n\n    const handleChecked = c => {\n        setChecked(id, c)\n    }\n    return <StyledTreeItem\n        nodeId={id}\n        labelText={specification?.name || event.id}\n        labelInfo={(count || \"\") + \"\"}\n        kind=\"event\"\n        checked={checked?.indexOf(id) > -1}\n        setChecked={checkboxes?.indexOf(\"event\") > -1 && setChecked && handleChecked}\n    />\n}\n\nexport type CheckedMap = { [id: string]: boolean };\n\nexport interface JDomTreeViewProps extends StyledTreeViewProps {\n    // don't render links to specification\n    dashboard?: boolean;\n    checkboxes?: (\"device\" | \"service\" | \"register\" | \"event\")[];\n    deviceFilter?: (devices: JDDevice) => boolean;\n    serviceFilter?: (services: JDService) => boolean;\n    registerFilter?: (register: JDRegister) => boolean;\n    eventFilter?: (event: JDEvent) => boolean;\n}\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        root: {\n            flexGrow: 1,\n        },\n        margins: {\n            marginLeft: theme.spacing(0.5),\n            marginRight: theme.spacing(0.5)\n        }\n    }),\n);\n\nexport default function JDomTreeView(props: JDomTreeViewProps) {\n    const {\n        defaultExpanded, defaultSelected, defaultChecked,\n        onChecked, onToggle, onSelect, checkboxes, dashboard, deviceFilter, ...other } = props;\n    const classes = useStyles();\n    const [expanded, setExpanded] = useState<string[]>(defaultExpanded || []);\n    const [selected, setSelected] = useState<string[]>(defaultSelected || []);\n    const [checked, setChecked] = useState<string[]>(defaultChecked || [])\n    const { bus } = useContext<JDContextProps>(JACDACContext)\n    const devices = useChange(bus, () => bus.devices().filter(dev => !deviceFilter || deviceFilter(dev)))\n\n    const handleToggle = (event: React.ChangeEvent<{}>, nodeIds: string[]) => {\n        setExpanded(nodeIds);\n        if (onToggle) onToggle(nodeIds)\n    };\n\n    const handleSelect = (event: React.ChangeEvent<{}>, nodeIds: string[]) => {\n        setSelected(nodeIds);\n        if (onSelect) onSelect(nodeIds)\n    };\n    const handleChecked = (id: string, v: boolean) => {\n        const i = checked.indexOf(id)\n        if (!v && i > -1)\n            checked.splice(i, 1)\n        else if (v && i < 0)\n            checked.push(id)\n        setChecked(checked)\n        if (onChecked)\n            onChecked(checked)\n    };\n\n    return (<>\n        <ConnectAlert />\n        <TreeView\n            className={clsx(classes.root, classes.margins)}\n            defaultCollapseIcon={<ArrowDropDownIcon />}\n            defaultExpandIcon={<ArrowRightIcon />}\n            defaultEndIcon={<div style={{ width: 12 }} />}\n            expanded={expanded}\n            selected={selected}\n            onNodeToggle={handleToggle}\n            onNodeSelect={handleSelect}\n        >\n        {devices?.map(device => <DeviceTreeItem\n            key={device.id}\n            device={device}\n            checked={checked}\n            setChecked={handleChecked}\n            checkboxes={checkboxes}\n            expanded={expanded}\n            selected={selected}\n            dashboard={dashboard}\n            {...other}\n        />)}\n    </TreeView>\n    </>);\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { withStyles } from '@material-ui/core/styles';\nimport { useControlled } from '@material-ui/core/utils';\nimport TreeViewContext from './TreeViewContext';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    padding: 0,\n    margin: 0,\n    listStyle: 'none'\n  }\n};\n\nfunction arrayDiff(arr1, arr2) {\n  if (arr1.length !== arr2.length) return true;\n\n  for (var i = 0; i < arr1.length; i += 1) {\n    if (arr1[i] !== arr2[i]) return true;\n  }\n\n  return false;\n}\n\nvar findNextFirstChar = function findNextFirstChar(firstChars, startIndex, char) {\n  for (var i = startIndex; i < firstChars.length; i += 1) {\n    if (char === firstChars[i]) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nvar defaultExpandedDefault = [];\nvar defaultSelectedDefault = [];\nvar TreeView = /*#__PURE__*/React.forwardRef(function TreeView(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      defaultCollapseIcon = props.defaultCollapseIcon,\n      defaultEndIcon = props.defaultEndIcon,\n      _props$defaultExpande = props.defaultExpanded,\n      defaultExpanded = _props$defaultExpande === void 0 ? defaultExpandedDefault : _props$defaultExpande,\n      defaultExpandIcon = props.defaultExpandIcon,\n      defaultParentIcon = props.defaultParentIcon,\n      _props$defaultSelecte = props.defaultSelected,\n      defaultSelected = _props$defaultSelecte === void 0 ? defaultSelectedDefault : _props$defaultSelecte,\n      _props$disableSelecti = props.disableSelection,\n      disableSelection = _props$disableSelecti === void 0 ? false : _props$disableSelecti,\n      _props$multiSelect = props.multiSelect,\n      multiSelect = _props$multiSelect === void 0 ? false : _props$multiSelect,\n      expandedProp = props.expanded,\n      onNodeSelect = props.onNodeSelect,\n      onNodeToggle = props.onNodeToggle,\n      selectedProp = props.selected,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"defaultCollapseIcon\", \"defaultEndIcon\", \"defaultExpanded\", \"defaultExpandIcon\", \"defaultParentIcon\", \"defaultSelected\", \"disableSelection\", \"multiSelect\", \"expanded\", \"onNodeSelect\", \"onNodeToggle\", \"selected\"]);\n\n  var _React$useState = React.useState(null),\n      tabbable = _React$useState[0],\n      setTabbable = _React$useState[1];\n\n  var _React$useState2 = React.useState(null),\n      focusedNodeId = _React$useState2[0],\n      setFocusedNodeId = _React$useState2[1];\n\n  var nodeMap = React.useRef({});\n  var firstCharMap = React.useRef({});\n  var visibleNodes = React.useRef([]);\n\n  var _useControlled = useControlled({\n    controlled: expandedProp,\n    default: defaultExpanded,\n    name: 'TreeView',\n    state: 'expanded'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      expanded = _useControlled2[0],\n      setExpandedState = _useControlled2[1];\n\n  var _useControlled3 = useControlled({\n    controlled: selectedProp,\n    default: defaultSelected,\n    name: 'TreeView',\n    state: 'selected'\n  }),\n      _useControlled4 = _slicedToArray(_useControlled3, 2),\n      selected = _useControlled4[0],\n      setSelectedState = _useControlled4[1];\n  /*\n   * Status Helpers\n   */\n\n\n  var isExpanded = React.useCallback(function (id) {\n    return Array.isArray(expanded) ? expanded.indexOf(id) !== -1 : false;\n  }, [expanded]);\n  var isSelected = React.useCallback(function (id) {\n    return Array.isArray(selected) ? selected.indexOf(id) !== -1 : selected === id;\n  }, [selected]);\n\n  var isTabbable = function isTabbable(id) {\n    return tabbable === id;\n  };\n\n  var isFocused = function isFocused(id) {\n    return focusedNodeId === id;\n  };\n  /*\n   * Node Helpers\n   */\n\n\n  var getNextNode = function getNextNode(id) {\n    var nodeIndex = visibleNodes.current.indexOf(id);\n\n    if (nodeIndex !== -1 && nodeIndex + 1 < visibleNodes.current.length) {\n      return visibleNodes.current[nodeIndex + 1];\n    }\n\n    return null;\n  };\n\n  var getPreviousNode = function getPreviousNode(id) {\n    var nodeIndex = visibleNodes.current.indexOf(id);\n\n    if (nodeIndex !== -1 && nodeIndex - 1 >= 0) {\n      return visibleNodes.current[nodeIndex - 1];\n    }\n\n    return null;\n  };\n\n  var getLastNode = function getLastNode() {\n    return visibleNodes.current[visibleNodes.current.length - 1];\n  };\n\n  var getFirstNode = function getFirstNode() {\n    return visibleNodes.current[0];\n  };\n\n  var getParent = function getParent(id) {\n    return nodeMap.current[id].parent;\n  };\n\n  var getNodesInRange = function getNodesInRange(a, b) {\n    var aIndex = visibleNodes.current.indexOf(a);\n    var bIndex = visibleNodes.current.indexOf(b);\n    var start = Math.min(aIndex, bIndex);\n    var end = Math.max(aIndex, bIndex);\n    return visibleNodes.current.slice(start, end + 1);\n  };\n  /*\n   * Focus Helpers\n   */\n\n\n  var focus = function focus(id) {\n    if (id) {\n      setTabbable(id);\n      setFocusedNodeId(id);\n    }\n  };\n\n  var focusNextNode = function focusNextNode(id) {\n    return focus(getNextNode(id));\n  };\n\n  var focusPreviousNode = function focusPreviousNode(id) {\n    return focus(getPreviousNode(id));\n  };\n\n  var focusFirstNode = function focusFirstNode() {\n    return focus(getFirstNode());\n  };\n\n  var focusLastNode = function focusLastNode() {\n    return focus(getLastNode());\n  };\n\n  var focusByFirstCharacter = function focusByFirstCharacter(id, char) {\n    var start;\n    var index;\n    var lowercaseChar = char.toLowerCase();\n    var firstCharIds = [];\n    var firstChars = []; // This really only works since the ids are strings\n\n    Object.keys(firstCharMap.current).forEach(function (nodeId) {\n      var firstChar = firstCharMap.current[nodeId];\n      var map = nodeMap.current[nodeId];\n      var visible = map.parent ? isExpanded(map.parent) : true;\n\n      if (visible) {\n        firstCharIds.push(nodeId);\n        firstChars.push(firstChar);\n      }\n    }); // Get start index for search based on position of currentItem\n\n    start = firstCharIds.indexOf(id) + 1;\n\n    if (start === nodeMap.current.length) {\n      start = 0;\n    } // Check remaining slots in the menu\n\n\n    index = findNextFirstChar(firstChars, start, lowercaseChar); // If not found in remaining slots, check from beginning\n\n    if (index === -1) {\n      index = findNextFirstChar(firstChars, 0, lowercaseChar);\n    } // If match was found...\n\n\n    if (index > -1) {\n      focus(firstCharIds[index]);\n    }\n  };\n  /*\n   * Expansion Helpers\n   */\n\n\n  var toggleExpansion = function toggleExpansion(event) {\n    var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : focusedNodeId;\n    var newExpanded;\n\n    if (expanded.indexOf(value) !== -1) {\n      newExpanded = expanded.filter(function (id) {\n        return id !== value;\n      });\n      setTabbable(function (oldTabbable) {\n        var map = nodeMap.current[oldTabbable];\n\n        if (oldTabbable && (map && map.parent ? map.parent.id : null) === value) {\n          return value;\n        }\n\n        return oldTabbable;\n      });\n    } else {\n      newExpanded = [value].concat(expanded);\n    }\n\n    if (onNodeToggle) {\n      onNodeToggle(event, newExpanded);\n    }\n\n    setExpandedState(newExpanded);\n  };\n\n  var expandAllSiblings = function expandAllSiblings(event, id) {\n    var map = nodeMap.current[id];\n    var parent = nodeMap.current[map.parent];\n    var diff;\n\n    if (parent) {\n      diff = parent.children.filter(function (child) {\n        return !isExpanded(child);\n      });\n    } else {\n      var topLevelNodes = nodeMap.current[-1].children;\n      diff = topLevelNodes.filter(function (node) {\n        return !isExpanded(node);\n      });\n    }\n\n    var newExpanded = expanded.concat(diff);\n\n    if (diff.length > 0) {\n      setExpandedState(newExpanded);\n\n      if (onNodeToggle) {\n        onNodeToggle(event, newExpanded);\n      }\n    }\n  };\n  /*\n   * Selection Helpers\n   */\n\n\n  var lastSelectedNode = React.useRef(null);\n  var lastSelectionWasRange = React.useRef(false);\n  var currentRangeSelection = React.useRef([]);\n\n  var handleRangeArrowSelect = function handleRangeArrowSelect(event, nodes) {\n    var base = selected;\n    var start = nodes.start,\n        next = nodes.next,\n        current = nodes.current;\n\n    if (!next || !current) {\n      return;\n    }\n\n    if (currentRangeSelection.current.indexOf(current) === -1) {\n      currentRangeSelection.current = [];\n    }\n\n    if (lastSelectionWasRange.current) {\n      if (currentRangeSelection.current.indexOf(next) !== -1) {\n        base = base.filter(function (id) {\n          return id === start || id !== current;\n        });\n        currentRangeSelection.current = currentRangeSelection.current.filter(function (id) {\n          return id === start || id !== current;\n        });\n      } else {\n        base.push(next);\n        currentRangeSelection.current.push(next);\n      }\n    } else {\n      base.push(next);\n      currentRangeSelection.current.push(current, next);\n    }\n\n    if (onNodeSelect) {\n      onNodeSelect(event, base);\n    }\n\n    setSelectedState(base);\n  };\n\n  var handleRangeSelect = function handleRangeSelect(event, nodes) {\n    var base = selected;\n    var start = nodes.start,\n        end = nodes.end; // If last selection was a range selection ignore nodes that were selected.\n\n    if (lastSelectionWasRange.current) {\n      base = selected.filter(function (id) {\n        return currentRangeSelection.current.indexOf(id) === -1;\n      });\n    }\n\n    var range = getNodesInRange(start, end);\n    currentRangeSelection.current = range;\n    var newSelected = base.concat(range);\n    newSelected = newSelected.filter(function (id, i) {\n      return newSelected.indexOf(id) === i;\n    });\n\n    if (onNodeSelect) {\n      onNodeSelect(event, newSelected);\n    }\n\n    setSelectedState(newSelected);\n  };\n\n  var handleMultipleSelect = function handleMultipleSelect(event, value) {\n    var newSelected = [];\n\n    if (selected.indexOf(value) !== -1) {\n      newSelected = selected.filter(function (id) {\n        return id !== value;\n      });\n    } else {\n      newSelected = [value].concat(selected);\n    }\n\n    if (onNodeSelect) {\n      onNodeSelect(event, newSelected);\n    }\n\n    setSelectedState(newSelected);\n  };\n\n  var handleSingleSelect = function handleSingleSelect(event, value) {\n    var newSelected = multiSelect ? [value] : value;\n\n    if (onNodeSelect) {\n      onNodeSelect(event, newSelected);\n    }\n\n    setSelectedState(newSelected);\n  };\n\n  var selectNode = function selectNode(event, id) {\n    var multiple = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    if (id) {\n      if (multiple) {\n        handleMultipleSelect(event, id);\n      } else {\n        handleSingleSelect(event, id);\n      }\n\n      lastSelectedNode.current = id;\n      lastSelectionWasRange.current = false;\n      currentRangeSelection.current = [];\n      return true;\n    }\n\n    return false;\n  };\n\n  var selectRange = function selectRange(event, nodes) {\n    var stacked = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var _nodes$start = nodes.start,\n        start = _nodes$start === void 0 ? lastSelectedNode.current : _nodes$start,\n        end = nodes.end,\n        current = nodes.current;\n\n    if (stacked) {\n      handleRangeArrowSelect(event, {\n        start: start,\n        next: end,\n        current: current\n      });\n    } else {\n      handleRangeSelect(event, {\n        start: start,\n        end: end\n      });\n    }\n\n    lastSelectionWasRange.current = true;\n    return true;\n  };\n\n  var rangeSelectToFirst = function rangeSelectToFirst(event, id) {\n    if (!lastSelectedNode.current) {\n      lastSelectedNode.current = id;\n    }\n\n    var start = lastSelectionWasRange.current ? lastSelectedNode.current : id;\n    return selectRange(event, {\n      start: start,\n      end: getFirstNode()\n    });\n  };\n\n  var rangeSelectToLast = function rangeSelectToLast(event, id) {\n    if (!lastSelectedNode.current) {\n      lastSelectedNode.current = id;\n    }\n\n    var start = lastSelectionWasRange.current ? lastSelectedNode.current : id;\n    return selectRange(event, {\n      start: start,\n      end: getLastNode()\n    });\n  };\n\n  var selectNextNode = function selectNextNode(event, id) {\n    return selectRange(event, {\n      end: getNextNode(id),\n      current: id\n    }, true);\n  };\n\n  var selectPreviousNode = function selectPreviousNode(event, id) {\n    return selectRange(event, {\n      end: getPreviousNode(id),\n      current: id\n    }, true);\n  };\n\n  var selectAllNodes = function selectAllNodes(event) {\n    return selectRange(event, {\n      start: getFirstNode(),\n      end: getLastNode()\n    });\n  };\n  /*\n   * Mapping Helpers\n   */\n\n\n  var addNodeToNodeMap = function addNodeToNodeMap(id, childrenIds) {\n    var currentMap = nodeMap.current[id];\n    nodeMap.current[id] = _extends({}, currentMap, {\n      children: childrenIds,\n      id: id\n    });\n    childrenIds.forEach(function (childId) {\n      var currentChildMap = nodeMap.current[childId];\n      nodeMap.current[childId] = _extends({}, currentChildMap, {\n        parent: id,\n        id: childId\n      });\n    });\n  };\n\n  var getNodesToRemove = React.useCallback(function (id) {\n    var map = nodeMap.current[id];\n    var nodes = [];\n\n    if (map) {\n      nodes.push(id);\n\n      if (map.children) {\n        nodes.concat(map.children);\n        map.children.forEach(function (node) {\n          nodes.concat(getNodesToRemove(node));\n        });\n      }\n    }\n\n    return nodes;\n  }, []);\n  var cleanUpFirstCharMap = React.useCallback(function (nodes) {\n    var newMap = _extends({}, firstCharMap.current);\n\n    nodes.forEach(function (node) {\n      if (newMap[node]) {\n        delete newMap[node];\n      }\n    });\n    firstCharMap.current = newMap;\n  }, []);\n  var removeNodeFromNodeMap = React.useCallback(function (id) {\n    var nodes = getNodesToRemove(id);\n    cleanUpFirstCharMap(nodes);\n\n    var newMap = _extends({}, nodeMap.current);\n\n    nodes.forEach(function (node) {\n      var map = newMap[node];\n\n      if (map) {\n        if (map.parent) {\n          var parentMap = newMap[map.parent];\n\n          if (parentMap && parentMap.children) {\n            var parentChildren = parentMap.children.filter(function (c) {\n              return c !== node;\n            });\n            newMap[map.parent] = _extends({}, parentMap, {\n              children: parentChildren\n            });\n          }\n        }\n\n        delete newMap[node];\n      }\n    });\n    nodeMap.current = newMap;\n    setFocusedNodeId(function (oldFocusedNodeId) {\n      if (oldFocusedNodeId === id) {\n        return null;\n      }\n\n      return oldFocusedNodeId;\n    });\n  }, [getNodesToRemove, cleanUpFirstCharMap]);\n\n  var mapFirstChar = function mapFirstChar(id, firstChar) {\n    firstCharMap.current[id] = firstChar;\n  };\n\n  var prevChildIds = React.useRef([]);\n\n  var _React$useState3 = React.useState(false),\n      childrenCalculated = _React$useState3[0],\n      setChildrenCalculated = _React$useState3[1];\n\n  React.useEffect(function () {\n    var childIds = [];\n    React.Children.forEach(children, function (child) {\n      if ( /*#__PURE__*/React.isValidElement(child) && child.props.nodeId) {\n        childIds.push(child.props.nodeId);\n      }\n    });\n\n    if (arrayDiff(prevChildIds.current, childIds)) {\n      nodeMap.current[-1] = {\n        parent: null,\n        children: childIds\n      };\n      childIds.forEach(function (id, index) {\n        if (index === 0) {\n          setTabbable(id);\n        }\n      });\n      visibleNodes.current = nodeMap.current[-1].children;\n      prevChildIds.current = childIds;\n      setChildrenCalculated(true);\n    }\n  }, [children]);\n  React.useEffect(function () {\n    var buildVisible = function buildVisible(nodes) {\n      var list = [];\n\n      for (var i = 0; i < nodes.length; i += 1) {\n        var item = nodes[i];\n        list.push(item);\n        var childs = nodeMap.current[item].children;\n\n        if (isExpanded(item) && childs) {\n          list = list.concat(buildVisible(childs));\n        }\n      }\n\n      return list;\n    };\n\n    if (childrenCalculated) {\n      visibleNodes.current = buildVisible(nodeMap.current[-1].children);\n    }\n  }, [expanded, childrenCalculated, isExpanded, children]);\n\n  var noopSelection = function noopSelection() {\n    return false;\n  };\n\n  return /*#__PURE__*/React.createElement(TreeViewContext.Provider, {\n    value: {\n      icons: {\n        defaultCollapseIcon: defaultCollapseIcon,\n        defaultExpandIcon: defaultExpandIcon,\n        defaultParentIcon: defaultParentIcon,\n        defaultEndIcon: defaultEndIcon\n      },\n      focus: focus,\n      focusFirstNode: focusFirstNode,\n      focusLastNode: focusLastNode,\n      focusNextNode: focusNextNode,\n      focusPreviousNode: focusPreviousNode,\n      focusByFirstCharacter: focusByFirstCharacter,\n      expandAllSiblings: expandAllSiblings,\n      toggleExpansion: toggleExpansion,\n      isExpanded: isExpanded,\n      isFocused: isFocused,\n      isSelected: isSelected,\n      selectNode: disableSelection ? noopSelection : selectNode,\n      selectRange: disableSelection ? noopSelection : selectRange,\n      selectNextNode: disableSelection ? noopSelection : selectNextNode,\n      selectPreviousNode: disableSelection ? noopSelection : selectPreviousNode,\n      rangeSelectToFirst: disableSelection ? noopSelection : rangeSelectToFirst,\n      rangeSelectToLast: disableSelection ? noopSelection : rangeSelectToLast,\n      selectAllNodes: disableSelection ? noopSelection : selectAllNodes,\n      isTabbable: isTabbable,\n      multiSelect: multiSelect,\n      getParent: getParent,\n      mapFirstChar: mapFirstChar,\n      addNodeToNodeMap: addNodeToNodeMap,\n      removeNodeFromNodeMap: removeNodeFromNodeMap\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", _extends({\n    role: \"tree\",\n    \"aria-multiselectable\": multiSelect,\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), children));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiTreeView'\n})(TreeView);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7 10l5 5 5-5z\"\n}), 'ArrowDropDown');\n\nexports.default = _default;","import { JDBus } from \"./bus\";\nimport { PACKET_PROCESS, PACKET_SEND } from \"./constants\";\nimport JDIFrameClient from \"./iframeclient\";\nimport Packet from \"./packet\";\nimport { crc } from \"./utils\";\n\nexport interface PacketMessage {\n    channel: \"jacdac\";\n    type: \"messagepacket\";\n    broadcast: true;\n    data: Uint8Array;\n    sender?: string;\n}\n\n/**\n * A client that bridges received and sent packets to a parent iframe\n */\nexport default class IFrameBridgeClient extends JDIFrameClient {\n    // this is a unique id used to trace packets sent by this bridge\n    readonly bridgeId = \"bridge\" + Math.random();\n    packetSent = 0;\n    packetProcessed = 0;\n    constructor(readonly bus: JDBus) {\n        super(bus)\n        this.postPacket = this.postPacket.bind(this);\n        this.handleMessage = this.handleMessage.bind(this);\n        this.registerEvents();\n    }\n\n    private registerEvents() {\n        console.log(`jdiframe: listening for packets`)\n        this.mount(this.bus.subscribe(PACKET_PROCESS, this.postPacket));\n        this.mount(this.bus.subscribe(PACKET_SEND, this.postPacket))\n\n        window.addEventListener(\"message\", this.handleMessage, false);\n        this.mount(() => window.removeEventListener(\"message\", this.handleMessage, false))\n    }\n\n    private handleMessage(event: MessageEvent) {\n        if (!this.isOriginValid(event))\n            return;\n\n        const { data } = event;\n        const msg = data as PacketMessage;\n        if (msg\n            && msg.channel === \"jacdac\"\n            && msg.type === \"messagepacket\") {\n            this.handleMessageJacdac(msg);\n        }\n        else if (data?.source === \"pxtdriver\") {\n            this.handleDriverMessage(data);\n        }\n        else {\n            // unknown message\n            // console.log({ data })\n        }\n    }\n\n    private handleDriverMessage(msg: { type: string }) {\n        switch (msg.type) {\n            case \"stop\": // start again\n                this.bus.clear();\n                break;\n        }\n    }\n\n    private handleMessageJacdac(msg: PacketMessage) {\n        const pkt = Packet.fromBinary(msg.data, this.bus.timestamp);\n        if (!pkt)\n            return;\n        if (pkt.sender === this.bridgeId)  // returning packet\n            return;\n        this.packetProcessed++;\n        // we're adding a little trace to avoid resending our own packets\n        pkt.sender = msg.sender;\n        // send to native bus\n        this.bus.sendPacketAsync(pkt);\n        // send to javascript bus\n        this.bus.processPacket(pkt);\n    }\n\n    private postPacket(pkt: Packet) {\n        // check if this packet was already sent from another spot\n        if (!!pkt.sender)\n            return;\n\n        this.packetSent++;\n        pkt.sender = this.bridgeId;\n        console.log(`post packet ${pkt.sender}`)\n        const msg: PacketMessage = {\n            type: \"messagepacket\",\n            channel: \"jacdac\",\n            broadcast: true,\n            data: pkt.toBuffer(),\n            sender: this.bridgeId\n        }\n        // may not be in iframe\n        window.parent?.postMessage(msg, this.origin)\n    }\n}","import React, { useState, useEffect } from \"react\";\nimport JACDACContext from \"../../../src/react/Context\";\nimport { BusState, JDBus } from \"../../../src/jdom/bus\";\nimport { createUSBBus } from \"../../../src/jdom/usb\";\nimport { CONNECTION_STATE } from \"../../../src/jdom/constants\";\nimport IFrameBridgeClient from \"../../../src/jdom/iframebridgeclient\"\nimport { inIFrame } from \"../../../src/jdom/iframeclient\";\nimport Flags from \"../../../src/jdom/flags\"\n\nfunction sniffQueryArguments() {\n    if (typeof window === \"undefined\" || typeof URLSearchParams === \"undefined\")\n        return {\n            diagnostic: false,\n            webUSB: true,\n        };\n\n    const params = new URLSearchParams(window.location.search)\n    return {\n        diagnostics: params.get(`dbg`) === \"1\",\n        webUSB: params.get(`webusb`) !== \"0\",\n        parentOrigin: params.get('parentOrigin')\n    }\n}\n\nconst args = sniffQueryArguments();\nFlags.diagnostics = args.diagnostics;\nFlags.webUSB = args.webUSB;\n\nconst bus = Flags.webUSB ? createUSBBus(undefined, { parentOrigin: args.parentOrigin })\n    : new JDBus(undefined);\nbus.setBackgroundFirmwareScans(true);\n// tslint:disable-next-line: no-unused-expression\nif (inIFrame()) {\n    new IFrameBridgeClient(bus); // start bridge\n}\n\n\nconst JACDACProvider = ({ children }) => {\n    const [firstConnect, setFirstConnect] = useState(false)\n    const [connectionState, setConnectionState] = useState(bus.connectionState);\n\n    // connect in background on first load\n    useEffect(() => {\n        if (!firstConnect && bus.connectionState == BusState.Disconnected) {\n            setFirstConnect(true)\n            bus.connectAsync(true);\n        }\n        return () => { }\n    }, [])\n\n    // subscribe to connection state changes\n    useEffect(() => bus.subscribe<BusState>(CONNECTION_STATE, connectionState => setConnectionState(connectionState)), [])\n\n    const connectAsync = () => bus.connectAsync();\n    const disconnectAsync = () => bus.disconnectAsync();\n    return (\n        <JACDACContext.Provider value={{ bus, connectionState, connectAsync, disconnectAsync }}>\n            {children}\n        </JACDACContext.Provider>\n    )\n}\n\nexport default JACDACProvider;\n","import { CssBaseline, Theme, ThemeProvider } from \"@material-ui/core\";\nimport { ConfirmProvider } from \"material-ui-confirm\";\nimport { SnackbarProvider } from \"notistack\";\nimport React from \"react\";\nimport { IdProvider } from \"react-use-id-hook\";\nimport JACDACProvider from \"../jacdac/Provider\";\nimport { AppProvider } from \"./AppContext\";\nimport { DbProvider } from \"./DbContext\";\nimport { PacketsProvider } from \"./PacketsContext\";\nimport { ServiceManagerProvider } from \"./ServiceManagerContext\";\nimport Helmet from \"react-helmet\";\n\nexport default function ThemedLayout(props: { theme: Theme, maxSnack?: number, children: any }) {\n    const { theme, maxSnack, children } = props;\n    return (\n        <ThemeProvider theme={theme}>\n            <SnackbarProvider maxSnack={maxSnack || 1} dense={true}>\n                <IdProvider>\n                    <ConfirmProvider>\n                        <DbProvider>\n                            <JACDACProvider>\n                                <ServiceManagerProvider>\n                                    <PacketsProvider>\n                                        <AppProvider>\n                                            <CssBaseline />\n                                            <Helmet>\n                                                <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" crossOrigin=\"anonymous\" />\n                                                <link rel=\"preconnect\" href=\"https://raw.githubusercontent.com\" crossOrigin=\"anonymous\" />\n                                                <link rel=\"preconnect\" href=\"https://www.youtube-nocookie.com\" crossOrigin=\"anonymous\" />\n                                                <meta\n                                                    name=\"viewport\"\n                                                    content=\"minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no\"\n                                                />\n                                            </Helmet>\n                                            {children}\n                                        </AppProvider>\n                                    </PacketsProvider>\n                                </ServiceManagerProvider>\n                            </JACDACProvider>\n                        </DbProvider>\n                    </ConfirmProvider>\n                </IdProvider>\n            </SnackbarProvider>\n        </ThemeProvider>\n    )\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n/* eslint-disable jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions  */\n\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport Typography from '@material-ui/core/Typography';\nimport Collapse from '@material-ui/core/Collapse';\nimport { fade, withStyles, useTheme } from '@material-ui/core/styles';\nimport { useForkRef } from '@material-ui/core/utils';\nimport TreeViewContext from '../TreeView/TreeViewContext';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      listStyle: 'none',\n      margin: 0,\n      padding: 0,\n      outline: 0,\n      WebkitTapHighlightColor: 'transparent',\n      '&:focus > $content $label': {\n        backgroundColor: theme.palette.action.hover\n      },\n      '&$selected > $content $label': {\n        backgroundColor: fade(theme.palette.primary.main, theme.palette.action.selectedOpacity)\n      },\n      '&$selected > $content $label:hover, &$selected:focus > $content $label': {\n        backgroundColor: fade(theme.palette.primary.main, theme.palette.action.selectedOpacity + theme.palette.action.hoverOpacity),\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    },\n\n    /* Pseudo-class applied to the root element when expanded. */\n    expanded: {},\n\n    /* Pseudo-class applied to the root element when selected. */\n    selected: {},\n\n    /* Styles applied to the `role=\"group\"` element. */\n    group: {\n      margin: 0,\n      padding: 0,\n      marginLeft: 17\n    },\n\n    /* Styles applied to the tree node content. */\n    content: {\n      width: '100%',\n      display: 'flex',\n      alignItems: 'center',\n      cursor: 'pointer'\n    },\n\n    /* Styles applied to the tree node icon and collapse/expand icon. */\n    iconContainer: {\n      marginRight: 4,\n      width: 15,\n      display: 'flex',\n      flexShrink: 0,\n      justifyContent: 'center',\n      '& svg': {\n        fontSize: 18\n      }\n    },\n\n    /* Styles applied to the label element. */\n    label: {\n      width: '100%',\n      paddingLeft: 4,\n      position: 'relative',\n      '&:hover': {\n        backgroundColor: theme.palette.action.hover,\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    }\n  };\n};\n\nvar isPrintableCharacter = function isPrintableCharacter(str) {\n  return str && str.length === 1 && str.match(/\\S/);\n};\n\nvar TreeItem = /*#__PURE__*/React.forwardRef(function TreeItem(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      collapseIcon = props.collapseIcon,\n      endIcon = props.endIcon,\n      expandIcon = props.expandIcon,\n      iconProp = props.icon,\n      label = props.label,\n      nodeId = props.nodeId,\n      onClick = props.onClick,\n      onLabelClick = props.onLabelClick,\n      onIconClick = props.onIconClick,\n      onFocus = props.onFocus,\n      onKeyDown = props.onKeyDown,\n      onMouseDown = props.onMouseDown,\n      _props$TransitionComp = props.TransitionComponent,\n      TransitionComponent = _props$TransitionComp === void 0 ? Collapse : _props$TransitionComp,\n      TransitionProps = props.TransitionProps,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"collapseIcon\", \"endIcon\", \"expandIcon\", \"icon\", \"label\", \"nodeId\", \"onClick\", \"onLabelClick\", \"onIconClick\", \"onFocus\", \"onKeyDown\", \"onMouseDown\", \"TransitionComponent\", \"TransitionProps\"]);\n\n  var _React$useContext = React.useContext(TreeViewContext),\n      contextIcons = _React$useContext.icons,\n      focus = _React$useContext.focus,\n      focusFirstNode = _React$useContext.focusFirstNode,\n      focusLastNode = _React$useContext.focusLastNode,\n      focusNextNode = _React$useContext.focusNextNode,\n      focusPreviousNode = _React$useContext.focusPreviousNode,\n      focusByFirstCharacter = _React$useContext.focusByFirstCharacter,\n      selectNode = _React$useContext.selectNode,\n      selectRange = _React$useContext.selectRange,\n      selectNextNode = _React$useContext.selectNextNode,\n      selectPreviousNode = _React$useContext.selectPreviousNode,\n      rangeSelectToFirst = _React$useContext.rangeSelectToFirst,\n      rangeSelectToLast = _React$useContext.rangeSelectToLast,\n      selectAllNodes = _React$useContext.selectAllNodes,\n      expandAllSiblings = _React$useContext.expandAllSiblings,\n      toggleExpansion = _React$useContext.toggleExpansion,\n      isExpanded = _React$useContext.isExpanded,\n      isFocused = _React$useContext.isFocused,\n      isSelected = _React$useContext.isSelected,\n      isTabbable = _React$useContext.isTabbable,\n      multiSelect = _React$useContext.multiSelect,\n      getParent = _React$useContext.getParent,\n      mapFirstChar = _React$useContext.mapFirstChar,\n      addNodeToNodeMap = _React$useContext.addNodeToNodeMap,\n      removeNodeFromNodeMap = _React$useContext.removeNodeFromNodeMap;\n\n  var nodeRef = React.useRef(null);\n  var contentRef = React.useRef(null);\n  var handleRef = useForkRef(nodeRef, ref);\n  var icon = iconProp;\n  var expandable = Boolean(Array.isArray(children) ? children.length : children);\n  var expanded = isExpanded ? isExpanded(nodeId) : false;\n  var focused = isFocused ? isFocused(nodeId) : false;\n  var tabbable = isTabbable ? isTabbable(nodeId) : false;\n  var selected = isSelected ? isSelected(nodeId) : false;\n  var icons = contextIcons || {};\n  var theme = useTheme();\n\n  if (!icon) {\n    if (expandable) {\n      if (!expanded) {\n        icon = expandIcon || icons.defaultExpandIcon;\n      } else {\n        icon = collapseIcon || icons.defaultCollapseIcon;\n      }\n\n      if (!icon) {\n        icon = icons.defaultParentIcon;\n      }\n    } else {\n      icon = endIcon || icons.defaultEndIcon;\n    }\n  }\n\n  var handleClick = function handleClick(event) {\n    if (!focused) {\n      focus(nodeId);\n    }\n\n    var multiple = multiSelect && (event.shiftKey || event.ctrlKey || event.metaKey); // If already expanded and trying to toggle selection don't close\n\n    if (expandable && !event.defaultPrevented && !(multiple && isExpanded(nodeId))) {\n      toggleExpansion(event, nodeId);\n    }\n\n    if (multiple) {\n      if (event.shiftKey) {\n        selectRange(event, {\n          end: nodeId\n        });\n      } else {\n        selectNode(event, nodeId, true);\n      }\n    } else {\n      selectNode(event, nodeId);\n    }\n\n    if (onClick) {\n      onClick(event);\n    }\n  };\n\n  var handleMouseDown = function handleMouseDown(event) {\n    if (event.shiftKey || event.ctrlKey || event.metaKey) {\n      event.preventDefault();\n    }\n\n    if (onMouseDown) {\n      onMouseDown(event);\n    }\n  };\n\n  var handleNextArrow = function handleNextArrow(event) {\n    if (expandable) {\n      if (expanded) {\n        focusNextNode(nodeId);\n      } else {\n        toggleExpansion(event);\n      }\n    }\n\n    return true;\n  };\n\n  var handlePreviousArrow = function handlePreviousArrow(event) {\n    if (expanded) {\n      toggleExpansion(event, nodeId);\n      return true;\n    }\n\n    var parent = getParent(nodeId);\n\n    if (parent) {\n      focus(parent);\n      return true;\n    }\n\n    return false;\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    var flag = false;\n    var key = event.key;\n\n    if (event.altKey || event.currentTarget !== event.target) {\n      return;\n    }\n\n    var ctrlPressed = event.ctrlKey || event.metaKey;\n\n    switch (key) {\n      case ' ':\n        if (nodeRef.current === event.currentTarget) {\n          if (multiSelect && event.shiftKey) {\n            flag = selectRange(event, {\n              end: nodeId\n            });\n          } else if (multiSelect) {\n            flag = selectNode(event, nodeId, true);\n          } else {\n            flag = selectNode(event, nodeId);\n          }\n        }\n\n        event.stopPropagation();\n        break;\n\n      case 'Enter':\n        if (nodeRef.current === event.currentTarget && expandable) {\n          toggleExpansion(event);\n          flag = true;\n        }\n\n        event.stopPropagation();\n        break;\n\n      case 'ArrowDown':\n        if (multiSelect && event.shiftKey) {\n          selectNextNode(event, nodeId);\n        }\n\n        focusNextNode(nodeId);\n        flag = true;\n        break;\n\n      case 'ArrowUp':\n        if (multiSelect && event.shiftKey) {\n          selectPreviousNode(event, nodeId);\n        }\n\n        focusPreviousNode(nodeId);\n        flag = true;\n        break;\n\n      case 'ArrowRight':\n        if (theme.direction === 'rtl') {\n          flag = handlePreviousArrow(event);\n        } else {\n          flag = handleNextArrow(event);\n        }\n\n        break;\n\n      case 'ArrowLeft':\n        if (theme.direction === 'rtl') {\n          flag = handleNextArrow(event);\n        } else {\n          flag = handlePreviousArrow(event);\n        }\n\n        break;\n\n      case 'Home':\n        if (multiSelect && ctrlPressed && event.shiftKey) {\n          rangeSelectToFirst(event, nodeId);\n        }\n\n        focusFirstNode();\n        flag = true;\n        break;\n\n      case 'End':\n        if (multiSelect && ctrlPressed && event.shiftKey) {\n          rangeSelectToLast(event, nodeId);\n        }\n\n        focusLastNode();\n        flag = true;\n        break;\n\n      default:\n        if (key === '*') {\n          expandAllSiblings(event, nodeId);\n          flag = true;\n        } else if (multiSelect && ctrlPressed && key.toLowerCase() === 'a') {\n          flag = selectAllNodes(event);\n        } else if (!ctrlPressed && !event.shiftKey && isPrintableCharacter(key)) {\n          focusByFirstCharacter(nodeId, key);\n          flag = true;\n        }\n\n    }\n\n    if (flag) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  };\n\n  var handleFocus = function handleFocus(event) {\n    if (!focused && event.currentTarget === event.target) {\n      focus(nodeId);\n    }\n\n    if (onFocus) {\n      onFocus(event);\n    }\n  };\n\n  React.useEffect(function () {\n    if (addNodeToNodeMap) {\n      var childIds = [];\n      React.Children.forEach(children, function (child) {\n        if ( /*#__PURE__*/React.isValidElement(child) && child.props.nodeId) {\n          childIds.push(child.props.nodeId);\n        }\n      });\n      addNodeToNodeMap(nodeId, childIds);\n    }\n  }, [children, nodeId, addNodeToNodeMap]);\n  React.useEffect(function () {\n    if (removeNodeFromNodeMap) {\n      return function () {\n        removeNodeFromNodeMap(nodeId);\n      };\n    }\n\n    return undefined;\n  }, [nodeId, removeNodeFromNodeMap]);\n  React.useEffect(function () {\n    if (mapFirstChar && label) {\n      mapFirstChar(nodeId, contentRef.current.textContent.substring(0, 1).toLowerCase());\n    }\n  }, [mapFirstChar, nodeId, label]);\n  React.useEffect(function () {\n    if (focused) {\n      nodeRef.current.focus();\n    }\n  }, [focused]);\n  var ariaSelected;\n\n  if (multiSelect) {\n    ariaSelected = selected;\n  } else if (selected) {\n    // single-selection trees unset aria-selected\n    ariaSelected = true;\n  }\n\n  return /*#__PURE__*/React.createElement(\"li\", _extends({\n    className: clsx(classes.root, className, expanded && classes.expanded, selected && classes.selected),\n    role: \"treeitem\",\n    onKeyDown: handleKeyDown,\n    onFocus: handleFocus,\n    \"aria-expanded\": expandable ? expanded : null,\n    \"aria-selected\": ariaSelected,\n    ref: handleRef,\n    tabIndex: tabbable ? 0 : -1\n  }, other), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.content,\n    onClick: handleClick,\n    onMouseDown: handleMouseDown,\n    ref: contentRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: onIconClick,\n    className: classes.iconContainer\n  }, icon), /*#__PURE__*/React.createElement(Typography, {\n    onClick: onLabelClick,\n    component: \"div\",\n    className: classes.label\n  }, label)), children && /*#__PURE__*/React.createElement(TransitionComponent, _extends({\n    unmountOnExit: true,\n    className: classes.group,\n    in: expanded,\n    component: \"ul\",\n    role: \"group\"\n  }, TransitionProps), children));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiTreeItem'\n})(TreeItem);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 17l5-5-5-5v10z\"\n}), 'ArrowRight');\n\nexports.default = _default;","import * as React from 'react';\n/**\n * @ignore - internal component.\n */\n\nvar TreeViewContext = React.createContext({});\n\nif (process.env.NODE_ENV !== 'production') {\n  TreeViewContext.displayName = 'TreeViewContext';\n}\n\nexport default TreeViewContext;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport function isUnitless(value) {\n  return String(parseFloat(value)).length === String(value).length;\n} // Ported from Compass\n// https://github.com/Compass/compass/blob/master/core/stylesheets/compass/typography/_units.scss\n// Emulate the sass function \"unit\"\n\nexport function getUnit(input) {\n  return String(input).match(/[\\d.\\-+]*\\s*(.*)/)[1] || '';\n} // Emulate the sass function \"unitless\"\n\nexport function toUnitless(length) {\n  return parseFloat(length);\n} // Convert any CSS <length> or <percentage> value to any another.\n// From https://github.com/KyleAMathews/convert-css-length\n\nexport function convertLength(baseFontSize) {\n  return function (length, toUnit) {\n    var fromUnit = getUnit(length); // Optimize for cases where `from` and `to` units are accidentally the same.\n\n    if (fromUnit === toUnit) {\n      return length;\n    } // Convert input length to pixels.\n\n\n    var pxLength = toUnitless(length);\n\n    if (fromUnit !== 'px') {\n      if (fromUnit === 'em') {\n        pxLength = toUnitless(length) * toUnitless(baseFontSize);\n      } else if (fromUnit === 'rem') {\n        pxLength = toUnitless(length) * toUnitless(baseFontSize);\n        return length;\n      }\n    } // Convert length in pixels to the output unit\n\n\n    var outputLength = pxLength;\n\n    if (toUnit !== 'px') {\n      if (toUnit === 'em') {\n        outputLength = pxLength / toUnitless(baseFontSize);\n      } else if (toUnit === 'rem') {\n        outputLength = pxLength / toUnitless(baseFontSize);\n      } else {\n        return length;\n      }\n    }\n\n    return parseFloat(outputLength.toFixed(5)) + toUnit;\n  };\n}\nexport function alignProperty(_ref) {\n  var size = _ref.size,\n      grid = _ref.grid;\n  var sizeBelow = size - size % grid;\n  var sizeAbove = sizeBelow + grid;\n  return size - sizeBelow < sizeAbove - size ? sizeBelow : sizeAbove;\n} // fontGrid finds a minimal grid (in rem) for the fontSize values so that the\n// lineHeight falls under a x pixels grid, 4px in the case of Material Design,\n// without changing the relative line height\n\nexport function fontGrid(_ref2) {\n  var lineHeight = _ref2.lineHeight,\n      pixels = _ref2.pixels,\n      htmlFontSize = _ref2.htmlFontSize;\n  return pixels / (lineHeight * htmlFontSize);\n}\n/**\n * generate a responsive version of a given CSS property\n * @example\n * responsiveProperty({\n *   cssProperty: 'fontSize',\n *   min: 15,\n *   max: 20,\n *   unit: 'px',\n *   breakpoints: [300, 600],\n * })\n *\n * // this returns\n *\n * {\n *   fontSize: '15px',\n *   '@media (min-width:300px)': {\n *     fontSize: '17.5px',\n *   },\n *   '@media (min-width:600px)': {\n *     fontSize: '20px',\n *   },\n * }\n *\n * @param {Object} params\n * @param {string} params.cssProperty - The CSS property to be made responsive\n * @param {number} params.min - The smallest value of the CSS property\n * @param {number} params.max - The largest value of the CSS property\n * @param {string} [params.unit] - The unit to be used for the CSS property\n * @param {Array.number} [params.breakpoints]  - An array of breakpoints\n * @param {number} [params.alignStep] - Round scaled value to fall under this grid\n * @returns {Object} responsive styles for {params.cssProperty}\n */\n\nexport function responsiveProperty(_ref3) {\n  var cssProperty = _ref3.cssProperty,\n      min = _ref3.min,\n      max = _ref3.max,\n      _ref3$unit = _ref3.unit,\n      unit = _ref3$unit === void 0 ? 'rem' : _ref3$unit,\n      _ref3$breakpoints = _ref3.breakpoints,\n      breakpoints = _ref3$breakpoints === void 0 ? [600, 960, 1280] : _ref3$breakpoints,\n      _ref3$transform = _ref3.transform,\n      transform = _ref3$transform === void 0 ? null : _ref3$transform;\n\n  var output = _defineProperty({}, cssProperty, \"\".concat(min).concat(unit));\n\n  var factor = (max - min) / breakpoints[breakpoints.length - 1];\n  breakpoints.forEach(function (breakpoint) {\n    var value = min + factor * breakpoint;\n\n    if (transform !== null) {\n      value = transform(value);\n    }\n\n    output[\"@media (min-width:\".concat(breakpoint, \"px)\")] = _defineProperty({}, cssProperty, \"\".concat(Math.round(value * 10000) / 10000).concat(unit));\n  });\n  return output;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { formatMuiErrorMessage as _formatMuiErrorMessage } from \"@material-ui/utils\";\nimport { isUnitless, convertLength, responsiveProperty, alignProperty, fontGrid } from './cssUtils';\nexport default function responsiveFontSizes(themeInput) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$breakpoints = options.breakpoints,\n      breakpoints = _options$breakpoints === void 0 ? ['sm', 'md', 'lg'] : _options$breakpoints,\n      _options$disableAlign = options.disableAlign,\n      disableAlign = _options$disableAlign === void 0 ? false : _options$disableAlign,\n      _options$factor = options.factor,\n      factor = _options$factor === void 0 ? 2 : _options$factor,\n      _options$variants = options.variants,\n      variants = _options$variants === void 0 ? ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'subtitle1', 'subtitle2', 'body1', 'body2', 'caption', 'button', 'overline'] : _options$variants;\n\n  var theme = _extends({}, themeInput);\n\n  theme.typography = _extends({}, theme.typography);\n  var typography = theme.typography; // Convert between css lengths e.g. em->px or px->rem\n  // Set the baseFontSize for your project. Defaults to 16px (also the browser default).\n\n  var convert = convertLength(typography.htmlFontSize);\n  var breakpointValues = breakpoints.map(function (x) {\n    return theme.breakpoints.values[x];\n  });\n  variants.forEach(function (variant) {\n    var style = typography[variant];\n    var remFontSize = parseFloat(convert(style.fontSize, 'rem'));\n\n    if (remFontSize <= 1) {\n      return;\n    }\n\n    var maxFontSize = remFontSize;\n    var minFontSize = 1 + (maxFontSize - 1) / factor;\n    var lineHeight = style.lineHeight;\n\n    if (!isUnitless(lineHeight) && !disableAlign) {\n      throw new Error(process.env.NODE_ENV !== \"production\" ? \"Material-UI: Unsupported non-unitless line height with grid alignment.\\nUse unitless line heights instead.\" : _formatMuiErrorMessage(6));\n    }\n\n    if (!isUnitless(lineHeight)) {\n      // make it unitless\n      lineHeight = parseFloat(convert(lineHeight, 'rem')) / parseFloat(remFontSize);\n    }\n\n    var transform = null;\n\n    if (!disableAlign) {\n      transform = function transform(value) {\n        return alignProperty({\n          size: value,\n          grid: fontGrid({\n            pixels: 4,\n            lineHeight: lineHeight,\n            htmlFontSize: typography.htmlFontSize\n          })\n        });\n      };\n    }\n\n    typography[variant] = _extends({}, style, responsiveProperty({\n      cssProperty: 'fontSize',\n      min: minFontSize,\n      max: maxFontSize,\n      unit: 'rem',\n      breakpoints: breakpointValues,\n      transform: transform\n    }));\n  });\n  return theme;\n}"],"sourceRoot":""}