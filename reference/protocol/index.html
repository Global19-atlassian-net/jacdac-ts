<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/jacdac-ts/styles.cb2f4cc058193b1710f8.css" id="gatsby-global-css">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}.markdown h2 a,.markdown h3 a,.markdown h4 a,.markdown h5 a,.markdown h6 a,.markdown li a,.markdown p a{color:#fff;text-decoration:underline}.markdown pre{background:rgba(0,0,0,.4);padding:1rem;white-space:pre-wrap}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font-size:16px;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt";transition:.8s cubic-bezier(.2,.8,.2,1)}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{margin-left:0;margin-right:0;padding:0;margin-bottom:1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{margin-left:0;margin-right:0;padding:0;margin-bottom:1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{margin-left:0;margin-right:0;padding:0;margin-bottom:1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}.dark a.anchor{fill:#fff}@media only screen and (max-width:480px){html{font-size:100%}}footer{margin-top:1rem;font-size:80%}.gatsby-highlight{margin-bottom:1rem}.gatsby-resp-image-wrapper{max-width:100%!important}.prism-code{padding-bottom:.5rem!important;margin-bottom:0!important;white-space:pre-wrap}@media print{*{color:#000!important;background-color:#fff!important}}.clickeable{cursor:pointer}.clickeable:hover{outline:0;stroke:#ffc400}.clickeable:focus{outline:0;stroke:#000}.dark .clickeable:focus{stroke:#fff}.no-pointer-events{pointer-events:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}</style><meta name="generator" content="Gatsby 2.30.1"/><title data-react-helmet="true">Jacdac</title><link data-react-helmet="true" rel="preconnect" href="https://fonts.googleapis.com" crossorigin="anonymous"/><link data-react-helmet="true" rel="preconnect" href="https://raw.githubusercontent.com" crossorigin="anonymous"/><meta data-react-helmet="true" name="viewport" content="minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no"/><meta data-react-helmet="true" name="description" content="Documentation for the Jacdac protocol and libraries."/><meta data-react-helmet="true" property="og:title" content="Jacdac"/><meta data-react-helmet="true" property="og:description" content="Documentation for the Jacdac protocol and libraries."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Microsoft"/><meta data-react-helmet="true" name="twitter:title"/><meta data-react-helmet="true" name="twitter:description" content="Documentation for the Jacdac protocol and libraries."/><style id="jss-server-side">html{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*,::after,::before{box-sizing:inherit}b,strong{font-weight:700}body{color:rgba(0,0,0,.87);margin:0;font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.43;letter-spacing:.01071em;background-color:#fafafa}@media print{body{background-color:#fff}}body::-webkit-backdrop{background-color:#fafafa}body::backdrop{background-color:#fafafa}html{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*,::after,::before{box-sizing:inherit}b,strong{font-weight:700}body{color:#fff;margin:0;font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.43;letter-spacing:.01071em;background-color:#303030}@media print{body{background-color:#fff}}body::-webkit-backdrop{background-color:#303030}body::backdrop{background-color:#303030}.MuiSvgIcon-root-81{fill:currentColor;width:1em;height:1em;display:inline-block;font-size:1.5rem;transition:fill .2s cubic-bezier(.4,0,.2,1) 0s;flex-shrink:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.MuiSvgIcon-colorPrimary-82{color:#56d364}.MuiSvgIcon-colorSecondary-83{color:#ffc400}.MuiSvgIcon-colorAction-84{color:#fff}.MuiSvgIcon-colorError-85{color:#f44336}.MuiSvgIcon-colorDisabled-86{color:rgba(255,255,255,.3)}.MuiSvgIcon-fontSizeInherit-87{font-size:inherit}.MuiSvgIcon-fontSizeSmall-88{font-size:1.25rem}.MuiSvgIcon-fontSizeLarge-89{font-size:2.1875rem}.MuiCollapse-container-170{height:0;overflow:hidden;transition:height .3s cubic-bezier(.4,0,.2,1) 0s}.MuiCollapse-entered-171{height:auto;overflow:visible}.MuiCollapse-hidden-172{visibility:hidden}.MuiCollapse-wrapper-173{display:flex}.MuiCollapse-wrapperInner-174{width:100%}.MuiPaper-root-28{color:#fff;transition:box-shadow .3s cubic-bezier(.4,0,.2,1) 0s;background-color:#424242}.MuiPaper-rounded-29{border-radius:4px}.MuiPaper-outlined-30{border:1px solid rgba(255,255,255,.12)}.MuiPaper-elevation0-31{box-shadow:none}.MuiPaper-elevation1-32{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.MuiPaper-elevation2-33{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.MuiPaper-elevation3-34{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.MuiPaper-elevation4-35{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.MuiPaper-elevation5-36{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 5px 8px 0 rgba(0,0,0,.14),0 1px 14px 0 rgba(0,0,0,.12)}.MuiPaper-elevation6-37{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.MuiPaper-elevation7-38{box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}.MuiPaper-elevation8-39{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.MuiPaper-elevation9-40{box-shadow:0 5px 6px -3px rgba(0,0,0,.2),0 9px 12px 1px rgba(0,0,0,.14),0 3px 16px 2px rgba(0,0,0,.12)}.MuiPaper-elevation10-41{box-shadow:0 6px 6px -3px rgba(0,0,0,.2),0 10px 14px 1px rgba(0,0,0,.14),0 4px 18px 3px rgba(0,0,0,.12)}.MuiPaper-elevation11-42{box-shadow:0 6px 7px -4px rgba(0,0,0,.2),0 11px 15px 1px rgba(0,0,0,.14),0 4px 20px 3px rgba(0,0,0,.12)}.MuiPaper-elevation12-43{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.MuiPaper-elevation13-44{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}.MuiPaper-elevation14-45{box-shadow:0 7px 9px -4px rgba(0,0,0,.2),0 14px 21px 2px rgba(0,0,0,.14),0 5px 26px 4px rgba(0,0,0,.12)}.MuiPaper-elevation15-46{box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}.MuiPaper-elevation16-47{box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.MuiPaper-elevation17-48{box-shadow:0 8px 11px -5px rgba(0,0,0,.2),0 17px 26px 2px rgba(0,0,0,.14),0 6px 32px 5px rgba(0,0,0,.12)}.MuiPaper-elevation18-49{box-shadow:0 9px 11px -5px rgba(0,0,0,.2),0 18px 28px 2px rgba(0,0,0,.14),0 7px 34px 6px rgba(0,0,0,.12)}.MuiPaper-elevation19-50{box-shadow:0 9px 12px -6px rgba(0,0,0,.2),0 19px 29px 2px rgba(0,0,0,.14),0 7px 36px 6px rgba(0,0,0,.12)}.MuiPaper-elevation20-51{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 20px 31px 3px rgba(0,0,0,.14),0 8px 38px 7px rgba(0,0,0,.12)}.MuiPaper-elevation21-52{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 21px 33px 3px rgba(0,0,0,.14),0 8px 40px 7px rgba(0,0,0,.12)}.MuiPaper-elevation22-53{box-shadow:0 10px 14px -6px rgba(0,0,0,.2),0 22px 35px 3px rgba(0,0,0,.14),0 8px 42px 7px rgba(0,0,0,.12)}.MuiPaper-elevation23-54{box-shadow:0 11px 14px -7px rgba(0,0,0,.2),0 23px 36px 3px rgba(0,0,0,.14),0 9px 44px 8px rgba(0,0,0,.12)}.MuiPaper-elevation24-55{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12)}.MuiButtonBase-root-80{color:inherit;border:0;cursor:pointer;margin:0;display:inline-flex;outline:0;padding:0;position:relative;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:0;vertical-align:middle;-moz-appearance:none;justify-content:center;text-decoration:none;background-color:transparent;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.MuiButtonBase-root-80::-moz-focus-inner{border-style:none}.MuiButtonBase-root-80.Mui-disabled{cursor:default;pointer-events:none}@media print{.MuiButtonBase-root-80{-webkit-print-color-adjust:exact;color-adjust:exact}}.MuiIconButton-root-72{flex:0 0 auto;color:#fff;padding:12px;overflow:visible;font-size:1.5rem;text-align:center;transition:background-color 150ms cubic-bezier(.4,0,.2,1) 0s;border-radius:50%}.MuiIconButton-root-72:hover{background-color:rgba(255,255,255,.08)}.MuiIconButton-root-72.Mui-disabled{color:rgba(255,255,255,.3);background-color:transparent}@media (hover:none){.MuiIconButton-root-72:hover{background-color:transparent}}.MuiIconButton-edgeStart-73{margin-left:-12px}.MuiIconButton-sizeSmall-78.MuiIconButton-edgeStart-73{margin-left:-3px}.MuiIconButton-edgeEnd-74{margin-right:-12px}.MuiIconButton-sizeSmall-78.MuiIconButton-edgeEnd-74{margin-right:-3px}.MuiIconButton-colorInherit-75{color:inherit}.MuiIconButton-colorPrimary-76{color:#56d364}.MuiIconButton-colorPrimary-76:hover{background-color:rgba(86,211,100,.08)}@media (hover:none){.MuiIconButton-colorPrimary-76:hover{background-color:transparent}}.MuiIconButton-colorSecondary-77{color:#ffc400}.MuiIconButton-colorSecondary-77:hover{background-color:rgba(255,196,0,.08)}@media (hover:none){.MuiIconButton-colorSecondary-77:hover{background-color:transparent}}.MuiIconButton-sizeSmall-78{padding:3px;font-size:1.125rem}.MuiIconButton-label-79{width:100%;display:flex;align-items:inherit;justify-content:inherit}.MuiAppBar-root-17{width:100%;display:flex;z-index:1100;box-sizing:border-box;flex-shrink:0;flex-direction:column}.MuiAppBar-positionFixed-18{top:0;left:auto;right:0;position:fixed}@media print{.MuiAppBar-positionFixed-18{position:absolute}}.MuiAppBar-positionAbsolute-19{top:0;left:auto;right:0;position:absolute}.MuiAppBar-positionSticky-20{top:0;left:auto;right:0;position:-webkit-sticky;position:sticky}.MuiAppBar-positionStatic-21{position:static}.MuiAppBar-positionRelative-22{position:relative}.MuiAppBar-colorDefault-23{color:#fff;background-color:#212121}.MuiAppBar-colorPrimary-24{color:rgba(0,0,0,.87);background-color:#56d364}.MuiAppBar-colorSecondary-25{color:rgba(0,0,0,.87);background-color:#ffc400}.MuiAppBar-colorInherit-26{color:inherit}.MuiAppBar-colorTransparent-27{color:inherit;background-color:transparent}.MuiBadge-root-135{display:inline-flex;position:relative;flex-shrink:0;vertical-align:middle}.MuiBadge-badge-136{height:20px;display:flex;padding:0 6px;z-index:1;position:absolute;flex-wrap:wrap;font-size:.75rem;min-width:20px;box-sizing:border-box;transition:transform 225ms cubic-bezier(.4,0,.2,1) 0s;align-items:center;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1;align-content:center;border-radius:10px;flex-direction:row;justify-content:center}.MuiBadge-colorPrimary-137{color:rgba(0,0,0,.87);background-color:#56d364}.MuiBadge-colorSecondary-138{color:rgba(0,0,0,.87);background-color:#ffc400}.MuiBadge-colorError-139{color:rgba(0,0,0,.87);background-color:#f44336}.MuiBadge-dot-140{height:8px;padding:0;min-width:8px;border-radius:4px}.MuiBadge-anchorOriginTopRightRectangle-141{top:0;right:0;transform:scale(1) translate(50%,-50%);transform-origin:100% 0}.MuiBadge-anchorOriginTopRightRectangle-141.MuiBadge-invisible-149{transform:scale(0) translate(50%,-50%)}.MuiBadge-anchorOriginBottomRightRectangle-142{right:0;bottom:0;transform:scale(1) translate(50%,50%);transform-origin:100% 100%}.MuiBadge-anchorOriginBottomRightRectangle-142.MuiBadge-invisible-149{transform:scale(0) translate(50%,50%)}.MuiBadge-anchorOriginTopLeftRectangle-143{top:0;left:0;transform:scale(1) translate(-50%,-50%);transform-origin:0 0}.MuiBadge-anchorOriginTopLeftRectangle-143.MuiBadge-invisible-149{transform:scale(0) translate(-50%,-50%)}.MuiBadge-anchorOriginBottomLeftRectangle-144{left:0;bottom:0;transform:scale(1) translate(-50%,50%);transform-origin:0 100%}.MuiBadge-anchorOriginBottomLeftRectangle-144.MuiBadge-invisible-149{transform:scale(0) translate(-50%,50%)}.MuiBadge-anchorOriginTopRightCircle-145{top:14%;right:14%;transform:scale(1) translate(50%,-50%);transform-origin:100% 0}.MuiBadge-anchorOriginTopRightCircle-145.MuiBadge-invisible-149{transform:scale(0) translate(50%,-50%)}.MuiBadge-anchorOriginBottomRightCircle-146{right:14%;bottom:14%;transform:scale(1) translate(50%,50%);transform-origin:100% 100%}.MuiBadge-anchorOriginBottomRightCircle-146.MuiBadge-invisible-149{transform:scale(0) translate(50%,50%)}.MuiBadge-anchorOriginTopLeftCircle-147{top:14%;left:14%;transform:scale(1) translate(-50%,-50%);transform-origin:0 0}.MuiBadge-anchorOriginTopLeftCircle-147.MuiBadge-invisible-149{transform:scale(0) translate(-50%,-50%)}.MuiBadge-anchorOriginBottomLeftCircle-148{left:14%;bottom:14%;transform:scale(1) translate(-50%,50%);transform-origin:0 100%}.MuiBadge-anchorOriginBottomLeftCircle-148.MuiBadge-invisible-149{transform:scale(0) translate(-50%,50%)}.MuiBadge-invisible-149{transition:transform 195ms cubic-bezier(.4,0,.2,1) 0s}@media print{.jss16{display:none}}.jss169{margin-bottom:16px}@media print{.jss196{display:none}}.jss199{margin-bottom:32px}.jss201{margin:32px}.jss210{margin-bottom:32px}.jss211{margin:32px}.jss212{margin-bottom:32px}.jss213{margin:32px}.jss214{margin-bottom:32px}.jss215{margin:32px}.jss216{margin-bottom:32px}.jss217{margin:32px}.jss218{margin-bottom:32px}.jss219{margin:32px}.jss220{margin-bottom:32px}.jss221{margin-bottom:32px}.jss222{margin:32px}.jss223{margin-bottom:32px}.jss224{margin:32px}.jss225{margin-bottom:32px}.jss226{margin:32px}.jss227{margin-bottom:32px}.jss228{margin-bottom:32px}.jss229{margin:32px}.jss230{margin-bottom:32px}.jss231{margin:32px}.jss232{margin-bottom:32px}.jss233{margin-bottom:32px}.jss234{margin:32px}.MuiTypography-root-105{margin:0}.MuiTypography-body2-106{font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.43;letter-spacing:.01071em}.MuiTypography-body1-107{font-size:1rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.5;letter-spacing:.00938em}.MuiTypography-caption-108{font-size:.75rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.66;letter-spacing:.03333em}.MuiTypography-button-109{font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.75;letter-spacing:.02857em;text-transform:uppercase}.MuiTypography-h1-110{font-size:3.5rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:300;line-height:1.167;letter-spacing:-.01562em}@media (min-width:600px){.MuiTypography-h1-110{font-size:4.7129rem}}@media (min-width:960px){.MuiTypography-h1-110{font-size:5.3556rem}}@media (min-width:1280px){.MuiTypography-h1-110{font-size:5.9983rem}}.MuiTypography-h2-111{font-size:2.375rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:300;line-height:1.2;letter-spacing:-.00833em}@media (min-width:600px){.MuiTypography-h2-111{font-size:2.9167rem}}@media (min-width:960px){.MuiTypography-h2-111{font-size:3.3333rem}}@media (min-width:1280px){.MuiTypography-h2-111{font-size:3.75rem}}.MuiTypography-h3-112{font-size:2rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.167;letter-spacing:0}@media (min-width:600px){.MuiTypography-h3-112{font-size:2.5707rem}}@media (min-width:960px){.MuiTypography-h3-112{font-size:2.7849rem}}@media (min-width:1280px){.MuiTypography-h3-112{font-size:2.9991rem}}.MuiTypography-h4-113{font-size:1.5625rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.235;letter-spacing:.00735em}@media (min-width:600px){.MuiTypography-h4-113{font-size:1.8219rem}}@media (min-width:960px){.MuiTypography-h4-113{font-size:2.0243rem}}@media (min-width:1280px){.MuiTypography-h4-113{font-size:2.0243rem}}.MuiTypography-h5-114{font-size:1.25rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.334;letter-spacing:0}@media (min-width:600px){.MuiTypography-h5-114{font-size:1.3118rem}}@media (min-width:960px){.MuiTypography-h5-114{font-size:1.4993rem}}@media (min-width:1280px){.MuiTypography-h5-114{font-size:1.4993rem}}.MuiTypography-h6-115{font-size:1.125rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.6;letter-spacing:.0075em}@media (min-width:600px){.MuiTypography-h6-115{font-size:1.25rem}}@media (min-width:960px){.MuiTypography-h6-115{font-size:1.25rem}}@media (min-width:1280px){.MuiTypography-h6-115{font-size:1.25rem}}.MuiTypography-subtitle1-116{font-size:1rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.75;letter-spacing:.00938em}.MuiTypography-subtitle2-117{font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.57;letter-spacing:.00714em}.MuiTypography-overline-118{font-size:.75rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:2.66;letter-spacing:.08333em;text-transform:uppercase}.MuiTypography-srOnly-119{width:1px;height:1px;overflow:hidden;position:absolute}.MuiTypography-alignLeft-120{text-align:left}.MuiTypography-alignCenter-121{text-align:center}.MuiTypography-alignRight-122{text-align:right}.MuiTypography-alignJustify-123{text-align:justify}.MuiTypography-noWrap-124{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.MuiTypography-gutterBottom-125{margin-bottom:.35em}.MuiTypography-paragraph-126{margin-bottom:16px}.MuiTypography-colorInherit-127{color:inherit}.MuiTypography-colorPrimary-128{color:#56d364}.MuiTypography-colorSecondary-129{color:#ffc400}.MuiTypography-colorTextPrimary-130{color:#fff}.MuiTypography-colorTextSecondary-131{color:rgba(255,255,255,.7)}.MuiTypography-colorError-132{color:#f44336}.MuiTypography-displayInline-133{display:inline}.MuiTypography-displayBlock-134{display:block}.MuiContainer-root-161{width:100%;display:block;box-sizing:border-box;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px}@media (min-width:600px){.MuiContainer-root-161{padding-left:24px;padding-right:24px}}.MuiContainer-disableGutters-162{padding-left:0;padding-right:0}@media (min-width:600px){.MuiContainer-fixed-163{max-width:600px}}@media (min-width:960px){.MuiContainer-fixed-163{max-width:960px}}@media (min-width:1280px){.MuiContainer-fixed-163{max-width:1280px}}@media (min-width:1920px){.MuiContainer-fixed-163{max-width:1920px}}@media (min-width:0px){.MuiContainer-maxWidthXs-164{max-width:444px}}@media (min-width:600px){.MuiContainer-maxWidthSm-165{max-width:600px}}@media (min-width:960px){.MuiContainer-maxWidthMd-166{max-width:960px}}@media (min-width:1280px){.MuiContainer-maxWidthLg-167{max-width:1280px}}@media (min-width:1920px){.MuiContainer-maxWidthXl-168{max-width:1920px}}@media (min-width:0px) and (max-width:599.95px){.jss90{display:none}}@media (min-width:0px){.jss91{display:none}}@media (max-width:599.95px){.jss92{display:none}}@media (min-width:600px) and (max-width:959.95px){.jss93{display:none}}@media (min-width:600px){.jss94{display:none}}@media (max-width:959.95px){.jss95{display:none}}@media (min-width:960px) and (max-width:1279.95px){.jss96{display:none}}@media (min-width:960px){.jss97{display:none}}@media (max-width:1279.95px){.jss98{display:none}}@media (min-width:1280px) and (max-width:1919.95px){.jss99{display:none}}@media (min-width:1280px){.jss100{display:none}}@media (max-width:1919.95px){.jss101{display:none}}@media (min-width:1920px){.jss102{display:none}}@media (min-width:1920px){.jss103{display:none}}@media (min-width:0px){.jss104{display:none}}.MuiLink-underlineNone-192{text-decoration:none}.MuiLink-underlineHover-193{text-decoration:none}.MuiLink-underlineHover-193:hover{text-decoration:underline}.MuiLink-underlineAlways-194{text-decoration:underline}.MuiLink-button-195{border:0;cursor:pointer;margin:0;outline:0;padding:0;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:0;vertical-align:middle;-moz-appearance:none;background-color:transparent;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.MuiLink-button-195::-moz-focus-inner{border-style:none}.MuiLink-button-195.Mui-focusVisible{outline:auto}.MuiTable-root-202{width:100%;display:table;border-spacing:0;border-collapse:collapse}.MuiTable-root-202 caption{color:rgba(255,255,255,.7);padding:16px;font-size:.875rem;text-align:left;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.43;caption-side:bottom;letter-spacing:.01071em}.MuiTable-stickyHeader-203{border-collapse:separate}.MuiTableBody-root-209{display:table-row-group}.MuiTableContainer-root-200{width:100%;overflow-x:auto}.MuiTableHead-root-204{display:table-header-group}.MuiToolbar-root-56{display:flex;position:relative;align-items:center}.MuiToolbar-gutters-57{padding-left:16px;padding-right:16px}@media (min-width:600px){.MuiToolbar-gutters-57{padding-left:24px;padding-right:24px}}.MuiToolbar-regular-58{min-height:56px}@media (min-width:0px) and (orientation:landscape){.MuiToolbar-regular-58{min-height:48px}}@media (min-width:600px){.MuiToolbar-regular-58{min-height:64px}}.MuiToolbar-dense-59{min-height:48px}.MuiTableRow-root-205{color:inherit;display:table-row;outline:0;vertical-align:middle}.MuiTableRow-root-205.MuiTableRow-hover-206:hover{background-color:rgba(255,255,255,.08)}.MuiTableRow-root-205.Mui-selected,.MuiTableRow-root-205.Mui-selected:hover{background-color:rgba(255,196,0,.16)}.MuiTooltip-popper-61{z-index:1500;pointer-events:none}.MuiTooltip-popperInteractive-62{pointer-events:auto}.MuiTooltip-popperArrow-63[x-placement*=bottom] .MuiTooltip-arrow-66{top:0;left:0;margin-top:-.71em;margin-left:4px;margin-right:4px}.MuiTooltip-popperArrow-63[x-placement*=top] .MuiTooltip-arrow-66{left:0;bottom:0;margin-left:4px;margin-right:4px;margin-bottom:-.71em}.MuiTooltip-popperArrow-63[x-placement*=right] .MuiTooltip-arrow-66{left:0;width:.71em;height:1em;margin-top:4px;margin-left:-.71em;margin-bottom:4px}.MuiTooltip-popperArrow-63[x-placement*=left] .MuiTooltip-arrow-66{right:0;width:.71em;height:1em;margin-top:4px;margin-right:-.71em;margin-bottom:4px}.MuiTooltip-popperArrow-63[x-placement*=left] .MuiTooltip-arrow-66::before{transform-origin:0 0}.MuiTooltip-popperArrow-63[x-placement*=right] .MuiTooltip-arrow-66::before{transform-origin:100% 100%}.MuiTooltip-popperArrow-63[x-placement*=top] .MuiTooltip-arrow-66::before{transform-origin:100% 0}.MuiTooltip-popperArrow-63[x-placement*=bottom] .MuiTooltip-arrow-66::before{transform-origin:0 100%}.MuiTooltip-tooltip-64{color:#fff;padding:4px 8px;font-size:.625rem;max-width:300px;word-wrap:break-word;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.4em;border-radius:4px;background-color:rgba(97,97,97,.9)}.MuiTooltip-tooltipArrow-65{margin:0;position:relative}.MuiTooltip-arrow-66{color:rgba(97,97,97,.9);width:1em;height:.71em;overflow:hidden;position:absolute;box-sizing:border-box}.MuiTooltip-arrow-66::before{width:100%;height:100%;margin:auto;content:"";display:block;transform:rotate(45deg);background-color:currentColor}.MuiTooltip-touch-67{padding:8px 16px;font-size:.875rem;font-weight:400;line-height:1.14286em}.MuiTooltip-tooltipPlacementLeft-68{margin:0 24px;transform-origin:right center}@media (min-width:600px){.MuiTooltip-tooltipPlacementLeft-68{margin:0 14px}}.MuiTooltip-tooltipPlacementRight-69{margin:0 24px;transform-origin:left center}@media (min-width:600px){.MuiTooltip-tooltipPlacementRight-69{margin:0 14px}}.MuiTooltip-tooltipPlacementTop-70{margin:24px 0;transform-origin:center bottom}@media (min-width:600px){.MuiTooltip-tooltipPlacementTop-70{margin:14px 0}}.MuiTooltip-tooltipPlacementBottom-71{margin:24px 0;transform-origin:center top}@media (min-width:600px){.MuiTooltip-tooltipPlacementBottom-71{margin:14px 0}}.MuiAlert-root-175{display:flex;padding:6px 16px;font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.43;border-radius:4px;letter-spacing:.01071em;background-color:transparent}.MuiAlert-standardSuccess-176{color:#b7dfb9;background-color:#071107}.MuiAlert-standardSuccess-176 .MuiAlert-icon-188{color:#4caf50}.MuiAlert-standardInfo-177{color:#a6d5fa;background-color:#030e18}.MuiAlert-standardInfo-177 .MuiAlert-icon-188{color:#2196f3}.MuiAlert-standardWarning-178{color:#ffd599;background-color:#190f00}.MuiAlert-standardWarning-178 .MuiAlert-icon-188{color:#ff9800}.MuiAlert-standardError-179{color:#fab3ae;background-color:#180605}.MuiAlert-standardError-179 .MuiAlert-icon-188{color:#f44336}.MuiAlert-outlinedSuccess-180{color:#b7dfb9;border:1px solid #4caf50}.MuiAlert-outlinedSuccess-180 .MuiAlert-icon-188{color:#4caf50}.MuiAlert-outlinedInfo-181{color:#a6d5fa;border:1px solid #2196f3}.MuiAlert-outlinedInfo-181 .MuiAlert-icon-188{color:#2196f3}.MuiAlert-outlinedWarning-182{color:#ffd599;border:1px solid #ff9800}.MuiAlert-outlinedWarning-182 .MuiAlert-icon-188{color:#ff9800}.MuiAlert-outlinedError-183{color:#fab3ae;border:1px solid #f44336}.MuiAlert-outlinedError-183 .MuiAlert-icon-188{color:#f44336}.MuiAlert-filledSuccess-184{color:#fff;font-weight:500;background-color:#4caf50}.MuiAlert-filledInfo-185{color:#fff;font-weight:500;background-color:#2196f3}.MuiAlert-filledWarning-186{color:#fff;font-weight:500;background-color:#ff9800}.MuiAlert-filledError-187{color:#fff;font-weight:500;background-color:#f44336}.MuiAlert-icon-188{display:flex;opacity:.9;padding:7px 0;font-size:22px;margin-right:12px}.MuiAlert-message-189{padding:8px 0}.MuiAlert-action-190{display:flex;align-items:center;margin-left:auto;margin-right:-8px;padding-left:16px}.jss60{color:#fff;background-color:#303030}.jss150{width:40rem;flex-shrink:0}@media (max-width:959.95px){.jss150{width:100%}}.jss151{width:40rem}@media (max-width:959.95px){.jss151{width:100%}}.jss152{width:18rem;flex-shrink:0}.jss153{width:18rem}.jss154{display:flex;padding:0 8px;min-height:56px;align-items:center;justify-content:flex-start}@media (min-width:0px) and (orientation:landscape){.jss154{min-height:48px}}@media (min-width:600px){.jss154{min-height:64px}}.jss155{margin-left:16px}.jss156{margin:16px}.jss157{flex:1}.jss158{width:22rem;flex-shrink:0}@media (max-width:959.95px){.jss158{width:18rem}}.jss159{width:22rem}@media (max-width:959.95px){.jss159{width:18rem}}.jss160{display:flex;padding:0 8px;min-height:56px;align-items:center;justify-content:flex-start}@media (min-width:0px) and (orientation:landscape){.jss160{min-height:48px}}@media (min-width:600px){.jss160{min-height:64px}}.jss197{min-width:275px;margin-bottom:1rem}.jss198{font-size:14px}.jss235{margin-top:24px}.jss235 *{color:#fff;font-size:9.799999999999999px;text-decoration:none}.jss235 a:hover{text-decoration:underline}.jss235 a:visited{color:rgba(255,255,255,.5)}.jss235 a{margin-right:4px}.jss1{display:flex;flex-grow:1}.jss2{flex-grow:1}.jss3{transition:margin 195ms cubic-bezier(.4,0,.6,1) 0s,width 195ms cubic-bezier(.4,0,.6,1) 0s}.jss4{width:calc(100% - 40rem);transition:margin 225ms cubic-bezier(0,0,.2,1) 0s,width 225ms cubic-bezier(0,0,.2,1) 0s;margin-left:40rem}@media (max-width:959.95px){.jss4{width:calc(100% - 20rem);margin-left:20rem}}.jss5{width:calc(100% - 18rem);transition:margin 225ms cubic-bezier(0,0,.2,1) 0s,width 225ms cubic-bezier(0,0,.2,1) 0s;margin-left:18rem}.jss6{width:calc(100% - 22rem);transition:margin 225ms cubic-bezier(0,0,.2,1) 0s,width 225ms cubic-bezier(0,0,.2,1) 0s;margin-right:22rem}@media (max-width:959.95px){.jss6{width:calc(100% - 18rem);margin-right:18rem}}.jss7{margin-right:8px}@media (max-width:1279.95px){.jss8{display:none}}.jss9{display:flex;padding:0 8px;min-height:56px;align-items:center;justify-content:flex-end}@media (min-width:0px) and (orientation:landscape){.jss9{min-height:48px}}@media (min-width:600px){.jss9{min-height:64px}}.jss10{display:flex;padding:24px;flex-grow:1;min-width:10rem;min-height:100vh;transition:margin 195ms cubic-bezier(.4,0,.6,1) 0s;flex-direction:column}.jss11{flex-grow:1}.jss12{transition:margin 225ms cubic-bezier(0,0,.2,1) 0s}.jss13{width:calc(100% - .5rem);transition:margin 225ms cubic-bezier(0,0,.2,1) 0s;margin-left:-22rem}@media (max-width:959.95px){.jss13{margin-left:-18rem}}.jss14{right:24px;bottom:24px;position:fixed}.jss14>*{margin:8px}</style><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/jacdac-ts/static/webfonts/s/roboto/v20/KFOlCnqEu92Fr1MmSU5fBBc4.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/jacdac-ts/static/webfonts/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxK.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/jacdac-ts/static/webfonts/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBBc4.woff2"/><style>@font-face{font-family:Roboto;font-style:normal;font-weight:300;src:url(/jacdac-ts/static/webfonts/s/roboto/v20/KFOlCnqEu92Fr1MmSU5fBBc4.woff2) format("woff2");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:400;src:url(/jacdac-ts/static/webfonts/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:500;src:url(/jacdac-ts/static/webfonts/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:300;src:url(/jacdac-ts/static/webfonts/s/roboto/v20/KFOlCnqEu92Fr1MmSU5fBBc-.woff) format("woff");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:400;src:url(/jacdac-ts/static/webfonts/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxM.woff) format("woff");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:500;src:url(/jacdac-ts/static/webfonts/s/roboto/v20/KFOlCnqEu92Fr1MmEU9fBBc-.woff) format("woff");font-display:swap}</style><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="sitemap" type="application/xml" href="/jacdac-ts/sitemap.xml"/><link rel="icon" href="/jacdac-ts/favicon-32x32.png" type="image/png"/><link rel="icon" href="/jacdac-ts/favicon.svg" type="image/svg+xml"/><link rel="manifest" href="/jacdac-ts/manifest.webmanifest" crossorigin="use-credentials"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/jacdac-ts/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/jacdac-ts/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/jacdac-ts/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/jacdac-ts/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/jacdac-ts/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/jacdac-ts/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/jacdac-ts/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/jacdac-ts/icons/icon-512x512.png"/><link as="script" rel="preload" href="/jacdac-ts/webpack-runtime-dd1ba690492ad7dd1561.js"/><link as="script" rel="preload" href="/jacdac-ts/framework-f19c6c9d119c831d5054.js"/><link as="script" rel="preload" href="/jacdac-ts/styles-c212ca3684de16c6f115.js"/><link as="script" rel="preload" href="/jacdac-ts/app-706c7f5c68740b83cd63.js"/><link as="script" rel="preload" href="/jacdac-ts/component---src-components-spec-tsx-8cccf5b8eadb242f30bf.js"/><link as="fetch" rel="preload" href="/jacdac-ts/page-data/reference/protocol/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/jacdac-ts/page-data/sq/d/2214083594.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/jacdac-ts/page-data/sq/d/2270080012.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/jacdac-ts/page-data/sq/d/2461311362.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/jacdac-ts/page-data/sq/d/2744294623.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/jacdac-ts/page-data/sq/d/3159585216.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/jacdac-ts/page-data/sq/d/413816803.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/jacdac-ts/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/jacdac-ts/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="dark jss1"><header></header><nav><div class="MuiBox-root-15 jss16"><header class="MuiPaper-root-28 MuiAppBar-root-17 MuiAppBar-positionFixed-18 MuiAppBar-colorInherit-26 jss3 mui-fixed MuiPaper-elevation4-35"><div class="MuiToolbar-root-56 MuiToolbar-regular-58 MuiToolbar-gutters-57"><span title="open table of contents" class=""><button class="MuiButtonBase-root-80 MuiIconButton-root-72 jss7 MuiIconButton-colorInherit-75 MuiIconButton-edgeStart-73" tabindex="0" type="button" aria-label="open table of contents"><span class="MuiIconButton-label-79"> <svg class="MuiSvgIcon-root-81" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></span></button></span><span title="open device tree" class=""><button class="MuiButtonBase-root-80 MuiIconButton-root-72 jss7 MuiIconButton-colorInherit-75 MuiIconButton-edgeStart-73" tabindex="0" type="button" aria-label="open device tree"><span class="MuiIconButton-label-79"> <svg class="MuiSvgIcon-root-81" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"></path></svg></span></button></span><span title="open packet console" class=""><button class="MuiButtonBase-root-80 MuiIconButton-root-72 jss7 MuiIconButton-colorInherit-75 MuiIconButton-edgeStart-73" tabindex="0" type="button" aria-label="open packet console"><span class="MuiIconButton-label-79"> <svg class="MuiSvgIcon-root-81" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"></path></svg></span></button></span><div class="jss95"><h1 class="MuiTypography-root-105 MuiTypography-h6-115">Jacdac </h1></div><div class="jss2"></div><span title="Device Dashboard" class=""><a class="MuiButtonBase-root-80 MuiIconButton-root-72 jss7 MuiIconButton-colorInherit-75 MuiIconButton-edgeStart-73" tabindex="0" role="button" aria-disabled="false" aria-label="Device Dashboard" href="/jacdac-ts/dashboard/"><span class="MuiIconButton-label-79"><span class="MuiBadge-root-135"><svg class="MuiSvgIcon-root-81" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M14.535 2.731c0-.841-.83-1.524-1.85-1.524h-1.152c-1.022 0-1.85.683-1.85 1.524V21.27c0 .841.828 1.524 1.85 1.524h1.152c1.02 0 1.85-.683 1.85-1.524V2.73zM20.648 4.9c0-.841-.829-1.524-1.85-1.524h-1.152c-1.021 0-1.85.683-1.85 1.524v16.369c0 .841.829 1.524 1.85 1.524h1.152c1.021 0 1.85-.683 1.85-1.524V4.899zM8.205 2.73c0-.841-.83-1.524-1.85-1.524H5.201c-1.02 0-1.85.683-1.85 1.524V21.27c0 .841.83 1.524 1.85 1.524h1.152c1.022 0 1.85-.683 1.85-1.524V2.73zM5.779 18.958a1.501 1.501 0 11-.002 3.003 1.501 1.501 0 01.002-3.003zm6.33 0a1.501 1.501 0 11-.001 3.003 1.501 1.501 0 010-3.003zm6.113 0a1.501 1.501 0 11-.002 3.003 1.501 1.501 0 01.002-3.003z"></path></svg><span class="MuiBadge-badge-136 MuiBadge-anchorOriginTopRightRectangle-141 MuiBadge-colorSecondary-138 MuiBadge-invisible-149">0</span></span></span></a></span><span title="open /github" class=""><a class="MuiButtonBase-root-80 MuiIconButton-root-72 jss7 MuiIconButton-colorInherit-75 MuiIconButton-edgeStart-73" tabindex="0" role="button" aria-disabled="false" aria-label="open /github" href="/jacdac-ts/github"><span class="MuiIconButton-label-79"><svg class="MuiSvgIcon-root-81" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.5 1 0-.8.4-1.3.7-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.2-.4-.6-1.6 0-3.2 0 0 1-.3 3.4 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8 0 3.2.9.8 1.3 1.9 1.3 3.2 0 4.6-2.8 5.6-5.5 5.9.5.4.9 1 .9 2.2v3.3c0 .3.1.7.8.6A12 12 0 0 0 12 .3"></path></svg></span></a></span><span title="More" class=""><button class="MuiButtonBase-root-80 MuiIconButton-root-72 jss7 MuiIconButton-colorInherit-75 MuiIconButton-edgeStart-73" tabindex="0" type="button" aria-label="More tools"><span class="MuiIconButton-label-79"><svg class="MuiSvgIcon-root-81" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg></span></button></span></div></header></div></nav><div class="MuiContainer-root-161 jss10 MuiContainer-disableGutters-162 MuiContainer-maxWidthXl-168"><main class="jss11"><div class="jss9"></div><div class="MuiBox-root-15 jss169"><div class="MuiCollapse-container-170 MuiCollapse-entered-171" style="min-height:0px"><div class="MuiCollapse-wrapper-173"><div class="MuiCollapse-wrapperInner-174"><div class="MuiPaper-root-28 MuiAlert-root-175 MuiAlert-standardWarning-178 MuiPaper-elevation0-31" role="alert"><div class="MuiAlert-icon-188"><svg class="MuiSvgIcon-root-81 MuiSvgIcon-fontSizeInherit-87" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"></path></svg></div><div class="MuiAlert-message-189">UNDER CONSTRUCTION - We are still working and changing the Jacdac specification. Do not build devices using Jacdac.</div><div class="MuiAlert-action-190"><button class="MuiButtonBase-root-80 MuiIconButton-root-72 MuiIconButton-colorInherit-75 MuiIconButton-sizeSmall-78" tabindex="0" type="button" aria-label="Close" title="Close"><span class="MuiIconButton-label-79"><svg class="MuiSvgIcon-root-81 MuiSvgIcon-fontSizeSmall-88" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></span></button></div></div></div></div></div></div><span class="MuiTypography-root-105 markdown MuiTypography-body1-107"><div class="MuiContainer-root-161 MuiContainer-maxWidthLg-167"><h1 id="protocol-specification" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#protocol-specification" aria-label="protocol specification permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Protocol Specification</h1><p>Jacdac is a new protocol designed
to make it easier to connect low cost microcontrollers and sensors together.
Jacdac is not only designed for easier physical connectivity,
it is an entire hardware and software stack that bridges the world of the low cost
microcontroller to the web browser and beyond.</p><ul><li>novel 3-wire cable and connector</li><li>bus topology</li><li>device discovery and service advertisement</li><li>standardized service abstraction</li><li>full stack from 8bit MCU to web development</li></ul><h2 id="overview" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#overview" aria-label="overview permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2><p>A Jacdac device is any device that generates its own unique <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="./device-identity">device identifier</a>
and implements the Jacdac protocol.
The protocol consists of three core layers:</p><ol><li>The <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="./service-layer">service layer</a>––How Jacdac devices share hardware
or software resources with one another.</li><li>The <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="./transport-layer">transport layer</a>––Responsible for reliably routing packets
to and from services and applications.</li><li>The <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="./physical-layer">physical layer</a>––Transmits and receives packets from other
Jacdac devices.</li></ol><h3 id="service-layer" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#service-layer" aria-label="service layer permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Service Layer</h3><p>The way Jacdac devices share resources with other devices on the bus are through <strong>services</strong>.
Services provide abstract, standardized interfaces that can be used to interact with
physical hardware resources (e.g. an accelerometer) or pure virtual resources
(e.g. the state of a video game). This abstraction brings plug-and-play dynamism to
Jacdac so that devices with different hardware, but the same overall functionality,
can replace one another without having to recompile user applications. For example,
two different models of accelerometer hardware can replace each other
because they share the same software interface. </p><ul><li><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="./service-layer">Read more about the service layer</a></li></ul><p>Any device that hosts a service must also run the control service.
The control service is responsible for advertising any services a device
is running every 500 milliseconds. Like any other service,
the packets emitted by the control service are standardized.
There also a set of common commands that must be implemented by Jacdac devices that operate services,
including functionality like <code>reset</code> and <code>time since boot</code>.</p><p>Most Jacdac users will never need to write a service: the major use case is for users
to write applications that interact with Jacdac devices and services.
Using Jacdac in microcontroller applications is incredibly easy and only
requires a software stack that has a compatible Jacdac physical layer.</p><p>Services are registered in the <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="/jacdac-ts/services">service catalog</a>
and described by <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="/jacdac-ts/reference/specification/service-specification">service specifications</a>.</p><h3 id="transport-layer" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#transport-layer" aria-label="transport layer permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Transport Layer</h3><p>Whenever a frame is received by the physical layer, the transport layer
divides that frame into data packets and forwards them to the appropriate service
or user application. At this point, services and applications can use packets
to perform actions based on new data.</p><p>In many cases it is important that data is received by a specific device.
Jacdac supports this mechanism using acknowledgements and pipes.
Acknowledgements are incredibly simple and require receiving devices
to recognise that a frame has successfully been received.
Pipes on the other hand set up a point to point connection between devices,
and every packet is acknowledged and received using a sliding window approach.
Only the most capable devices are expected to support pipes.</p><ul><li><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="./transport-layer">Read more about the transport layer.</a></li></ul><h3 id="physical-layer" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#physical-layer" aria-label="physical layer permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Physical Layer</h3><p>There can be many various physical layer implementations responsible
for sending frames across a wired or wireless communication medium.
Frames contain one or more packets, and packets contain a service command or report.
Frames also have addressing metadata embedded inside them that the transport
layer uses to route packets correctly.</p><ul><li><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="./physical-layer">Read more about the physical layer.</a></li></ul><h2 id="device-identity" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#device-identity" aria-label="device identity permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Device Identity</h2><p><strong>By design, the Jacdac protocol does not support allocation of unique device identifiers.</strong>
Instead, each device must assign itself a 64-bit device identifier that uniquely identifies it on the bus.
This identifier is used to determine the sending or receiving device, and for devices to remember one another on the bus.
Once generated, a device&#x27;s identifier must remain constant. As long identifiers are generated with appropriate entropy (see analysis below), there is little chance of identifier collision.
We recommend the following ways of generating a unique identifier:</p><ol><li><p>Use the random number generator (found below) to allocate an identifier for each device.
The number generator could even be included into automated flashing processes to ensure appropriate entropy.</p></li><li><p>Use the generator below to seed a hardware random number generator.
The hardware random number generator could use sensor values to create further entropy.</p></li></ol><p>Most often, the device identifier will be assigned by the device&#x27;s bootloader and stored in non-volatile flash.
For an example, see <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="https://github.com/microsoft/jacdac-stm32x0/blob/master/bl/blmain.c" target="_blank" rel="nofollow noopener noreferrer">the Jacdac bootloader for STM32x0</a>.</p><div class="MuiBox-root-15 jss196"></div><p>If we consider one trillion Jacdac networks size of 200 devices with randomly chosen 64 bit JDIDs,
the probability of a JDID collision in at least one of the networks is 0.1%.
On the other hand, with 32 bit IDs and 2000 networks, the collision probability in any of them is already 1%,
and with 200k networks it&#x27;s more than 60%.</p><h2 id="service-layer-1" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#service-layer-1" aria-label="service layer 1 permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Service Layer</h2><p>The way Jacdac devices share resources with other devices on the bus are through <strong>services</strong>.
Services provide abstract, standardized interfaces that can be used to interact with
physical hardware resources (e.g. an accelerometer) or pure virtual resources
(e.g. the state of a video game). This abstraction brings plug-and-play dynamism to
Jacdac so that devices with different hardware, but the same overall functionality,
can replace one another without having to recompile user applications.
For example, two different models of accelerometer hardware can replace each other
because they share the same software interface.</p><p>Services act on <strong>commands</strong> and optionally respond with <strong>reports</strong>.
Reports can also be emitted separately from a service without prompting from another device.
This interface is specified in a <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="../../service-specification">custom markdown language</a>
that lists the possible commands and reports that a service can consume and emit.
Specifications can also inherit from other specifications. An example of this can be seen in the <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="../../../services/_sensor">sensor specification</a>. Jacdac sensors inherit commands and reports from this specification, creating a set of base functionality for <em>all</em> sensors.</p><p>A service is globally and uniquely identified by its service class, which should be found in the <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="../../../services">service catalog</a>. For example, the service class of the <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="../../../services/button">button service</a> is <code>0x1473a263</code>, as specified in the button&#x27;s <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="https://github.com/microsoft/jacdac/blob/main/services/button.md" target="_blank" rel="nofollow noopener noreferrer">service specification</a> in the GitHub repository that contains the registered services. (In contrast, the <code>service_index</code> field in the Jacdac packet is an index into the list of services advertised by a device. The control service has both service class 0 and service number 0.)</p><h3 id="commands" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#commands" aria-label="commands permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Commands</h3><p>Commands are 16-bit and specified in the <code>service_command</code> field of a Jacdac packet. A command is composed of a 4-bit operation and a 12-bit code.</p><p>The operation is stored in the top most nibble of the <code>service_command</code> field. The following table below outlines all possible operations; XXX represents any 12-bit command code:</p><div class="MuiBox-root-15 jss199"><div class="MuiPaper-root-28 MuiTableContainer-root-200 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div class="MuiBox-root-15 jss201"><table class="MuiTable-root-202"><thead class="MuiTableHead-root-204"><tr class="MuiTableRow-root-205 MuiTableRow-head-207"><th>Operation number</th><th>Command</th></tr></thead><tbody class="MuiTableBody-root-209"><tr class="MuiTableRow-root-205"><td><code>0x0XXX</code></td><td>Action</td></tr><tr class="MuiTableRow-root-205"><td><code>0x1XXX</code></td><td>Register read</td></tr><tr class="MuiTableRow-root-205"><td><code>0x2XXX</code></td><td>Register write</td></tr><tr class="MuiTableRow-root-205"><td><code>0x3XXX</code>- <code>0x7XXX</code></td><td>Reserved</td></tr><tr class="MuiTableRow-root-205"><td><code>0x8XXX</code>- <code>0xfXXX</code></td><td>Events</td></tr></tbody></table></div></div></div><h4 id="actions" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#actions" aria-label="actions permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Actions</h4><p>Actions are a type of command that cause a service to begin to carry out a task. An example action might be to calibrate a magnetometer.</p><p>Services can freely allocate their own action command codes in the following range:</p><div class="MuiBox-root-15 jss210"><div class="MuiPaper-root-28 MuiTableContainer-root-200 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div class="MuiBox-root-15 jss211"><table class="MuiTable-root-202"><thead class="MuiTableHead-root-204"><tr class="MuiTableRow-root-205 MuiTableRow-head-207"><th>Action code range</th><th>Purpose</th></tr></thead><tbody class="MuiTableBody-root-209"><tr class="MuiTableRow-root-205"><td><code>0x080-0xeff</code></td><td>Service defined action command codes</td></tr></tbody></table></div></div></div><p>However, services <strong>must not</strong> allocate any of the common or reserved action command codes specified in the table below:</p><div class="MuiBox-root-15 jss212"><div class="MuiPaper-root-28 MuiTableContainer-root-200 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div class="MuiBox-root-15 jss213"><table class="MuiTable-root-202"><thead class="MuiTableHead-root-204"><tr class="MuiTableRow-root-205 MuiTableRow-head-207"><th>Action code range</th><th>Purpose</th></tr></thead><tbody class="MuiTableBody-root-209"><tr class="MuiTableRow-root-205"><td><code>0x000-0x07f</code></td><td>Common action command codes</td></tr><tr class="MuiTableRow-root-205"><td><code>0xf00-0xfff</code></td><td>Reserved action command codes</td></tr></tbody></table></div></div></div><p>Common action command codes are allocated in the <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="../../../services/_system">system specification</a>.</p><h4 id="registers" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#registers" aria-label="registers permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Registers</h4><p>Registers are properties that represent the state of a service.  Registers are variable length and are between 1 byte and 236 bytes (max payload) in size. Sequential register codes do not overlap with one another. For example, it is possible to have register <code>0x090</code> of size <code>12</code> and non-overlapping register <code>0x091</code> of size <code>4</code>.</p><p>Registers can be accessed and modified by register read (<code>0x1XXX</code>) and register write (<code>0x2XXX</code>) operations. Registers can be specified to be read-only or read-write capable. Trying to write to a read-only register will result in a nop (no operation). Because registers can have different access attributes they are segmented into different command code ranges.</p><p>Register command codes can be freely allocated in the following ranges:</p><div class="MuiBox-root-15 jss214"><div class="MuiPaper-root-28 MuiTableContainer-root-200 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div class="MuiBox-root-15 jss215"><table class="MuiTable-root-202"><thead class="MuiTableHead-root-204"><tr class="MuiTableRow-root-205 MuiTableRow-head-207"><th>Register code range</th><th>Purpose</th></tr></thead><tbody class="MuiTableBody-root-209"><tr class="MuiTableRow-root-205"><td><code>0x080-0x0ff</code></td><td>Read-write register codes specific to a service</td></tr><tr class="MuiTableRow-root-205"><td><code>0x180-0x1ff</code></td><td>Read-only register codes specific to a service</td></tr><tr class="MuiTableRow-root-205"><td><code>0x280-0x2ff</code></td><td>Additional register codes specific to a service. Should generally be avoided.</td></tr></tbody></table></div></div></div><p>However, services <strong>must not</strong> allocate any of the common or reserved register command codes specified in the table below:</p><div class="MuiBox-root-15 jss216"><div class="MuiPaper-root-28 MuiTableContainer-root-200 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div class="MuiBox-root-15 jss217"><table class="MuiTable-root-202"><thead class="MuiTableHead-root-204"><tr class="MuiTableRow-root-205 MuiTableRow-head-207"><th>Register code range</th><th>Purpose</th></tr></thead><tbody class="MuiTableBody-root-209"><tr class="MuiTableRow-root-205"><td><code>0x001-0x07f</code></td><td>Read-write registers common to all services</td></tr><tr class="MuiTableRow-root-205"><td><code>0x100-0x17f</code></td><td>Read-only registers common to all services</td></tr><tr class="MuiTableRow-root-205"><td><code>0xf00-0xfff</code></td><td>Reserved for future use.</td></tr></tbody></table></div></div></div><p>Common register command codes are allocated in the <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="../../../services/_system">system specification</a>.</p><h4 id="reports" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#reports" aria-label="reports permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reports</h4><p>Reports are packets sent by a service as a response to a command. They can also be used to independently broadcast important information such as events.</p><p>The layout of a report depends on its purpose:</p><ul><li><strong>Register reports</strong> must always contain the register values requested in the original command packet, but for actions, the format is left up to the service creator to define.</li><li><strong>Actions reports</strong> can either contain a pre-determined number of bytes as defined in the service specification or bear no operation.</li><li><strong>Events</strong> are emitted independently by a service without prompting.
Some services may offer an interface to configure which events are emitted. Events are discussed in details in the next section.</li></ul><h4 id="events" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#events" aria-label="events permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Events</h4><p>Events have a specially-constructed operation code:</p><div class="MuiBox-root-15 jss218"><div class="MuiPaper-root-28 MuiTableContainer-root-200 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div class="MuiBox-root-15 jss219"><table class="MuiTable-root-202"><thead class="MuiTableHead-root-204"><tr class="MuiTableRow-root-205 MuiTableRow-head-207"><th>Bits</th><th>Function</th></tr></thead><tbody class="MuiTableBody-root-209"><tr class="MuiTableRow-root-205"><td>15</td><td>Always set for events</td></tr><tr class="MuiTableRow-root-205"><td>14:8</td><td>Sequential counter</td></tr><tr class="MuiTableRow-root-205"><td>7:0</td><td>Event code</td></tr></tbody></table></div></div></div><p>Event codes <code>0x00-0x7f</code> are common to all services, and codes <code>0x80-0xff</code> are service-specific.
Events can (but often don&#x27;t) contain payloads.</p><p>Event reports are sent in the same way as any other packet, and <code>device_identifier</code>, <code>service_index</code>, and <code>service_command</code> differentiate it from other types of reports. These differentiators provide a unique namespace for each service. Multiple event reports can be sent by using multiple packets in the same frame.</p><p>The counter in operation code is incremented by 1 for every event emitted.
This is global to device, not per-service.
Every event is typically emitted 3 times:</p><ul><li>once when it happens</li><li>the first repetition after about 20ms</li><li>the second repetition after about 100ms</li></ul><p>Each repetition is emitted with the same sequential counter.</p><p>The client should ignore the repetitions it receives.
However, if the client misses an event, it will likely get the repetition, and handle that.
The client should maintain the last sequential number for every device.
If an event <code>X</code> comes with a sequential number in advance of what&#x27;s expected, the client should drop it,
wait for the preceding event(s), and eventually handle the repetition of <code>X</code> when it arrives.
The client thus handles events in sequential order.</p><p>As a motivation, consider a device with button services.
If these are handled purely through events, the client will maintain the pressed state for each button.
For this, it&#x27;s critical not to swap order of up/down events.
To recognize button combinations, it&#x27;s important not to swap order of events from the two services.</p><h3 id="the-control-service" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#the-control-service" aria-label="the control service permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The control service</h3><p>Each device runs its own control service, which emits advertisement packets roughly every 500 milliseconds. The service class of the control service is zero (0). Each advertisement contains the device&#x27;s identifier (as usual) as well a list of host services offered by the device; other devices on the bus can inspect these advertisements and subsequently communicate with the advertised services to incorporate them in user applications.</p><p>The control service also offers a set of common commands that can be used to query/inspect each Jacdac device. For example, the <code>IDENTIFY</code> command causes a Jacdac device to perform an action that allows a user to locate a particular device, usually through blinking an LED. In addition to emiting an advertisement packet every 500 milliseconds, a device that hosts one or more services must respond to all commands listed in the <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="../../../services/control">control service specification</a>.</p><p>The implementation complexity of the control service scales with respect to the number of services a device implements. For instance, it is very simple to process packets for a single user service (in addition to the control service), but complexity increases as more services are added. This flexibility is a benefit as it allows ultra low-cost microcontrollers to be used in simple devices.</p><h3 id="transport-layer-1" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#transport-layer-1" aria-label="transport layer 1 permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Transport Layer</h3><p>A device&#x27;s presence/absence on the bus is signified by the presence/absence of advertising packets containing its device identifier, which should be sent every 500 milliseconds. If a client of a Jacdac device does not receive an advertisement from the device for several advertisement periods (1-2 seconds), it should assume the device has left the bus. If the device rejoins the bus, it may present a different list of services. In fact, devices are free to change the list of services they advertise at any time.</p><h3 id="jacdac-frames-packets-and-service-indices" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#jacdac-frames-packets-and-service-indices" aria-label="jacdac frames packets and service indices permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Jacdac frames, packets and service indices</h3><p>A Jacdac frame contains a list of Jacdac packets (of length at least one), which all share the same device identifier and flags (see the logical description of a Jacdac packet below). The frame also contains a cyclic redundancy code (CRC). If the device identifier of the frame matches the device&#x27;s identifier, then the device sends an acknowledgement containing the frame&#x27;s CRC (JD_SERVICE_NUMBER_CRC_ACK).</p><p>A Jacdac packet is described by the following structure:</p><div class="MuiBox-root-15 jss220"><div class="MuiPaper-root-28 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div><pre class="prism-code language-c" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint8_t flags</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint64_t device_identifier</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint8_t service_size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">         </span><span class="token comment" style="color:rgb(106, 153, 85)">// size of the data payload</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint8_t service_index</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)">// the index into the device&#x27;s advertised list of services</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint16_t service_command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint8_t data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div></pre></div></div></div><p>The above structure omits the details about physical transmission of Jacdac packets over the wire and the packing of multiple packets within frames. For more information, see <a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="../physical-layer/sws">the single wire serial protocol</a>.</p><p>A device will generally maintain device-specific state for each of the services that it supports. This state should be kept in an array, where each array entry contains the service class and (a pointer to) the device-specific state for that service. When a device advertises its service classes they are presented in the same order as in the list.  This allows clients of the device to refer to one of its services by list index (<code>service_index</code>, an 8 bit quantity) instead of service class (a 32 bit quantity). The zero index (service number) is reserved for the control service. </p><h4 id="flags" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#flags" aria-label="flags permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>flags</h4><p>A packet contains only one device identifier (rather than both source and destination identifiers, as in IP). If the lowest bit of <code>flags</code> is set, the packet is a <em>command packet</em> and <code>device_identifier</code> is the destination device receiving the packet; otherwise, the packet is a <em>report packet</em> and <code>device_identifier</code> is the source device broadcasting information on the bus. Read more about command and report packets in the next section.</p><p>If the second bit of <code>flags</code> is set</p><p>If the third bit of <code>flags</code> is set (<em>multicast commands</em>), then the low order 32 bits of the <code>device_identifier</code> field are treated as a service class. The command is then directed to all services with that service class.</p><div class="MuiBox-root-15 jss221"><div class="MuiPaper-root-28 MuiTableContainer-root-200 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div class="MuiBox-root-15 jss222"><table class="MuiTable-root-202"><thead class="MuiTableHead-root-204"><tr class="MuiTableRow-root-205 MuiTableRow-head-207"><th>Flag bit</th><th>Interpretation</th></tr></thead><tbody class="MuiTableBody-root-209"><tr class="MuiTableRow-root-205"><td><code>0x01</code></td><td>if set, the <code>device_identifier</code> is the recipient of command; if clear, the <code>device_identifier</code> is the sender of a report;</td></tr><tr class="MuiTableRow-root-205"><td><code>0x02</code></td><td>if set, an ACK should be issued with CRC</td></tr><tr class="MuiTableRow-root-205"><td><code>0x04</code></td><td>if set, the device_identifier contains target service class number (multicast)</td></tr><tr class="MuiTableRow-root-205"><td><code>0x80</code></td><td>if set, the packet comes from Jacdac vNext and should be ignored by the current implementation</td></tr></tbody></table></div></div></div><h3 id="acks" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#acks" aria-label="acks permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Acks</h3><p>If a frame is received by the control layer, and is then routed correctly,
an ACK may need to be sent.
This only applies when frame contains command packets,
device identifier equals our device identifier,
and the second bit of frame flags is set.</p><p>ACK packet uses our device identifier, service number of <code>0x3f</code>,
and uses the CRC of the packet being acknowledged as the service command.
The payload is zero-sized.</p><p>All devices, except for the most resource-constrained bootloaders,
should be able to send ACKs.
They should indicate that in their advertisement packet.</p><h3 id="pipes" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#pipes" aria-label="pipes permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pipes</h3><p>Pipes are application-level mechanism for establishing reliable one- and two-way
point-to-point data links.</p><p>Typical packet loss in Jacdac networks is well under 1%.
Anything that can withstand such packet loss <strong>should not</strong> be done over a pipe,
as pipes have quite big overhead.</p><p>Typical applications where pipes should be used:</p><ul><li>a WiFi service, where the pipe represents a TCP connection</li><li>when a response to a command doesn&#x27;t fit in one packet (eg. WiFi scan results)</li><li>when events need to be delivered reliably (eg., RFID reader)</li></ul><p>Pipes should generally not be used for:</p><ul><li>streaming sensor data (sensor events are OK)</li><li>video data</li><li>audio data</li></ul><p>The way to initially establish a pipe depends on service, but typically
device A would send a command to device B to establish a pipe.
Device A would include its device identifier and <em>port</em>
(a 9 bit number of A&#x27;s choosing; there would normally be one port per pipe) in the command.
If a two-way communication is desired, device B could then state the port on its side.</p><p>Both devices can then start sending commands to their respective ports.
The pipe commands use a fixed service number of <code>0x3e</code> and set the require-ACK
flag on frames.
The service command is split as follows:</p><div class="MuiBox-root-15 jss223"><div class="MuiPaper-root-28 MuiTableContainer-root-200 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div class="MuiBox-root-15 jss224"><table class="MuiTable-root-202"><thead class="MuiTableHead-root-204"><tr class="MuiTableRow-root-205 MuiTableRow-head-207"><th align="right">Bits</th><th>Description</th></tr></thead><tbody class="MuiTableBody-root-209"><tr class="MuiTableRow-root-205"><td align="right">4:0</td><td>Wrap around packet counter</td></tr><tr class="MuiTableRow-root-205"><td align="right">6:5</td><td>Content type</td></tr><tr class="MuiTableRow-root-205"><td align="right">15:7</td><td>Port number</td></tr></tbody></table></div></div></div><p>The packet counter starts at <code>0x0</code> goes up to <code>0x1f</code>, and then back to <code>0x0</code>.
Rationale: there can be up to 30 non-empty packets in a frame.</p><p>Content type is:</p><ul><li><code>0</code> for regular pipe data</li><li><code>1</code> for regular pipe data after which the pipe is to be closed</li><li><code>2</code> for service-specific out-of-band meta-data</li><li><code>3</code> is reserved</li></ul><p>The sending protocol is:</p><ul><li>wait for any data that needs to be sent over the pipe</li><li>send it as a command; wait for ACK</li><li>if we timeout waiting for ACK, repeat previous step</li><li>if we repeated 10 times already, close the pipe</li><li>increment the pipe counter</li><li>go back to the first step</li></ul><p>The wait for ACK should follow exponential back-off, starting with 1ms up to 1024ms.</p><p>The receiving protocol keeps a counter for each pipe. This counter starts at 0.</p><ul><li>when a pipe command is received, ACK it (this is usually done generically, not only for pipes)</li><li>if stored counter for pipe doesn&#x27;t match the counter in the packet, drop the packet</li><li>increment stored counter</li><li>process data in packet</li><li>repeat</li></ul><p>The protocol above has an effective window of 1.
The counter allows increasing that up to 31, but this would require dealing with
multiple packets per frame and is currently out of scope.</p><p>Pipes should be considered closed when the device at the other end resets.</p><p>TODO: Zero-length pipe commands can be sent as keep-alive packets.
Is this needed?</p><p>Note that pipes are transmit streams of Jacdac packets, not streams of bytes.
They should not be recombined at any layer in the implementation.
For example, a command that returns a list of things can send each thing in a separate
pipe packet, without any additional info about how to chunk the data
(provided each thing fits in a packet).
Multiple packets can be grouped in a frame, but are still handled separately at the
destination.</p><h3 id="event-subscriptions" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#event-subscriptions" aria-label="event subscriptions permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Event subscriptions</h3><p>A device like accelerometer can send events eg. when a 2g shock is detected,
when it&#x27;s moved face-down, etc.
These events a normally just broadcast on the bus, using standard command <code>0x001</code>.</p><p>For reliable event delivery, a pipe can be established, and events delivered
over that pipe.</p><h2 id="physical-layer-1" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#physical-layer-1" aria-label="physical layer 1 permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Physical Layer</h2><p>The responsibility of the physical layer is to send/receive a byte buffer
(representing a Jacdac frame from the transport layer
over a particular media. Currently, we have implemented:</p><ul><li>Single Wire Serial connects microcontrollers to each other using UART</li><li>Web USB: micro-controller to web browser</li></ul><h3 id="single-wire-serial-sws" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#single-wire-serial-sws" aria-label="single wire serial sws permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Single Wire Serial (SWS)</h3><p>Jacdac requires devices have a microcontroller with UART, Timer, and GPIO interrupt capabilities.</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:800px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:38.5%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAC4jAAAuIwF4pT92AAACLElEQVQoz1WQz2vTYBzG379BkFkRvHhelc2DIB4UhCKehjKQDqqH0msHSkdxWWsVlIGnHrodZi2DpemPJG2pdSHSuoKrLdk6a+u6bGll3eoKU1i3Jk1ev2/w4gtfnoc8D5/3/QY5nzjPbX3felptVF/2jnoBQRB8iUSC4nmeSnIcJeY++HY3Nl4cdruBg4ODQBdUUZSAVJf8vV4vUCgU/NB/Dv1XoI8Rsxy7uH+4/6fZ2sbkQAHH43GcSadxkmXx2icRH8mymRmGYepJ/wTXdr6ZvlwuYwDhNPRBN9HUoynrXmuvWd4sk/wMgCoAVXplRWU5XhVzObVRqaiQqYaumwpAtfClYPoKZDRNnzIMg1mWFdHkw8kxWZF3K9UKAQ4BaADQWAiFDI7nDSGbNWpfS+RpwNNNBaABQNNLkmREIhEtHA5jjuPyaObZzJXWz5ZSrVfNrcjKZIVUKoUBiPOCgNu12n8r90/7eF1aNz28kPR10k8mk58R/Z4eaXfa8rbyg+RaPp8fwPM1CPVYPK6tieLZr52mNtA0XVVVDTqD49/HQ/iHQ7JyqVRSo9HoAPoELCDLBcv5Of/c9cWlxWvZbNZqt9vvOhyOm9TsrNU9PT3+YGLifnB+fvzj6upoMBi84Xa77zEx5urCUsjq8/nuOJ3O216vdxRmzGaz3UIduYMazToKL79DmXQGwa2oWCwil8tlejiXYEZgLP/8ZfL9zdvXZk7G4/EgiqJM/xeNuM1iZxTu+QAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="An image depicting a Jacdac transmission. A Jacdac transmission begins with a start pulse of 11-14 us, a inter lo data spacing of minimally 40 us before data commences. A Jacdac transmission ends with an end pulse of 11-14 us." title="An image depicting a Jacdac transmission. A Jacdac transmission begins with a start pulse of 11-14 us, a inter lo data spacing of minimally 40 us before data commences. A Jacdac transmission ends with an end pulse of 11-14 us." src="/jacdac-ts/static/9fdbd7cb80bf359a0ff2ed62539dcf06/5a190/jacdac-activity.png" srcSet="/jacdac-ts/static/9fdbd7cb80bf359a0ff2ed62539dcf06/772e8/jacdac-activity.png 200w,/jacdac-ts/static/9fdbd7cb80bf359a0ff2ed62539dcf06/e17e5/jacdac-activity.png 400w,/jacdac-ts/static/9fdbd7cb80bf359a0ff2ed62539dcf06/5a190/jacdac-activity.png 800w,/jacdac-ts/static/9fdbd7cb80bf359a0ff2ed62539dcf06/c1b63/jacdac-activity.png 1200w,/jacdac-ts/static/9fdbd7cb80bf359a0ff2ed62539dcf06/c2d9c/jacdac-activity.png 1326w" sizes="(max-width: 800px) 100vw, 800px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
    </span></p><p>For communication Jacdac SWS reuses the often forgotten RS232 (UART) peripheral,
common to many microcontrollers. Devices operate the UART peripheral in half-duplex mode
and are connected together to form a single bus.
This bus requires a common data and ground line to be shared between devices.</p><p>Like with standard UART, a logical one is represented as 3.3V and a logical 0 as 0V.
Data bytes are 10 bits long and are composed of 1 start bit, 8 data bits, and one stop bit.
Jacdac devices must only communicate at 1 Mbaud and when no data is being transmitted,
the bus must read as a logical one (3.3V).</p><p>In Jacdac SWS, any device can initiate a transmission at any time. B
ecause of this, devices must assert control over the bus before sending any data.
This is where Jacdac differs from half-duplex UART–––devices must assert control over the bus
by pulsing the line low before transmitting any data. This low pulse is known as the start pulse
and must be between 11 and 15 microseconds in duration. This duration is recognised
as a break condition on most UART hardware.</p><p>When the start pulse is over, devices have minimally 40 microseconds to configure IO registers
to receive UART data. If no data byte is received within 100 microseconds,
an error condition must be triggered and devices must wait for the bus to return to an idle state.
This means that the first data byte must commence at 89 microseconds
after the completion of the start pulse in order to be specification compliant.</p><p>After the transmitter has sent the data portion of a frame, it must then pulse
the line low one final time to signal the end of a transmission.
The duration of this end pulse is between 11 and 15 microseconds so to trigger
another UART break condition. The end pulse can come immediately after the last data byte,
but it must occur within 80 microseconds of the last data byte. If it does not,
an error condition is generated.</p><p>A small amount of time must pass before another transmission can begin.
Devices must wait minimally 100 microseconds plus a randomly generated backoff value
so that multiple devices do not initiate transmission at precisely the same time.
It is therefore extremely important that all devices have some randomness in their transmission sequence
to reduce the likelihood of data loss.</p><p>A complete Jacdac transmission and the beginning of another are captured in the image below.</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:800px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:38.5%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAC4jAAAuIwF4pT92AAACLElEQVQoz1WQz2vTYBzG379BkFkRvHhelc2DIB4UhCKehjKQDqqH0msHSkdxWWsVlIGnHrodZi2DpemPJG2pdSHSuoKrLdk6a+u6bGll3eoKU1i3Jk1ev2/w4gtfnoc8D5/3/QY5nzjPbX3felptVF/2jnoBQRB8iUSC4nmeSnIcJeY++HY3Nl4cdruBg4ODQBdUUZSAVJf8vV4vUCgU/NB/Dv1XoI8Rsxy7uH+4/6fZ2sbkQAHH43GcSadxkmXx2icRH8mymRmGYepJ/wTXdr6ZvlwuYwDhNPRBN9HUoynrXmuvWd4sk/wMgCoAVXplRWU5XhVzObVRqaiQqYaumwpAtfClYPoKZDRNnzIMg1mWFdHkw8kxWZF3K9UKAQ4BaADQWAiFDI7nDSGbNWpfS+RpwNNNBaABQNNLkmREIhEtHA5jjuPyaObZzJXWz5ZSrVfNrcjKZIVUKoUBiPOCgNu12n8r90/7eF1aNz28kPR10k8mk58R/Z4eaXfa8rbyg+RaPp8fwPM1CPVYPK6tieLZr52mNtA0XVVVDTqD49/HQ/iHQ7JyqVRSo9HoAPoELCDLBcv5Of/c9cWlxWvZbNZqt9vvOhyOm9TsrNU9PT3+YGLifnB+fvzj6upoMBi84Xa77zEx5urCUsjq8/nuOJ3O216vdxRmzGaz3UIduYMazToKL79DmXQGwa2oWCwil8tlejiXYEZgLP/8ZfL9zdvXZk7G4/EgiqJM/xeNuM1iZxTu+QAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="An image depicting a Jacdac transmission. A Jacdac transmission begins with a start pulse of 11-14 us, a inter lo data spacing of minimally 40 us before data commences. A Jacdac transmission ends with an end pulse of 11-14 us." title="An image depicting a Jacdac transmission. A Jacdac transmission begins with a start pulse of 11-14 us, a inter lo data spacing of minimally 40 us before data commences. A Jacdac transmission ends with an end pulse of 11-14 us." src="/jacdac-ts/static/9fdbd7cb80bf359a0ff2ed62539dcf06/5a190/jacdac-activity.png" srcSet="/jacdac-ts/static/9fdbd7cb80bf359a0ff2ed62539dcf06/772e8/jacdac-activity.png 200w,/jacdac-ts/static/9fdbd7cb80bf359a0ff2ed62539dcf06/e17e5/jacdac-activity.png 400w,/jacdac-ts/static/9fdbd7cb80bf359a0ff2ed62539dcf06/5a190/jacdac-activity.png 800w,/jacdac-ts/static/9fdbd7cb80bf359a0ff2ed62539dcf06/c1b63/jacdac-activity.png 1200w,/jacdac-ts/static/9fdbd7cb80bf359a0ff2ed62539dcf06/c2d9c/jacdac-activity.png 1326w" sizes="(max-width: 800px) 100vw, 800px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
    </span></p><h4 id="hardware-requirements" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#hardware-requirements" aria-label="hardware requirements permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hardware requirements</h4><p>There is no silicon implementation of Jacdac SWS and a microcontroller is currently required to implement the behaviour above. The diversity of microcontrollers and the flexibility of UART hardware means that there are many pathways to reaching a specification compliant Jacdac SWS implementation.</p><p>To recap, Jacdac SWS requires the following basic functionality:</p><ul><li>Transmitting / receiving UART-style (10 bits: 1 byte, 1 stop bit, 1 start bit) bytes at 1Mbaud in half-duplex mode (implemented in hardware or in software via bit-banging).</li><li>A GPIO with an internal or external 300k pull up and support for interrupts (implemented in hardware or in software by spin waiting).</li><li>The ability to keep time (whether through instruction counting or a hardware timer).</li><li>The ability to generate random numbers (or at least seed a software random number generator).</li></ul><h4 id="transmission-sequence" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#transmission-sequence" aria-label="transmission sequence permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Transmission sequence</h4><ol><li>Place GPIO in high impedence input mode.</li><li>Check to see if the line is low.<ul><li>If the line is already low, start the reception sequence instead.</li></ul></li><li>Place GPIO pin in output mode</li><li>Pulse the line low for 11––15 microseconds.</li><li>Configure the UART peripheral with the correct baud rate and begin transmitting data after (minimally) 40 microseconds.</li></ol><h4 id="reception-sequence" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#reception-sequence" aria-label="reception sequence permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reception sequence</h4><ol><li>Place GPIO in high impedence input mode with a PullUp.</li><li>Enable GPIO edge interrupts, UART break interrupts, or spin wait until the line goes low.</li><li>When the start pulse has finished, configure UART registers appropriately. It is better to wait until the start pulse is complete as in some cases UART hardware may incorrectly detect a data byte or trigger an error condition.</li><li>Receive data until the end pulse is detected.</li></ol><h4 id="error-detection" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#error-detection" aria-label="error detection permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error detection</h4><p>The image and table below captures key timings of Jacdac SWS.</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:800px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:86.49999999999999%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAC4jAAAuIwF4pT92AAAD+UlEQVQ4y21U7U+bVRQ/7eqqrNPMl5nNmcyXjEQ/+WWRbdGY8XFq/AOMfhATdSxxW6ZmgQTj+1whaSmdjkJLW6Dtur5A7TtSCk0rBTKgLS02LZt1Bm1LAQt9eY7nPjKjhpP8cs557j2/e+455z4AJDabjYfFYnnQbrf/arXaUDOg3taqTZX+a/aKRqOpGAyGbVpH2pcZGRlpIPAxuwqRACJCc3MzUGDQaDSiStVbH9QZ0eUIYE+PEoeHh+vhcASJyB2NRiGXy/Fxuwo7SS6XC6VSKajV6h6r1YrBYLAyFZri8oU/OCLhAoFAZWNjA91utzQUCsHk5OSeXQk/tbcAIECvqlekUChAqVS2ms1mHB8fr1IQl88XkK7KMb9cLqPP53uHvsNEcEIkP6cDxXn9P+Clw/YuOKoAMrlMKO28Cp2d0tP9/f1oMpk4IubC4TBS1hz5ODMzy/3gdJ3w+n3gsLqE3ed10H3hb1Kmmc/LvgMAX7wvF0i//B6+udp1ZGBAU6JaYldXF9fX14dUirpKpcJuuaz4Uevbj3Z8eBnm3kT46my3MKdEMLb9CNpLTmjZ9znAfjgCcBBgJPOZpMN85Vjb9cTR0dHROLv20NBQnZqBg4P6usFoRrdNkwpePH3cfR3F2fGM2PS19+BY76wk5VwVO3omGxRX+gRw4qUX79sp557jLa8dIn2/yWyJUCOQiGsEXo+MOtB2Qz2hePmxY7TnAYKYsPeeFsOTkjm8Afy4LC4svpXOphdTK8nA1p/liMvlLLFOU/c5Aq+Z73K68j9P/xRYXy9FNjc3IxubGxHqfHh7azu8vJKaNvmNJ3nCQr7wyS937+BSJoFMvD4v31kaCzZ3yLTFauX8Xg9mZ6KIHIf/l/SdNH5nuPYGu+qB5FKyPbOSwWAkWKa1msfj4dirICK+uzYiY5l6XC4u5HLWqtVqje3jOK5Wr9erZFdvxW7hucutZxjh/lQy1Z65ncHIXLjCTiNCZFdkmclkMmQNYrbb6cQpAjHyWREhEiFLtz6fmMf2b9teZYQPJZdS7elMGgOhwNZOhjXKsEZZ1egZ8poOqBFhbZcMmV2dnZ/Fsx9/cIav4fra+qXcbzlcvr3Mn+wf8/MZsQ47HA50kLZTLcd8PszOzuBuks1lUG3rf50njE5H30ukEnfn4nPzpbUSm8GEVquN6fX6uE6nY2B+3HrzZmwhMB7/fXU1USgU4sViMZbP52NrxbXEwtLCcp9F9QoIBAI2h4dZLdmj2ZmrpwlPsZnc+fYI4YUdW0JoIDxPeOJfe5j9DCOEUydP/eeH0djYKGBaJBI9LhQKjxKeJTzHNFummIebmppAIpEI78UcOszeBOz9CzFNDhkuZd7+AAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="An image depicting a Jacdac transmission with portions of the signal labelled, A-F." title="An image depicting a Jacdac transmission with portions of the signal labelled, A-F." src="/jacdac-ts/static/8c4f5c8d08d75967139606f66076445c/5a190/jacdac-proto-timings.png" srcSet="/jacdac-ts/static/8c4f5c8d08d75967139606f66076445c/772e8/jacdac-proto-timings.png 200w,/jacdac-ts/static/8c4f5c8d08d75967139606f66076445c/e17e5/jacdac-proto-timings.png 400w,/jacdac-ts/static/8c4f5c8d08d75967139606f66076445c/5a190/jacdac-proto-timings.png 800w,/jacdac-ts/static/8c4f5c8d08d75967139606f66076445c/f3a19/jacdac-proto-timings.png 1086w" sizes="(max-width: 800px) 100vw, 800px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
    </span></p><div class="MuiBox-root-15 jss225"><div class="MuiPaper-root-28 MuiTableContainer-root-200 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div class="MuiBox-root-15 jss226"><table class="MuiTable-root-202"><thead class="MuiTableHead-root-204"><tr class="MuiTableRow-root-205 MuiTableRow-head-207"><th>Identifier</th><th>Name</th><th>Duration min/max (us)</th></tr></thead><tbody class="MuiTableBody-root-209"><tr class="MuiTableRow-root-205"><td>A</td><td>Start pulse</td><td>11/15</td></tr><tr class="MuiTableRow-root-205"><td>B</td><td>Start-data gap</td><td>40/89</td></tr><tr class="MuiTableRow-root-205"><td>C</td><td>Data-byte gap</td><td>0/80</td></tr><tr class="MuiTableRow-root-205"><td>D</td><td>Data-end gap</td><td>0/80</td></tr><tr class="MuiTableRow-root-205"><td>E</td><td>End pulse</td><td>11/15</td></tr><tr class="MuiTableRow-root-205"><td>F</td><td>Frame-to-frame gap</td><td>100/</td></tr></tbody></table></div></div></div><p>The state machine below encapsulates how these timings should be used during frame reception:</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:800px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:70%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAC4jAAAuIwF4pT92AAADWElEQVQ4y01UWUiUURQ+v0umNqVJPojbQ5gUKkZIDwa9jIIIIj2VvgSpGCI4qCOGCoIrIqnghpqiIyiiqOO+4r7v67jvuyAi+pJ/37k20YXDf+es3/nuOUOyLNPS0pKQlZUV2t3dpZGREbq5uZHu7++pvb3dHbqztbW1eiIy8vHxkXJycmhhYYE2Nzfp5OSEDg4O6OzsjMThhKurq0IQ9OL4+Pjt1NSUS0hIyFO2jY2N/bi8vJSPjo7ksLCw16xLSkqyhr/7/v7+m9PTUyNOCp+HhLe3t9TX12fQ29tLQ0ND/gMDA72QwsbGRvPKykrC99n6+nqOTqf7yiiAmObn59/Bt3F4eFiDAhZ3d3d0eHj4kBDOpD92dnaPua2MjAxGLjGara0t8/z8fE+tVuum1/Hp7+8nMzMzU6A11MfX1NQ8tFxfX0+1tbXizuLq6io45WI7Ozsug4ODmvHx8Z/g1SQyMlJCoKHeV19gcXFRgr8kFFlZWZSWlmZaV1en7OrqMvrrYIlkpqCDOjo63NC6dXV1NcFOTE9VVRW1trY6tLS0eHCOq6srmp2dJcrNzTVgBV72F9qTgSQD7TmCn9nJycmA5uZmHzyAjAfTJSYm2qBAAGyf09PTX0K/wbaGhoYvSO68vLz8njw9PY2ZNwRr9/b25JmZmUr8lgoKCmy4EBy/Yzw44UVUVJR9UVGRY1lZmX1ERIQzWrxmW3d397eSkpIP8PUTLSOYmpqarFE5GGIJB0pJSSHwJewbGxv+aMcd6Km4uJjKy8vZnwDCA/pP7HN+fi6oEAEwSjycfAdsio6Opvj4ePEFMsIMEsaG2trapNTUVPLy8vo3w/pHmZubM8BIGRBX1Z/Q0FDLhIQECxiN2TEwMJAKCwvp4uJCbAP00v+J1Gq1AjP5yMrKSsSDSxIvExcXRxUVFTQxMZE2Ojo6g+1I8fb2pqCgIEZpitVTA6EftoiSk5N5Bh3QXlBPT08w7h/BHXV2dhLGi4inXKFQiIRYnycg+nlmZqaVr6+vOaOYnp5WbW9vy5DfKpXqFSNRKpWK8PBwC3Bplp2dbYIHIhbml66vr8nW1pZKS0sJeym40mg0hG0xYu7Am5IT4o9jwsnJyVzPWUxMDPFq5uXliXtsbKzI8Qcau2db2BD9fwAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="An image depicting the state machine to be used when receiving a Jacdac packet. Whenever any timing is exceeded, the device should wait for the frame-to-frame gap to elapse before listening for another packet." title="An image depicting the state machine to be used when receiving a Jacdac packet. Whenever any timing is exceeded, the device should wait for the frame-to-frame gap to elapse before listening for another packet." src="/jacdac-ts/static/2ad7137a8d7bb550470c6092f4884e71/5a190/jacdac-state-diagram.png" srcSet="/jacdac-ts/static/2ad7137a8d7bb550470c6092f4884e71/772e8/jacdac-state-diagram.png 200w,/jacdac-ts/static/2ad7137a8d7bb550470c6092f4884e71/e17e5/jacdac-state-diagram.png 400w,/jacdac-ts/static/2ad7137a8d7bb550470c6092f4884e71/5a190/jacdac-state-diagram.png 800w,/jacdac-ts/static/2ad7137a8d7bb550470c6092f4884e71/c1b63/jacdac-state-diagram.png 1200w,/jacdac-ts/static/2ad7137a8d7bb550470c6092f4884e71/29007/jacdac-state-diagram.png 1600w,/jacdac-ts/static/2ad7137a8d7bb550470c6092f4884e71/09262/jacdac-state-diagram.png 1896w" sizes="(max-width: 800px) 100vw, 800px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
    </span></p><h4 id="frames" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#frames" aria-label="frames permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Frames</h4><p>Jacdac devices communicate over the Jacdac bus via frames. A frame
contains a device identifier and one or more packets and has the following structure:</p><div class="MuiBox-root-15 jss227"><div class="MuiPaper-root-28 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div><pre class="prism-code language-c" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">_jd_frame_t</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint16_t frame_crc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint8_t frame_size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint8_t frame_flags</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint64_t device_identifier</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint8_t data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">240</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// maximum</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">__attribute__</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">__packed__</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">aligned</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">_jd_frame_t</span><span class="token plain"> jd_frame_t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div></pre></div></div></div><p>On the wire, the frame must be transmitted in little endian format (i.e. low byte of <code>frame_crc</code> first). The total maximum frame size is 252 bytes, selected to keep the total size of packet under <code>255</code> (the DMA limit on some hardware) and aligned to 4. The following table defines the meaning and size of the fields in the structure above.</p><div class="MuiBox-root-15 jss228"><div class="MuiPaper-root-28 MuiTableContainer-root-200 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div class="MuiBox-root-15 jss229"><table class="MuiTable-root-202"><thead class="MuiTableHead-root-204"><tr class="MuiTableRow-root-205 MuiTableRow-head-207"><th>Memory offset</th><th>Field size (bytes)</th><th>Field name</th><th>Description</th></tr></thead><tbody class="MuiTableBody-root-209"><tr class="MuiTableRow-root-205"><td>0</td><td>2</td><td><code>frame_crc</code></td><td><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 MuiTypography-colorTextPrimary-130" href="https://en.wikipedia.org/wiki/Cyclic_redundancy_check" target="_blank" rel="nofollow noopener noreferrer">16-bit CRC CCITT</a> of all following fields.</td></tr><tr class="MuiTableRow-root-205"><td>2</td><td>1</td><td><code>frame_size</code></td><td>Size of the data field.</td></tr><tr class="MuiTableRow-root-205"><td>3</td><td>1</td><td><code>frame_flags</code></td><td>Flags specific to this frame.</td></tr><tr class="MuiTableRow-root-205"><td>4</td><td>8</td><td><code>device_identifier</code></td><td>64-bit device identifier.</td></tr><tr class="MuiTableRow-root-205"><td>12</td><td>1 * <code>frame_size </code></td><td><code>data</code></td><td>The data payload of the frame.</td></tr></tbody></table></div></div></div><h3 id="frame-flags" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#frame-flags" aria-label="frame flags permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Frame flags</h3><p>The <code>frame_flags</code> field is used to indicate</p><div class="MuiBox-root-15 jss230"><div class="MuiPaper-root-28 MuiTableContainer-root-200 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div class="MuiBox-root-15 jss231"><table class="MuiTable-root-202"><thead class="MuiTableHead-root-204"><tr class="MuiTableRow-root-205 MuiTableRow-head-207"><th>Bit position</th><th>Bit name</th><th>Description</th></tr></thead><tbody class="MuiTableBody-root-209"><tr class="MuiTableRow-root-205"><td>0</td><td>COMMAND</td><td>If set, the frame contains command packets, if not set, the frame contains report packets.</td></tr><tr class="MuiTableRow-root-205"><td>1</td><td>ACK_REQUESTED</td><td>If set, the receiver should respond to sender with an ACK frame, if not set, no response is required.</td></tr><tr class="MuiTableRow-root-205"><td>2</td><td>DEVICE_ID_ALT_MEANING</td><td></td></tr><tr class="MuiTableRow-root-205"><td>3-7</td><td>RESERVED</td><td>Reserved for future use.</td></tr></tbody></table></div></div></div><h3 id="packets" style="position:relative"><a class="MuiTypography-root-105 MuiLink-root-191 MuiLink-underlineHover-193 anchor before MuiTypography-colorTextPrimary-130" href="#packets" aria-label="packets permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Packets</h3><p>The data portion of a Jacdac frame is also structured and is internally divided into one or more packets. <strong>Zero length frames are not supported</strong>.</p><p>Each packet has the following layout in memory:</p><div class="MuiBox-root-15 jss232"><div class="MuiPaper-root-28 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div><pre class="prism-code language-c" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">_jd_packet_t</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint8_t service_size</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint8_t service_index</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint16_t service_command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    uint8_t payload</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">236</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">__attribute__</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">__packed__</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">aligned</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(78, 201, 176)">_jd_packet_t</span><span class="token plain"> jd_packet_t</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span></div></pre></div></div></div><p>The following table defines the meaning and size of the fields in the structure above. The meaning of these fields will become clearer later on in this document.</p><div class="MuiBox-root-15 jss233"><div class="MuiPaper-root-28 MuiTableContainer-root-200 MuiPaper-elevation1-32 MuiPaper-rounded-29"><div class="MuiBox-root-15 jss234"><table class="MuiTable-root-202"><thead class="MuiTableHead-root-204"><tr class="MuiTableRow-root-205 MuiTableRow-head-207"><th>Memory offset</th><th>Field size (bytes)</th><th>Field name</th><th>Description</th></tr></thead><tbody class="MuiTableBody-root-209"><tr class="MuiTableRow-root-205"><td>12</td><td>1</td><td><code>service_size</code></td><td>The size of the payload field. Maximum size is 236 bytes.</td></tr><tr class="MuiTableRow-root-205"><td>13</td><td>1</td><td><code>service_index</code></td><td>The instance number of the destination service.</td></tr><tr class="MuiTableRow-root-205"><td>14</td><td>2</td><td><code>service_command</code></td><td>A number that specifies an operation and code combination.</td></tr><tr class="MuiTableRow-root-205"><td>16</td><td>1 * <code>service_size</code></td><td><code>payload</code></td><td>The packet data payload destined for a particular service.</td></tr></tbody></table></div></div></div><p>Packets are placed back-to-back inside the frame <code>data</code> field and must be padded so they start at a 4 byte boundary (i.e. <code>service_size</code> is divisible by 4). Logically, packets placed in the same frame share the same frame fields and thus the same <code>device_identifier</code>. This means that only one device can be addressed in a single frame.</p></div></span></main><footer role="contentinfo" class="jss235"><a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/jacdac-ts/tree/v1.7.14">Jacdac-TS v<!-- -->1.7.14</a><a href="https://makecode.com/privacy" target="_blank" rel="noopener noreferrer">Privacy &amp; Cookies</a><a href="https://makecode.com/termsofuse" target="_blank" rel="noopener noreferrer">Terms Of Use</a><a href="https://makecode.com/trademarks" target="_blank" rel="noopener noreferrer">Trademarks</a><span class="MuiTypography-root-105">© <!-- -->2021<!-- --> Microsoft Corporation</span></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/reference/protocol/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-541f5afd2cddfffa2584.js"],"app":["/app-706c7f5c68740b83cd63.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-5988c10b84eb88d59ae8.js"],"component---src-components-spec-tsx":["/component---src-components-spec-tsx-8cccf5b8eadb242f30bf.js"],"component---src-pages-404-mdx":["/component---src-pages-404-mdx-562c68962f0375f7cd65.js"],"component---src-pages-clients-hardware-makecode-mdx":["/component---src-pages-clients-hardware-makecode-mdx-ca840287f956bb08accb.js"],"component---src-pages-clients-mdx":["/component---src-pages-clients-mdx-a8e2087f0f17f8ea08c2.js"],"component---src-pages-clients-web-iframe-mdx":["/component---src-pages-clients-web-iframe-mdx-9d998ee5f1cc8faeaf68.js"],"component---src-pages-clients-web-jdom-bus-mdx":["/component---src-pages-clients-web-jdom-bus-mdx-c83cf0d1668f2e5e3039.js"],"component---src-pages-clients-web-jdom-device-mdx":["/component---src-pages-clients-web-jdom-device-mdx-4d50d3d488122a67ce76.js"],"component---src-pages-clients-web-jdom-event-mdx":["/component---src-pages-clients-web-jdom-event-mdx-dedba5046f16d46187d6.js"],"component---src-pages-clients-web-jdom-field-mdx":["/component---src-pages-clients-web-jdom-field-mdx-75c5696ab82645e82206.js"],"component---src-pages-clients-web-jdom-mdx":["/component---src-pages-clients-web-jdom-mdx-7325a65920028c1512f9.js"],"component---src-pages-clients-web-jdom-node-mdx":["/component---src-pages-clients-web-jdom-node-mdx-4296d891984d63f687bf.js"],"component---src-pages-clients-web-jdom-register-mdx":["/component---src-pages-clients-web-jdom-register-mdx-bdb51ca8496f9402b972.js"],"component---src-pages-clients-web-jdom-service-mdx":["/component---src-pages-clients-web-jdom-service-mdx-9ea0fc1e0f5adc65c0ff.js"],"component---src-pages-clients-web-mdx":["/component---src-pages-clients-web-mdx-40f9a6d7c7b8a9644890.js"],"component---src-pages-clients-web-react-mdx":["/component---src-pages-clients-web-react-mdx-d6c422821f704fe30527.js"],"component---src-pages-clients-web-setup-mdx":["/component---src-pages-clients-web-setup-mdx-304889e5b9a5e83a3a24.js"],"component---src-pages-dashboard-mdx":["/component---src-pages-dashboard-mdx-892e90ff24f27b1d8efa.js"],"component---src-pages-devices-mdx":["/component---src-pages-devices-mdx-f0583fd48570277d8d70.js"],"component---src-pages-dtmi-mdx":["/component---src-pages-dtmi-mdx-6ebc17d2a804a0a4888c.js"],"component---src-pages-github-mdx":["/component---src-pages-github-mdx-33088e8259dcda88a643.js"],"component---src-pages-index-mdx":["/component---src-pages-index-mdx-5df925dc41d0457fa66f.js"],"component---src-pages-services-mdx":["/component---src-pages-services-mdx-9334fbae8d4156bd795e.js"],"component---src-pages-tools-azure-device-twin-designer-mdx":["/component---src-pages-tools-azure-device-twin-designer-mdx-e61bc64a38e329c3c656.js"],"component---src-pages-tools-azure-iot-hub-mdx":["/component---src-pages-tools-azure-iot-hub-mdx-8b5fd2918ddc2b00051b.js"],"component---src-pages-tools-collector-mdx":["/component---src-pages-tools-collector-mdx-cb187c3b2de17f5d2a06.js"],"component---src-pages-tools-device-designer-mdx":["/component---src-pages-tools-device-designer-mdx-b3ea9c4addccbcb61ce2.js"],"component---src-pages-tools-edge-impulse-mdx":["/component---src-pages-tools-edge-impulse-mdx-fb959a17012ecb02220f.js"],"component---src-pages-tools-jupyterlab-mdx":["/component---src-pages-tools-jupyterlab-mdx-6491dca47faac4c17188.js"],"component---src-pages-tools-led-animation-designer-mdx":["/component---src-pages-tools-led-animation-designer-mdx-3905bcce05d810985b79.js"],"component---src-pages-tools-makecode-editor-extension-mdx":["/component---src-pages-tools-makecode-editor-extension-mdx-2366c8007ccd44e82758.js"],"component---src-pages-tools-makecode-mdx":["/component---src-pages-tools-makecode-mdx-2c606c16f440cb333d77.js"],"component---src-pages-tools-makecode-sim-mdx":["/component---src-pages-tools-makecode-sim-mdx-553ccbbd5171bf0468af.js"],"component---src-pages-tools-mdx":["/component---src-pages-tools-mdx-8575eb656e6716538bd6.js"],"component---src-pages-tools-model-uploader-mdx":["/component---src-pages-tools-model-uploader-mdx-4c4521c40839ac37c2d8.js"],"component---src-pages-tools-packet-inspector-mdx":["/component---src-pages-tools-packet-inspector-mdx-b19a7c49dfbe417a50f9.js"],"component---src-pages-tools-player-mdx":["/component---src-pages-tools-player-mdx-4e6b0493589eb4836c38.js"],"component---src-pages-tools-prototest-mdx":["/component---src-pages-tools-prototest-mdx-48ec82d91770fbfdc16a.js"],"component---src-pages-tools-role-manager-mdx":["/component---src-pages-tools-role-manager-mdx-8351bce2678135dc059b.js"],"component---src-pages-tools-service-editor-mdx":["/component---src-pages-tools-service-editor-mdx-e0082df9f8a9ab97e44b.js"],"component---src-pages-tools-settings-manager-mdx":["/component---src-pages-tools-settings-manager-mdx-e3081b3af545d69c1106.js"],"component---src-pages-tools-updater-mdx":["/component---src-pages-tools-updater-mdx-9e163720275b4643efdc.js"],"component---src-pages-traces-mdx":["/component---src-pages-traces-mdx-ca6a2ccc7336123d3b75.js"],"component---src-templates-device-company-mdx":["/component---src-templates-device-company-mdx-3516ea2f100d99f7d5f3.js"],"component---src-templates-device-mdx":["/component---src-templates-device-mdx-a5a1c2c11ff0889ec907.js"],"component---src-templates-service-mdx":["/component---src-templates-service-mdx-e2b928312eb7689269ee.js"],"component---src-templates-service-playground-mdx":["/component---src-templates-service-playground-mdx-9561d238f7a0d6b4925c.js"],"component---src-templates-service-test-mdx":["/component---src-templates-service-test-mdx-1a9b5cb96a8122356209.js"]};/*]]>*/</script><script src="/jacdac-ts/polyfill-541f5afd2cddfffa2584.js" nomodule=""></script><script src="/jacdac-ts/component---src-components-spec-tsx-8cccf5b8eadb242f30bf.js" async=""></script><script src="/jacdac-ts/app-706c7f5c68740b83cd63.js" async=""></script><script src="/jacdac-ts/styles-c212ca3684de16c6f115.js" async=""></script><script src="/jacdac-ts/framework-f19c6c9d119c831d5054.js" async=""></script><script src="/jacdac-ts/webpack-runtime-dd1ba690492ad7dd1561.js" async=""></script></body></html>