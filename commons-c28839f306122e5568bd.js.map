{"version":3,"sources":["webpack:///./node_modules/core-js/modules/_typed-array.js","webpack:///./node_modules/core-js/modules/_typed-buffer.js","webpack:///../src/dom/hf2.ts","webpack:///../src/dom/packet.ts","webpack:///../src/dom/node.ts","webpack:///../src/dom/eventemitter.ts","webpack:///../src/dom/register.ts","webpack:///../src/dom/service.ts","webpack:///../src/dom/device.ts","webpack:///../src/dom/bus.ts","webpack:///./src/jacdac/Provider.tsx","webpack:///../src/dom/usb.ts","webpack:///./src/components/header.js","webpack:///./src/components/layout.tsx","webpack:///./node_modules/core-js/modules/es6.math.imul.js","webpack:///./node_modules/core-js/modules/_to-index.js","webpack:///./node_modules/core-js/modules/_typed.js","webpack:///./node_modules/core-js/modules/es6.reflect.construct.js","webpack:///../src/dom/struct.ts","webpack:///../src/dom/utils.ts","webpack:///./node_modules/core-js/modules/es6.typed.uint8-array.js","webpack:///./node_modules/@material-ui/core/esm/utils/capitalize.js","webpack:///./node_modules/core-js/modules/_array-fill.js","webpack:///../src/dom/constants.ts","webpack:///./node_modules/core-js/modules/es6.typed.float64-array.js","webpack:///./node_modules/core-js/modules/es6.typed.float32-array.js","webpack:///../src/dom/buffer.ts","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./node_modules/@material-ui/core/esm/Typography/Typography.js","webpack:///../src/dom/pretty.ts","webpack:///./node_modules/core-js/modules/_array-copy-within.js","webpack:///../node_modules/regenerator-runtime/runtime.js","webpack:///./src/jacdac/Context.tsx"],"names":["LIBRARY","global","fails","$export","$typed","$buffer","ctx","anInstance","propertyDesc","hide","redefineAll","toInteger","toLength","toIndex","toAbsoluteIndex","toPrimitive","has","classof","isObject","toObject","isArrayIter","create","getPrototypeOf","gOPN","f","getIterFn","uid","wks","createArrayMethod","createArrayIncludes","speciesConstructor","ArrayIterators","Iterators","$iterDetect","setSpecies","arrayFill","arrayCopyWithin","$DP","$GOPD","dP","gOPD","RangeError","TypeError","Uint8Array","ArrayProto","Array","$ArrayBuffer","ArrayBuffer","$DataView","DataView","arrayForEach","arrayFilter","arraySome","arrayEvery","arrayFind","arrayFindIndex","arrayIncludes","arrayIndexOf","arrayValues","values","arrayKeys","keys","arrayEntries","entries","arrayLastIndexOf","lastIndexOf","arrayReduce","reduce","arrayReduceRight","reduceRight","arrayJoin","join","arraySort","sort","arraySlice","slice","arrayToString","toString","arrayToLocaleString","toLocaleString","ITERATOR","TAG","TYPED_CONSTRUCTOR","DEF_CONSTRUCTOR","ALL_CONSTRUCTORS","CONSTR","TYPED_ARRAY","TYPED","VIEW","$map","O","length","allocate","LITTLE_ENDIAN","Uint16Array","buffer","FORCED_SET","set","toOffset","it","BYTES","offset","validate","C","speciesFromList","list","fromList","index","result","addGetter","key","internal","get","this","_d","$from","source","i","step","iterator","aLen","arguments","mapfn","undefined","mapping","iterFn","call","next","done","push","value","$of","TO_LOCALE_BUG","$toLocaleString","apply","proto","copyWithin","target","start","every","callbackfn","fill","filter","find","predicate","findIndex","forEach","indexOf","searchElement","includes","separator","map","reverse","middle","Math","floor","some","comparefn","subarray","begin","end","$begin","byteOffset","BYTES_PER_ELEMENT","$slice","$set","arrayLike","src","len","$iterators","isTAIndex","String","$getDesc","$setDesc","desc","configurable","writable","enumerable","S","F","getOwnPropertyDescriptor","defineProperty","$TypedArrayPrototype$","constructor","module","exports","KEY","wrapper","CLAMPED","NAME","GETTER","SETTER","TypedArray","Base","TAC","FORCED","ABV","TypedArrayPrototype","addElement","that","data","v","o","getter","round","setter","$offset","$length","byteLength","klass","$len","b","l","e","iter","Function","prototype","concat","$nativeIterator","CORRECT_ITER_NAME","name","$iterator","G","W","of","from","P","DESCRIPTORS","setToStringTag","Infinity","BaseBuffer","abs","pow","log","LN2","$BUFFER","$LENGTH","$OFFSET","packIEEE754","mLen","nBytes","m","c","eLen","eMax","eBias","rt","s","unpackIEEE754","nBits","NaN","unpackI32","bytes","packI8","packI16","packI32","packF64","packF32","view","isLittleEndian","intIndex","store","_b","pack","conversion","ArrayBufferProto","j","$setInt8","setInt8","getInt8","setUint8","bufferLength","getUint8","getInt16","getUint16","getInt32","getUint32","getFloat32","getFloat64","setInt16","setUint16","setInt32","setUint32","setFloat32","setFloat64","Transport","requestDevice","readLoopStarted","ready","onData","onError","console","error","stack","msg","clearDev","dev","epIn","epOut","disconnectAsync","close","catch","then","U","Promise","resolve","recvPacketAsync","final","res","status","arr","transferIn","endpointNumber","controlTransferIn","requestType","recipient","request","iface","interfaceNumber","reject","Error","productName","readLoop","buf","sendPacketAsync","pkt","transferOut","controlTransferOut","init","a","filters","classCode","subclassCode","altIface","manufacturerName","configuration","interfaces","alt","alternates","interfaceClass","interfaceSubclass","open","selectConfiguration","endpoints","direction","packetSize","claimInterface","Proto","io","eventHandlers","msgs","cmdSeq","random","lock","frames","tp","frame","onSerial","total","r","ptr","handleEvent","talkAsync","cmd","seq","numSkipped","handleReturnAsync","shiftAsync","info","enqueue","sendMsgAsync","serial","loop","pos","onEvent","id","onJDMessage","sendJDMessageAsync","evid","iserr","Packet","fromBinary","p","_header","JD_SERIAL_HEADER_SIZE","_data","service_command","onlyHeader","toBuffer","bufferConcat","compress","stripped","sz","withFrameStripped","getNumber","fmt","device_identifier","service_number","frame_flags","size","toHex","sendCoreAsync","bus","write16","crc","sendReportAsync","deviceId","sendCmdAsync","JD_FRAME_FLAG_COMMAND","sendAsMultiCommandAsync","service_class","JD_FRAME_FLAG_IDENTIFIER_IS_SERVICE_CLASS","write32","fromFrame","timestamp","warn","computed","actual","read16","psz","ALIGN","frameToPackets","packed","nums","idb","fromHex","read32","JD_FRAME_FLAG_ACK_REQUESTED","ack","requires_ack","JD_SERVICE_NUMBER_MASK","JD_SERVICE_NUMBER_INV_MASK","serviceClassAt","CMD_SET_REG","JD_SERIAL_MAX_PAYLOAD_SIZE","NumberFormat","Int8LE","Int16LE","Int32LE","is_command","Node","listeners","on","eventName","handler","addListenerInternal","off","removeListener","once","addListener","listener","emit","NEW_LISTENER","splice","REMOVE_LISTENER","args","ERROR","listenerCount","eventNames","Object","Register","service","address","sendSetAsync","sendSetIntAsync","bufferOfInt","processReport","updated","bufferEq","lastData","REPORT_RECEIVE","REPORT_UPDATE","device","intOfBuffer","Service","registerAt","_registers","register","options","PACKET_SEND","processPacket","PACKET_RECEIVE","is_report","CMD_REG_MASK","reg","serviceName","serviceClass","Device","connected","shortId","hasService","announced","servicesData","UInt32LE","idx","initServices","assert","_services","n","serviceLength","services","serviceNumber","sc","sendCtrlCommand","payload","JD_SERVICE_NUMBER_CTRL","processAnnouncement","w0","w1","JD_ADVERTISEMENT_0_COUNTER_MASK","DEVICE_RESTART","RESTART","servData","lastServiceUpdate","DEVICE_ANNOUNCE","ANNOUNCE","disconnect","DISCONNECT","lookupName","devid","h","_shortId","hash","fromCharCode","idiv","Bus","_connected","_devices","_deviceNames","_minConsolePriority","ConsolePriority","Log","resetTime","pingLoggers","node","exec","groups","parseInt","_startTime","Date","now","Silent","CMD_CONSOLE_SET_MIN_PRIORITY","SRV_LOGGER","errorHandler","context","exception","connectAsync","_connectPromise","CONNECTING","connectAsyncPromise","CONNECT","_gcInterval","clearInterval","devices","d","DEVICE_CONNECT","setInterval","gcDevices","cutoff","lastSeen","DEVICE_DISCONNECT","PACKET_PROCESS","isAnnounce","multicommand_class","CMD_ADVERTISEMENT_DATA","PACKET_REPORT","CMD_EVENT","PACKET_EVENT","priority","JacdacProvider","children","useState","hf2","navigator","usb","transport","err","createUSBBus","setConnected","connecting","setConnecting","Provider","Header","siteTitle","style","background","marginBottom","margin","maxWidth","padding","to","color","textDecoration","Layout","Typography","site","siteMetadata","title","getFullYear","$imul","imul","x","y","xn","yn","xl","yl","number","Typed","TypedArrayConstructors","split","aFunction","anObject","bind","rConstruct","Reflect","construct","NEW_TARGET_BUG","ARGS_BUG","Target","newTarget","$args","instance","format","packUnpackCore","packedSize","unpack","getFormat","pychar","isBig","UInt8LE","UInt16BE","UInt16LE","Int16BE","UInt32BE","Int32BE","Float32BE","Float32LE","Float64BE","Float64LE","isPack","ch","code","i0","charCodeAt","reps","setNumber","sizeOfNumberFormat","delay","millis","setTimeout","memcpy","trg","trgOff","srcOff","bits","fnv1","PromiseBuffer","waiting","available","drain","pushError","shift","timeout","PromiseQueue","promises","cleanup","hex","encodeU32LE","words","bufferToString","binstr","escaped","k","charAt","decodeURIComponent","fromUTF8","input","uint8ArrayToString","cond","debouncedPollAsync","pollDelay","interval","debounced","timeOutId","clearTimeout","debounceAsync","poll","execute","stop","capitalize","string","toUpperCase","endPos","REG_IS_STREAMING","REG_LOW_THRESHOLD","REG_READING","CMD_GET_REG","CMD_TOP_MASK","CMD_CALIBRATE","STREAM_PORT_SHIFT","STREAM_COUNTER_MASK","STREAM_CLOSE_MASK","STREAM_METADATA_MASK","JD_SERVICE_NUMBER_CRC_ACK","JD_SERVICE_NUMBER_STREAM","SRV_BATTERY","SRV_ACCELEROMETER","SRV_BUTTON","SRV_TOUCHBUTTON","SRV_LIGHT_SENSOR","SRV_MICROPHONE","SRV_THERMOMETER","SRV_SWITCH","SRV_PIXEL","SRV_HAPTIC","SRV_LIGHT","SRV_KEYBOARD","SRV_MOUSE","SRV_GAMEPAD","SRV_MUSIC","SRV_SERVO","SRV_CONTROLLER","SRV_LCD","SRV_MESSAGE_BUS","SRV_COLOR_SENSOR","SRV_LIGHT_SPECTRUM_SENSOR","SRV_PROXIMITY","SRV_TOUCH_BUTTONS","SRV_SERVOS","SRV_ROTARY_ENCODER","SRV_DNS","SRV_PWM_LIGHT","SRV_BOOTLOADER","SRV_ARCADE_CONTROLS","SRV_POWER","SRV_SLIDER","SRV_MOTOR","SRV_TCP","SRV_WIFI","fmtInfo","Int8BE","UInt8BE","fmtInfoCore","signed","swap","isFloat","inf","Float32Array","Float64Array","runtime","Op","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","state","method","arg","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","makeInvokeMethod","fn","obj","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","object","pop","skipTempReset","prev","rootRecord","rval","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","defaultVariantMapping","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","props","ref","_props$align","align","classes","className","_props$color","component","_props$display","display","_props$gutterBottom","gutterBottom","_props$noWrap","noWrap","_props$paragraph","paragraph","_props$variant","variant","_props$variantMapping","variantMapping","other","Component","root","theme","typography","caption","button","overline","srOnly","position","height","width","overflow","alignLeft","textAlign","alignCenter","alignRight","alignJustify","textOverflow","whiteSpace","colorInherit","colorPrimary","palette","primary","main","colorSecondary","secondary","colorTextPrimary","text","colorTextSecondary","colorError","displayInline","displayBlock","service_classes","CTRL","LOGGER","jd","BATTERY","ACCELEROMETER","BUTTON","TOUCHBUTTON","LIGHT_SENSOR","MICROPHONE","THERMOMETER","SWITCH","PIXEL","HAPTIC","LIGHT","KEYBOARD","MOUSE","GAMEPAD","MUSIC","SERVO","CONTROLLER","LCD","MESSAGE_BUS","COLOR_SENSOR","LIGHT_SPECTRUM_SENSOR","PROXIMITY","TOUCH_BUTTONS","SERVOS","ROTARY_ENCODER","DNS","PWM_LIGHT","BOOTLOADER","ARCADE_CONTROLS","POWER","SLIDER","MOTOR","TCP","WIFI","reverseLookup","count","min","inc","inModule","JacdacContext","createContext"],"mappings":"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","file":"commons-c28839f306122e5568bd.js","sourcesContent":["'use strict';\nif (require('./_descriptors')) {\n  var LIBRARY = require('./_library');\n  var global = require('./_global');\n  var fails = require('./_fails');\n  var $export = require('./_export');\n  var $typed = require('./_typed');\n  var $buffer = require('./_typed-buffer');\n  var ctx = require('./_ctx');\n  var anInstance = require('./_an-instance');\n  var propertyDesc = require('./_property-desc');\n  var hide = require('./_hide');\n  var redefineAll = require('./_redefine-all');\n  var toInteger = require('./_to-integer');\n  var toLength = require('./_to-length');\n  var toIndex = require('./_to-index');\n  var toAbsoluteIndex = require('./_to-absolute-index');\n  var toPrimitive = require('./_to-primitive');\n  var has = require('./_has');\n  var classof = require('./_classof');\n  var isObject = require('./_is-object');\n  var toObject = require('./_to-object');\n  var isArrayIter = require('./_is-array-iter');\n  var create = require('./_object-create');\n  var getPrototypeOf = require('./_object-gpo');\n  var gOPN = require('./_object-gopn').f;\n  var getIterFn = require('./core.get-iterator-method');\n  var uid = require('./_uid');\n  var wks = require('./_wks');\n  var createArrayMethod = require('./_array-methods');\n  var createArrayIncludes = require('./_array-includes');\n  var speciesConstructor = require('./_species-constructor');\n  var ArrayIterators = require('./es6.array.iterator');\n  var Iterators = require('./_iterators');\n  var $iterDetect = require('./_iter-detect');\n  var setSpecies = require('./_set-species');\n  var arrayFill = require('./_array-fill');\n  var arrayCopyWithin = require('./_array-copy-within');\n  var $DP = require('./_object-dp');\n  var $GOPD = require('./_object-gopd');\n  var dP = $DP.f;\n  var gOPD = $GOPD.f;\n  var RangeError = global.RangeError;\n  var TypeError = global.TypeError;\n  var Uint8Array = global.Uint8Array;\n  var ARRAY_BUFFER = 'ArrayBuffer';\n  var SHARED_BUFFER = 'Shared' + ARRAY_BUFFER;\n  var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';\n  var PROTOTYPE = 'prototype';\n  var ArrayProto = Array[PROTOTYPE];\n  var $ArrayBuffer = $buffer.ArrayBuffer;\n  var $DataView = $buffer.DataView;\n  var arrayForEach = createArrayMethod(0);\n  var arrayFilter = createArrayMethod(2);\n  var arraySome = createArrayMethod(3);\n  var arrayEvery = createArrayMethod(4);\n  var arrayFind = createArrayMethod(5);\n  var arrayFindIndex = createArrayMethod(6);\n  var arrayIncludes = createArrayIncludes(true);\n  var arrayIndexOf = createArrayIncludes(false);\n  var arrayValues = ArrayIterators.values;\n  var arrayKeys = ArrayIterators.keys;\n  var arrayEntries = ArrayIterators.entries;\n  var arrayLastIndexOf = ArrayProto.lastIndexOf;\n  var arrayReduce = ArrayProto.reduce;\n  var arrayReduceRight = ArrayProto.reduceRight;\n  var arrayJoin = ArrayProto.join;\n  var arraySort = ArrayProto.sort;\n  var arraySlice = ArrayProto.slice;\n  var arrayToString = ArrayProto.toString;\n  var arrayToLocaleString = ArrayProto.toLocaleString;\n  var ITERATOR = wks('iterator');\n  var TAG = wks('toStringTag');\n  var TYPED_CONSTRUCTOR = uid('typed_constructor');\n  var DEF_CONSTRUCTOR = uid('def_constructor');\n  var ALL_CONSTRUCTORS = $typed.CONSTR;\n  var TYPED_ARRAY = $typed.TYPED;\n  var VIEW = $typed.VIEW;\n  var WRONG_LENGTH = 'Wrong length!';\n\n  var $map = createArrayMethod(1, function (O, length) {\n    return allocate(speciesConstructor(O, O[DEF_CONSTRUCTOR]), length);\n  });\n\n  var LITTLE_ENDIAN = fails(function () {\n    // eslint-disable-next-line no-undef\n    return new Uint8Array(new Uint16Array([1]).buffer)[0] === 1;\n  });\n\n  var FORCED_SET = !!Uint8Array && !!Uint8Array[PROTOTYPE].set && fails(function () {\n    new Uint8Array(1).set({});\n  });\n\n  var toOffset = function (it, BYTES) {\n    var offset = toInteger(it);\n    if (offset < 0 || offset % BYTES) throw RangeError('Wrong offset!');\n    return offset;\n  };\n\n  var validate = function (it) {\n    if (isObject(it) && TYPED_ARRAY in it) return it;\n    throw TypeError(it + ' is not a typed array!');\n  };\n\n  var allocate = function (C, length) {\n    if (!(isObject(C) && TYPED_CONSTRUCTOR in C)) {\n      throw TypeError('It is not a typed array constructor!');\n    } return new C(length);\n  };\n\n  var speciesFromList = function (O, list) {\n    return fromList(speciesConstructor(O, O[DEF_CONSTRUCTOR]), list);\n  };\n\n  var fromList = function (C, list) {\n    var index = 0;\n    var length = list.length;\n    var result = allocate(C, length);\n    while (length > index) result[index] = list[index++];\n    return result;\n  };\n\n  var addGetter = function (it, key, internal) {\n    dP(it, key, { get: function () { return this._d[internal]; } });\n  };\n\n  var $from = function from(source /* , mapfn, thisArg */) {\n    var O = toObject(source);\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var iterFn = getIterFn(O);\n    var i, length, values, result, step, iterator;\n    if (iterFn != undefined && !isArrayIter(iterFn)) {\n      for (iterator = iterFn.call(O), values = [], i = 0; !(step = iterator.next()).done; i++) {\n        values.push(step.value);\n      } O = values;\n    }\n    if (mapping && aLen > 2) mapfn = ctx(mapfn, arguments[2], 2);\n    for (i = 0, length = toLength(O.length), result = allocate(this, length); length > i; i++) {\n      result[i] = mapping ? mapfn(O[i], i) : O[i];\n    }\n    return result;\n  };\n\n  var $of = function of(/* ...items */) {\n    var index = 0;\n    var length = arguments.length;\n    var result = allocate(this, length);\n    while (length > index) result[index] = arguments[index++];\n    return result;\n  };\n\n  // iOS Safari 6.x fails here\n  var TO_LOCALE_BUG = !!Uint8Array && fails(function () { arrayToLocaleString.call(new Uint8Array(1)); });\n\n  var $toLocaleString = function toLocaleString() {\n    return arrayToLocaleString.apply(TO_LOCALE_BUG ? arraySlice.call(validate(this)) : validate(this), arguments);\n  };\n\n  var proto = {\n    copyWithin: function copyWithin(target, start /* , end */) {\n      return arrayCopyWithin.call(validate(this), target, start, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    every: function every(callbackfn /* , thisArg */) {\n      return arrayEvery(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    fill: function fill(value /* , start, end */) { // eslint-disable-line no-unused-vars\n      return arrayFill.apply(validate(this), arguments);\n    },\n    filter: function filter(callbackfn /* , thisArg */) {\n      return speciesFromList(this, arrayFilter(validate(this), callbackfn,\n        arguments.length > 1 ? arguments[1] : undefined));\n    },\n    find: function find(predicate /* , thisArg */) {\n      return arrayFind(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    findIndex: function findIndex(predicate /* , thisArg */) {\n      return arrayFindIndex(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    forEach: function forEach(callbackfn /* , thisArg */) {\n      arrayForEach(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    indexOf: function indexOf(searchElement /* , fromIndex */) {\n      return arrayIndexOf(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    includes: function includes(searchElement /* , fromIndex */) {\n      return arrayIncludes(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    join: function join(separator) { // eslint-disable-line no-unused-vars\n      return arrayJoin.apply(validate(this), arguments);\n    },\n    lastIndexOf: function lastIndexOf(searchElement /* , fromIndex */) { // eslint-disable-line no-unused-vars\n      return arrayLastIndexOf.apply(validate(this), arguments);\n    },\n    map: function map(mapfn /* , thisArg */) {\n      return $map(validate(this), mapfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    reduce: function reduce(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduce.apply(validate(this), arguments);\n    },\n    reduceRight: function reduceRight(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduceRight.apply(validate(this), arguments);\n    },\n    reverse: function reverse() {\n      var that = this;\n      var length = validate(that).length;\n      var middle = Math.floor(length / 2);\n      var index = 0;\n      var value;\n      while (index < middle) {\n        value = that[index];\n        that[index++] = that[--length];\n        that[length] = value;\n      } return that;\n    },\n    some: function some(callbackfn /* , thisArg */) {\n      return arraySome(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    sort: function sort(comparefn) {\n      return arraySort.call(validate(this), comparefn);\n    },\n    subarray: function subarray(begin, end) {\n      var O = validate(this);\n      var length = O.length;\n      var $begin = toAbsoluteIndex(begin, length);\n      return new (speciesConstructor(O, O[DEF_CONSTRUCTOR]))(\n        O.buffer,\n        O.byteOffset + $begin * O.BYTES_PER_ELEMENT,\n        toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - $begin)\n      );\n    }\n  };\n\n  var $slice = function slice(start, end) {\n    return speciesFromList(this, arraySlice.call(validate(this), start, end));\n  };\n\n  var $set = function set(arrayLike /* , offset */) {\n    validate(this);\n    var offset = toOffset(arguments[1], 1);\n    var length = this.length;\n    var src = toObject(arrayLike);\n    var len = toLength(src.length);\n    var index = 0;\n    if (len + offset > length) throw RangeError(WRONG_LENGTH);\n    while (index < len) this[offset + index] = src[index++];\n  };\n\n  var $iterators = {\n    entries: function entries() {\n      return arrayEntries.call(validate(this));\n    },\n    keys: function keys() {\n      return arrayKeys.call(validate(this));\n    },\n    values: function values() {\n      return arrayValues.call(validate(this));\n    }\n  };\n\n  var isTAIndex = function (target, key) {\n    return isObject(target)\n      && target[TYPED_ARRAY]\n      && typeof key != 'symbol'\n      && key in target\n      && String(+key) == String(key);\n  };\n  var $getDesc = function getOwnPropertyDescriptor(target, key) {\n    return isTAIndex(target, key = toPrimitive(key, true))\n      ? propertyDesc(2, target[key])\n      : gOPD(target, key);\n  };\n  var $setDesc = function defineProperty(target, key, desc) {\n    if (isTAIndex(target, key = toPrimitive(key, true))\n      && isObject(desc)\n      && has(desc, 'value')\n      && !has(desc, 'get')\n      && !has(desc, 'set')\n      // TODO: add validation descriptor w/o calling accessors\n      && !desc.configurable\n      && (!has(desc, 'writable') || desc.writable)\n      && (!has(desc, 'enumerable') || desc.enumerable)\n    ) {\n      target[key] = desc.value;\n      return target;\n    } return dP(target, key, desc);\n  };\n\n  if (!ALL_CONSTRUCTORS) {\n    $GOPD.f = $getDesc;\n    $DP.f = $setDesc;\n  }\n\n  $export($export.S + $export.F * !ALL_CONSTRUCTORS, 'Object', {\n    getOwnPropertyDescriptor: $getDesc,\n    defineProperty: $setDesc\n  });\n\n  if (fails(function () { arrayToString.call({}); })) {\n    arrayToString = arrayToLocaleString = function toString() {\n      return arrayJoin.call(this);\n    };\n  }\n\n  var $TypedArrayPrototype$ = redefineAll({}, proto);\n  redefineAll($TypedArrayPrototype$, $iterators);\n  hide($TypedArrayPrototype$, ITERATOR, $iterators.values);\n  redefineAll($TypedArrayPrototype$, {\n    slice: $slice,\n    set: $set,\n    constructor: function () { /* noop */ },\n    toString: arrayToString,\n    toLocaleString: $toLocaleString\n  });\n  addGetter($TypedArrayPrototype$, 'buffer', 'b');\n  addGetter($TypedArrayPrototype$, 'byteOffset', 'o');\n  addGetter($TypedArrayPrototype$, 'byteLength', 'l');\n  addGetter($TypedArrayPrototype$, 'length', 'e');\n  dP($TypedArrayPrototype$, TAG, {\n    get: function () { return this[TYPED_ARRAY]; }\n  });\n\n  // eslint-disable-next-line max-statements\n  module.exports = function (KEY, BYTES, wrapper, CLAMPED) {\n    CLAMPED = !!CLAMPED;\n    var NAME = KEY + (CLAMPED ? 'Clamped' : '') + 'Array';\n    var GETTER = 'get' + KEY;\n    var SETTER = 'set' + KEY;\n    var TypedArray = global[NAME];\n    var Base = TypedArray || {};\n    var TAC = TypedArray && getPrototypeOf(TypedArray);\n    var FORCED = !TypedArray || !$typed.ABV;\n    var O = {};\n    var TypedArrayPrototype = TypedArray && TypedArray[PROTOTYPE];\n    var getter = function (that, index) {\n      var data = that._d;\n      return data.v[GETTER](index * BYTES + data.o, LITTLE_ENDIAN);\n    };\n    var setter = function (that, index, value) {\n      var data = that._d;\n      if (CLAMPED) value = (value = Math.round(value)) < 0 ? 0 : value > 0xff ? 0xff : value & 0xff;\n      data.v[SETTER](index * BYTES + data.o, value, LITTLE_ENDIAN);\n    };\n    var addElement = function (that, index) {\n      dP(that, index, {\n        get: function () {\n          return getter(this, index);\n        },\n        set: function (value) {\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n    if (FORCED) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME, '_d');\n        var index = 0;\n        var offset = 0;\n        var buffer, byteLength, length, klass;\n        if (!isObject(data)) {\n          length = toIndex(data);\n          byteLength = length * BYTES;\n          buffer = new $ArrayBuffer(byteLength);\n        } else if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          buffer = data;\n          offset = toOffset($offset, BYTES);\n          var $len = data.byteLength;\n          if ($length === undefined) {\n            if ($len % BYTES) throw RangeError(WRONG_LENGTH);\n            byteLength = $len - offset;\n            if (byteLength < 0) throw RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if (byteLength + offset > $len) throw RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if (TYPED_ARRAY in data) {\n          return fromList(TypedArray, data);\n        } else {\n          return $from.call(TypedArray, data);\n        }\n        hide(that, '_d', {\n          b: buffer,\n          o: offset,\n          l: byteLength,\n          e: length,\n          v: new $DataView(buffer)\n        });\n        while (index < length) addElement(that, index++);\n      });\n      TypedArrayPrototype = TypedArray[PROTOTYPE] = create($TypedArrayPrototype$);\n      hide(TypedArrayPrototype, 'constructor', TypedArray);\n    } else if (!fails(function () {\n      TypedArray(1);\n    }) || !fails(function () {\n      new TypedArray(-1); // eslint-disable-line no-new\n    }) || !$iterDetect(function (iter) {\n      new TypedArray(); // eslint-disable-line no-new\n      new TypedArray(null); // eslint-disable-line no-new\n      new TypedArray(1.5); // eslint-disable-line no-new\n      new TypedArray(iter); // eslint-disable-line no-new\n    }, true)) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME);\n        var klass;\n        // `ws` module bug, temporarily remove validation length for Uint8Array\n        // https://github.com/websockets/ws/pull/645\n        if (!isObject(data)) return new Base(toIndex(data));\n        if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          return $length !== undefined\n            ? new Base(data, toOffset($offset, BYTES), $length)\n            : $offset !== undefined\n              ? new Base(data, toOffset($offset, BYTES))\n              : new Base(data);\n        }\n        if (TYPED_ARRAY in data) return fromList(TypedArray, data);\n        return $from.call(TypedArray, data);\n      });\n      arrayForEach(TAC !== Function.prototype ? gOPN(Base).concat(gOPN(TAC)) : gOPN(Base), function (key) {\n        if (!(key in TypedArray)) hide(TypedArray, key, Base[key]);\n      });\n      TypedArray[PROTOTYPE] = TypedArrayPrototype;\n      if (!LIBRARY) TypedArrayPrototype.constructor = TypedArray;\n    }\n    var $nativeIterator = TypedArrayPrototype[ITERATOR];\n    var CORRECT_ITER_NAME = !!$nativeIterator\n      && ($nativeIterator.name == 'values' || $nativeIterator.name == undefined);\n    var $iterator = $iterators.values;\n    hide(TypedArray, TYPED_CONSTRUCTOR, true);\n    hide(TypedArrayPrototype, TYPED_ARRAY, NAME);\n    hide(TypedArrayPrototype, VIEW, true);\n    hide(TypedArrayPrototype, DEF_CONSTRUCTOR, TypedArray);\n\n    if (CLAMPED ? new TypedArray(1)[TAG] != NAME : !(TAG in TypedArrayPrototype)) {\n      dP(TypedArrayPrototype, TAG, {\n        get: function () { return NAME; }\n      });\n    }\n\n    O[NAME] = TypedArray;\n\n    $export($export.G + $export.W + $export.F * (TypedArray != Base), O);\n\n    $export($export.S, NAME, {\n      BYTES_PER_ELEMENT: BYTES\n    });\n\n    $export($export.S + $export.F * fails(function () { Base.of.call(TypedArray, 1); }), NAME, {\n      from: $from,\n      of: $of\n    });\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayPrototype)) hide(TypedArrayPrototype, BYTES_PER_ELEMENT, BYTES);\n\n    $export($export.P, NAME, proto);\n\n    setSpecies(NAME);\n\n    $export($export.P + $export.F * FORCED_SET, NAME, { set: $set });\n\n    $export($export.P + $export.F * !CORRECT_ITER_NAME, NAME, $iterators);\n\n    if (!LIBRARY && TypedArrayPrototype.toString != arrayToString) TypedArrayPrototype.toString = arrayToString;\n\n    $export($export.P + $export.F * fails(function () {\n      new TypedArray(1).slice();\n    }), NAME, { slice: $slice });\n\n    $export($export.P + $export.F * (fails(function () {\n      return [1, 2].toLocaleString() != new TypedArray([1, 2]).toLocaleString();\n    }) || !fails(function () {\n      TypedArrayPrototype.toLocaleString.call([1, 2]);\n    })), NAME, { toLocaleString: $toLocaleString });\n\n    Iterators[NAME] = CORRECT_ITER_NAME ? $nativeIterator : $iterator;\n    if (!LIBRARY && !CORRECT_ITER_NAME) hide(TypedArrayPrototype, ITERATOR, $iterator);\n  };\n} else module.exports = function () { /* empty */ };\n","'use strict';\nvar global = require('./_global');\nvar DESCRIPTORS = require('./_descriptors');\nvar LIBRARY = require('./_library');\nvar $typed = require('./_typed');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar fails = require('./_fails');\nvar anInstance = require('./_an-instance');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar toIndex = require('./_to-index');\nvar gOPN = require('./_object-gopn').f;\nvar dP = require('./_object-dp').f;\nvar arrayFill = require('./_array-fill');\nvar setToStringTag = require('./_set-to-string-tag');\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar DATA_VIEW = 'DataView';\nvar PROTOTYPE = 'prototype';\nvar WRONG_LENGTH = 'Wrong length!';\nvar WRONG_INDEX = 'Wrong index!';\nvar $ArrayBuffer = global[ARRAY_BUFFER];\nvar $DataView = global[DATA_VIEW];\nvar Math = global.Math;\nvar RangeError = global.RangeError;\n// eslint-disable-next-line no-shadow-restricted-names\nvar Infinity = global.Infinity;\nvar BaseBuffer = $ArrayBuffer;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar floor = Math.floor;\nvar log = Math.log;\nvar LN2 = Math.LN2;\nvar BUFFER = 'buffer';\nvar BYTE_LENGTH = 'byteLength';\nvar BYTE_OFFSET = 'byteOffset';\nvar $BUFFER = DESCRIPTORS ? '_b' : BUFFER;\nvar $LENGTH = DESCRIPTORS ? '_l' : BYTE_LENGTH;\nvar $OFFSET = DESCRIPTORS ? '_o' : BYTE_OFFSET;\n\n// IEEE754 conversions based on https://github.com/feross/ieee754\nfunction packIEEE754(value, mLen, nBytes) {\n  var buffer = new Array(nBytes);\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? pow(2, -24) - pow(2, -77) : 0;\n  var i = 0;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  var e, m, c;\n  value = abs(value);\n  // eslint-disable-next-line no-self-compare\n  if (value != value || value === Infinity) {\n    // eslint-disable-next-line no-self-compare\n    m = value != value ? 1 : 0;\n    e = eMax;\n  } else {\n    e = floor(log(value) / LN2);\n    if (value * (c = pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * pow(2, eBias - 1) * pow(2, mLen);\n      e = 0;\n    }\n  }\n  for (; mLen >= 8; buffer[i++] = m & 255, m /= 256, mLen -= 8);\n  e = e << mLen | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[i++] = e & 255, e /= 256, eLen -= 8);\n  buffer[--i] |= s * 128;\n  return buffer;\n}\nfunction unpackIEEE754(buffer, mLen, nBytes) {\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = eLen - 7;\n  var i = nBytes - 1;\n  var s = buffer[i--];\n  var e = s & 127;\n  var m;\n  s >>= 7;\n  for (; nBits > 0; e = e * 256 + buffer[i], i--, nBits -= 8);\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[i], i--, nBits -= 8);\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : s ? -Infinity : Infinity;\n  } else {\n    m = m + pow(2, mLen);\n    e = e - eBias;\n  } return (s ? -1 : 1) * m * pow(2, e - mLen);\n}\n\nfunction unpackI32(bytes) {\n  return bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0];\n}\nfunction packI8(it) {\n  return [it & 0xff];\n}\nfunction packI16(it) {\n  return [it & 0xff, it >> 8 & 0xff];\n}\nfunction packI32(it) {\n  return [it & 0xff, it >> 8 & 0xff, it >> 16 & 0xff, it >> 24 & 0xff];\n}\nfunction packF64(it) {\n  return packIEEE754(it, 52, 8);\n}\nfunction packF32(it) {\n  return packIEEE754(it, 23, 4);\n}\n\nfunction addGetter(C, key, internal) {\n  dP(C[PROTOTYPE], key, { get: function () { return this[internal]; } });\n}\n\nfunction get(view, bytes, index, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = store.slice(start, start + bytes);\n  return isLittleEndian ? pack : pack.reverse();\n}\nfunction set(view, bytes, index, conversion, value, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = conversion(+value);\n  for (var i = 0; i < bytes; i++) store[start + i] = pack[isLittleEndian ? i : bytes - i - 1];\n}\n\nif (!$typed.ABV) {\n  $ArrayBuffer = function ArrayBuffer(length) {\n    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);\n    var byteLength = toIndex(length);\n    this._b = arrayFill.call(new Array(byteLength), 0);\n    this[$LENGTH] = byteLength;\n  };\n\n  $DataView = function DataView(buffer, byteOffset, byteLength) {\n    anInstance(this, $DataView, DATA_VIEW);\n    anInstance(buffer, $ArrayBuffer, DATA_VIEW);\n    var bufferLength = buffer[$LENGTH];\n    var offset = toInteger(byteOffset);\n    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset!');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);\n    this[$BUFFER] = buffer;\n    this[$OFFSET] = offset;\n    this[$LENGTH] = byteLength;\n  };\n\n  if (DESCRIPTORS) {\n    addGetter($ArrayBuffer, BYTE_LENGTH, '_l');\n    addGetter($DataView, BUFFER, '_b');\n    addGetter($DataView, BYTE_LENGTH, '_l');\n    addGetter($DataView, BYTE_OFFSET, '_o');\n  }\n\n  redefineAll($DataView[PROTOTYPE], {\n    getInt8: function getInt8(byteOffset) {\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset) {\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1]));\n    },\n    getUint32: function getUint32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1])) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 4, byteOffset, arguments[1]), 23, 4);\n    },\n    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 8, byteOffset, arguments[1]), 52, 8);\n    },\n    setInt8: function setInt8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packF32, value, arguments[2]);\n    },\n    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {\n      set(this, 8, byteOffset, packF64, value, arguments[2]);\n    }\n  });\n} else {\n  if (!fails(function () {\n    $ArrayBuffer(1);\n  }) || !fails(function () {\n    new $ArrayBuffer(-1); // eslint-disable-line no-new\n  }) || fails(function () {\n    new $ArrayBuffer(); // eslint-disable-line no-new\n    new $ArrayBuffer(1.5); // eslint-disable-line no-new\n    new $ArrayBuffer(NaN); // eslint-disable-line no-new\n    return $ArrayBuffer.name != ARRAY_BUFFER;\n  })) {\n    $ArrayBuffer = function ArrayBuffer(length) {\n      anInstance(this, $ArrayBuffer);\n      return new BaseBuffer(toIndex(length));\n    };\n    var ArrayBufferProto = $ArrayBuffer[PROTOTYPE] = BaseBuffer[PROTOTYPE];\n    for (var keys = gOPN(BaseBuffer), j = 0, key; keys.length > j;) {\n      if (!((key = keys[j++]) in $ArrayBuffer)) hide($ArrayBuffer, key, BaseBuffer[key]);\n    }\n    if (!LIBRARY) ArrayBufferProto.constructor = $ArrayBuffer;\n  }\n  // iOS Safari 7.x bug\n  var view = new $DataView(new $ArrayBuffer(2));\n  var $setInt8 = $DataView[PROTOTYPE].setInt8;\n  view.setInt8(0, 2147483648);\n  view.setInt8(1, 2147483649);\n  if (view.getInt8(0) || !view.getInt8(1)) redefineAll($DataView[PROTOTYPE], {\n    setInt8: function setInt8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    }\n  }, true);\n}\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\nhide($DataView[PROTOTYPE], $typed.VIEW, true);\nexports[ARRAY_BUFFER] = $ArrayBuffer;\nexports[DATA_VIEW] = $DataView;\n","import * as U from \"./utils\"\nimport { Bus } from \"./bus\";\nimport { Packet } from \"./packet\";\n\nconst controlTransferGetReport = 0x01;\nconst controlTransferSetReport = 0x09;\nconst controlTransferOutReport = 0x200;\nconst controlTransferInReport = 0x100;\n\n// see https://github.com/microsoft/uf2/blob/master/hf2.md for full spec\nexport const HF2_DEVICE_MAJOR = 42\nexport const HF2_CMD_BININFO = 0x0001 // no arguments\nexport const HF2_MODE_BOOTLOADER = 0x01\nexport const HF2_MODE_USERSPACE = 0x02\n/*\nstruct HF2_BININFO_Result {\n    uint32_t mode;\n    uint32_t flash_page_size;\n    uint32_t flash_num_pages;\n    uint32_t max_message_size;\n};\n*/\n\nexport const HF2_CMD_INFO = 0x0002\n// no arguments\n// results is utf8 character array\n\nexport const HF2_CMD_RESET_INTO_APP = 0x0003// no arguments, no result\n\nexport const HF2_CMD_RESET_INTO_BOOTLOADER = 0x0004  // no arguments, no result\n\nexport const HF2_CMD_START_FLASH = 0x0005   // no arguments, no result\n\nexport const HF2_CMD_WRITE_FLASH_PAGE = 0x0006\n/*\nstruct HF2_WRITE_FLASH_PAGE_Command {\n    uint32_t target_addr;\n    uint32_t data[flash_page_size];\n};\n*/\n// no result\n\nexport const HF2_CMD_CHKSUM_PAGES = 0x0007\n/*\nstruct HF2_CHKSUM_PAGES_Command {\n    uint32_t target_addr;\n    uint32_t num_pages;\n};\nstruct HF2_CHKSUM_PAGES_Result {\n    uint16_t chksums[num_pages];\n};\n*/\n\nexport const HF2_CMD_READ_WORDS = 0x0008\n/*\nstruct HF2_READ_WORDS_Command {\n    uint32_t target_addr;\n    uint32_t num_words;\n};\nstruct HF2_READ_WORDS_Result {\n    uint32_t words[num_words];\n};\n*/\n\nexport const HF2_CMD_WRITE_WORDS = 0x0009\n/*\nstruct HF2_WRITE_WORDS_Command {\n    uint32_t target_addr;\n    uint32_t num_words;\n    uint32_t words[num_words];\n};\n*/\n// no result\n\nexport const HF2_CMD_DMESG = 0x0010\n// no arguments\n// results is utf8 character array\n\nexport const HF2_FLAG_SERIAL_OUT = 0x80\nexport const HF2_FLAG_SERIAL_ERR = 0xC0\nexport const HF2_FLAG_CMDPKT_LAST = 0x40\nexport const HF2_FLAG_CMDPKT_BODY = 0x00\nexport const HF2_FLAG_MASK = 0xC0\nexport const HF2_SIZE_MASK = 63\n\nexport const HF2_STATUS_OK = 0x00\nexport const HF2_STATUS_INVALID_CMD = 0x01\nexport const HF2_STATUS_EXEC_ERR = 0x02\nexport const HF2_STATUS_EVENT = 0x80\n\n// the eventId is overlayed on the tag+status; the mask corresponds\n// to the HF2_STATUS_EVENT above\nexport const HF2_EV_MASK = 0x800000\n\nexport const HF2_CMD_JDS_CONFIG = 0x0020\nexport const HF2_CMD_JDS_SEND = 0x0021\nexport const HF2_EV_JDS_PACKET = 0x800020\n\nexport class Transport {\n    dev: USBDevice;\n    iface: USBInterface;\n    altIface: USBAlternateInterface;\n    epIn: USBEndpoint;\n    epOut: USBEndpoint;\n    readLoopStarted = false;\n    ready = false;\n\n    constructor(private requestDevice: (options: USBDeviceRequestOptions) => Promise<USBDevice>) {\n\n    }\n\n    onData = (v: Uint8Array) => { };\n    onError = (e: Error) => {\n        console.error(\"HF2 error: \" + (e ? e.stack : e))\n    };\n\n    log(msg: string, v?: any) {\n        if (v != undefined)\n            console.log(\"HF2: \" + msg, v)\n        else\n            console.log(\"HF2: \" + msg)\n    }\n\n\n    private clearDev() {\n        if (this.dev) {\n            this.dev = null\n            this.epIn = null\n            this.epOut = null\n        }\n    }\n\n    disconnectAsync(): Promise<void> {\n        this.ready = false\n        if (!this.dev) return Promise.resolve()\n        this.log(\"close device\")\n        return this.dev.close()\n            .catch(e => {\n                // just ignore errors closing, most likely device just disconnected\n            })\n            .then(() => {\n                this.clearDev()\n                return U.delay(500)\n            })\n    }\n\n    private recvPacketAsync(): Promise<Uint8Array> {\n        let final = (res: USBInTransferResult) => {\n            if (res.status != \"ok\")\n                this.error(\"USB IN transfer failed\")\n            let arr = new Uint8Array(res.data.buffer)\n            if (arr.length == 0)\n                return this.recvPacketAsync()\n            return arr\n        }\n\n        if (!this.dev)\n            return Promise.reject(new Error(\"Disconnected\"))\n\n        if (!this.epIn) {\n            return this.dev.controlTransferIn({\n                requestType: \"class\",\n                recipient: \"interface\",\n                request: controlTransferGetReport,\n                value: controlTransferInReport,\n                index: this.iface.interfaceNumber\n            }, 64).then(final)\n        }\n\n        return this.dev.transferIn(this.epIn.endpointNumber, 64)\n            .then(final)\n    }\n\n    error(msg: string) {\n        throw new Error(`USB error on device ${this.dev ? this.dev.productName : \"n/a\"} (${msg})`)\n    }\n\n    private async readLoop() {\n        if (this.readLoopStarted)\n            return\n        this.readLoopStarted = true\n        this.log(\"start read loop\")\n\n        while (true) {\n            if (!this.ready) {\n                break\n                //await U.delay(300)\n                //continue\n            }\n\n            try {\n                const buf = await this.recvPacketAsync()\n\n                if (buf[0]) {\n                    // we've got data; retry reading immedietly after processing it\n                    this.onData(buf)\n                } else {\n                    // throttle down if no data coming\n                    await U.delay(5)\n                }\n            } catch (err) {\n                if (this.dev)\n                    this.onError(err)\n                await U.delay(300)\n            }\n        }\n    }\n\n    sendPacketAsync(pkt: Uint8Array) {\n        if (!this.dev)\n            return Promise.reject(new Error(\"Disconnected\"))\n        U.assert(pkt.length <= 64)\n        if (!this.epOut) {\n            return this.dev.controlTransferOut({\n                requestType: \"class\",\n                recipient: \"interface\",\n                request: controlTransferSetReport,\n                value: controlTransferOutReport,\n                index: this.iface.interfaceNumber\n            }, pkt).then(res => {\n                if (res.status != \"ok\")\n                    this.error(\"USB CTRL OUT transfer failed\")\n            })\n        }\n        return this.dev.transferOut(this.epOut.endpointNumber, pkt)\n            .then(res => {\n                if (res.status != \"ok\")\n                    this.error(\"USB OUT transfer failed\")\n            })\n    }\n\n\n    async init() {\n        this.dev = await this.requestDevice({\n            filters: [{\n                classCode: 255,\n                subclassCode: HF2_DEVICE_MAJOR,\n            }]\n        })\n        this.iface = undefined;\n        this.altIface = undefined;\n        this.log(\"connect device: \" + this.dev.manufacturerName + \" \" + this.dev.productName)\n\n        // resolve interfaces\n        for (const iface of this.dev.configuration.interfaces) {\n            const alt = iface.alternates[0]\n            if (alt.interfaceClass == 0xff && alt.interfaceSubclass == HF2_DEVICE_MAJOR) {\n                this.iface = iface;\n                this.altIface = alt;\n                break;\n            }\n        }\n\n        if (!this.iface) throw new Error(\"HF2 interface not found\")\n\n        await this.dev.open()\n        await this.dev.selectConfiguration(1)\n\n        if (this.altIface.endpoints.length) {\n            this.epIn = this.altIface.endpoints.filter(e => e.direction == \"in\")[0]\n            this.epOut = this.altIface.endpoints.filter(e => e.direction == \"out\")[0]\n            U.assert(this.epIn.packetSize == 64);\n            U.assert(this.epOut.packetSize == 64);\n        }\n        this.log(\"claim interface\")\n        await this.dev.claimInterface(this.iface.interfaceNumber)\n        this.log(\"all connected\")\n        this.ready = true\n        this.readLoop()\n    }\n}\n\nexport class Proto {\n    eventHandlers: U.SMap<(buf: Uint8Array) => void> = {}\n    msgs = new U.PromiseBuffer<Uint8Array>()\n    cmdSeq = (Math.random() * 0xffff) | 0;\n    private lock = new U.PromiseQueue();\n\n    constructor(public io: Transport) {\n        let frames: Uint8Array[] = []\n\n        io.onData = buf => {\n            let tp = buf[0] & HF2_FLAG_MASK\n            let len = buf[0] & 63\n            //console.log(`msg tp=${tp} len=${len}`)\n            let frame = new Uint8Array(len)\n            U.memcpy(frame, 0, buf, 1, len)\n            if (tp & HF2_FLAG_SERIAL_OUT) {\n                this.onSerial(frame, tp == HF2_FLAG_SERIAL_ERR)\n                return\n            }\n            frames.push(frame)\n            if (tp == HF2_FLAG_CMDPKT_BODY) {\n                return\n            } else {\n                U.assert(tp == HF2_FLAG_CMDPKT_LAST)\n                let total = 0\n                for (let f of frames) total += f.length\n                let r = new Uint8Array(total)\n                let ptr = 0\n                for (let f of frames) {\n                    U.memcpy(r, ptr, f)\n                    ptr += f.length\n                }\n                frames = []\n                if (r[2] & HF2_STATUS_EVENT) {\n                    // asynchronous event\n                    this.handleEvent(r)\n                } else {\n                    this.msgs.push(r)\n                }\n            }\n        }\n    }\n\n\n    error(m: string) {\n        return this.io.error(m)\n    }\n\n    talkAsync(cmd: number, data?: Uint8Array) {\n        let len = 8\n        if (data) len += data.length\n        let pkt = new Uint8Array(len)\n        let seq = ++this.cmdSeq & 0xffff\n        U.write32(pkt, 0, cmd);\n        U.write16(pkt, 4, seq);\n        U.write16(pkt, 6, 0);\n        if (data)\n            U.memcpy(pkt, 8, data, 0, data.length)\n        let numSkipped = 0\n        let handleReturnAsync = (): Promise<Uint8Array> =>\n            this.msgs.shiftAsync(1000) // we wait up to a second\n                .then(res => {\n                    if (U.read16(res, 0) != seq) {\n                        if (numSkipped < 3) {\n                            numSkipped++\n                            this.io.log(`message out of sync, (${seq} vs ${U.read16(res, 0)}); will re-try`)\n                            return handleReturnAsync()\n                        }\n                        this.error(\"out of sync\")\n                    }\n                    let info = \"\"\n                    if (res[3])\n                        info = \"; info=\" + res[3]\n                    switch (res[2]) {\n                        case HF2_STATUS_OK:\n                            return res.slice(4)\n                        case HF2_STATUS_INVALID_CMD:\n                            this.error(\"invalid command\" + info)\n                            break\n                        case HF2_STATUS_EXEC_ERR:\n                            this.error(\"execution error\" + info)\n                            break\n                        default:\n                            this.error(\"error \" + res[2] + info)\n                            break\n                    }\n                    return null\n                })\n\n        return this.lock.enqueue(\"talk\", () =>\n            this.sendMsgAsync(pkt)\n                .then(handleReturnAsync))\n    }\n\n\n    private sendMsgAsync(buf: Uint8Array, serial: number = 0) {\n        // Util.assert(buf.length <= this.maxMsgSize)\n        let frame = new Uint8Array(64)\n        let loop = (pos: number): Promise<void> => {\n            let len = buf.length - pos\n            if (len <= 0) return Promise.resolve()\n            if (len > 63) {\n                len = 63\n                frame[0] = HF2_FLAG_CMDPKT_BODY;\n            } else {\n                frame[0] = HF2_FLAG_CMDPKT_LAST;\n            }\n            if (serial) frame[0] = serial == 1 ? HF2_FLAG_SERIAL_OUT : HF2_FLAG_SERIAL_ERR;\n            frame[0] |= len;\n            for (let i = 0; i < len; ++i)\n                frame[i + 1] = buf[pos + i]\n            return this.io.sendPacketAsync(frame)\n                .then(() => loop(pos + len))\n        }\n        return loop(0)\n    }\n\n    onEvent(id: number, f: (buf: Uint8Array) => void) {\n        U.assert(!!(id & HF2_EV_MASK))\n        this.eventHandlers[id + \"\"] = f\n    }\n\n    onJDMessage(f: (buf: Uint8Array) => void) {\n        this.talkAsync(HF2_CMD_JDS_CONFIG, U.encodeU32LE([1]))\n        this.onEvent(HF2_EV_JDS_PACKET, f)\n    }\n\n    sendJDMessageAsync(buf: Uint8Array) {\n        return this.talkAsync(HF2_CMD_JDS_SEND, buf)\n    }\n\n    handleEvent(buf: Uint8Array) {\n        let evid = U.read32(buf, 0)\n        let f = this.eventHandlers[evid + \"\"]\n        if (f) {\n            f(buf.slice(4))\n        } else {\n            this.io.log(\"unhandled event: \" + evid.toString(16))\n        }\n    }\n    onSerial(data: Uint8Array, iserr: boolean) {\n        console.log(\"SERIAL:\", U.bufferToString(data))\n    }\n\n    async init() {\n        await this.io.init()\n        const buf = await this.talkAsync(HF2_CMD_INFO)\n        this.io.log(\"Connected to: \" + U.bufferToString(buf))\n    }\n\n    disconnectAsync(): Promise<void> {\n        return this.io.disconnectAsync();\n    }\n}\n","import { warn, crc, ALIGN, write16, bufferConcat, toHex, fromHex, error, read32, read16, write32 } from \"./utils\";\nimport {\n    JD_FRAME_FLAG_COMMAND,\n    JD_FRAME_FLAG_IDENTIFIER_IS_SERVICE_CLASS,\n    CMD_SET_REG,\n    JD_SERIAL_HEADER_SIZE,\n    JD_FRAME_FLAG_ACK_REQUESTED,\n    JD_SERVICE_NUMBER_MASK,\n    JD_SERVICE_NUMBER_INV_MASK,\n    JD_SERIAL_MAX_PAYLOAD_SIZE,\n} from \"./constants\";\nimport { Device } from \"./device\";\nimport { NumberFormat, getNumber } from \"./buffer\";\nimport { pack } from \"./struct\";\nimport { Bus } from \"./bus\";\n\nexport class Packet {\n    _header: Uint8Array;\n    _data: Uint8Array;\n    timestamp: number\n    dev: Device\n\n    private constructor() { }\n\n    static fromBinary(buf: Uint8Array) {\n        const p = new Packet()\n        p._header = buf.slice(0, JD_SERIAL_HEADER_SIZE)\n        p._data = buf.slice(JD_SERIAL_HEADER_SIZE)\n        return p\n    }\n\n    static from(service_command: number, data: Uint8Array) {\n        const p = new Packet()\n        p._header = new Uint8Array(JD_SERIAL_HEADER_SIZE)\n        p.data = data\n        p.service_command = service_command\n        return p\n    }\n\n    static onlyHeader(service_command: number) {\n        return Packet.from(service_command, new Uint8Array(0))\n    }\n\n    toBuffer() {\n        return bufferConcat(this._header, this._data)\n    }\n\n    get device_identifier() {\n        return toHex(this._header.slice(4, 4 + 8))\n    }\n    set device_identifier(id: string) {\n        const idb = fromHex(id)\n        if (idb.length != 8)\n            error(\"Invalid id\")\n        this._header.set(idb, 4)\n    }\n\n    get frame_flags() { return this._header[3] }\n\n    get multicommand_class() {\n        if (this.frame_flags & JD_FRAME_FLAG_IDENTIFIER_IS_SERVICE_CLASS)\n            return read32(this._header, 4)\n        return undefined\n    }\n\n    get size(): number {\n        return this._header[12];\n    }\n\n    get requires_ack(): boolean {\n        return (this.frame_flags & JD_FRAME_FLAG_ACK_REQUESTED) ? true : false;\n    }\n    set requires_ack(ack: boolean) {\n        if (ack != this.requires_ack)\n            this._header[3] ^= JD_FRAME_FLAG_ACK_REQUESTED\n    }\n\n    get service_number(): number {\n        return this._header[13] & JD_SERVICE_NUMBER_MASK;\n    }\n    set service_number(service_number: number) {\n        if (service_number == null)\n            throw new Error(\"service_number not set\")\n        this._header[13] = (this._header[13] & JD_SERVICE_NUMBER_INV_MASK) | service_number;\n    }\n\n    get service_class(): number {\n        if (this.dev)\n            return this.dev.serviceClassAt(this.service_number)\n        return undefined\n    }\n\n    get crc(): number {\n        return read16(this._header, 0)\n    }\n\n    get service_command(): number {\n        return read16(this._header, 14)\n    }\n    set service_command(cmd: number) {\n        write16(this._header, 14, cmd)\n    }\n\n    get is_reg_set() {\n        return (this.service_command >> 12) == (CMD_SET_REG >> 12)\n    }\n\n    get is_reg_get() {\n        return (this.service_command >> 12) == (CMD_SET_REG >> 12)\n    }\n\n    get data(): Uint8Array {\n        return this._data\n    }\n\n    set data(buf: Uint8Array) {\n        if (buf.length > JD_SERIAL_MAX_PAYLOAD_SIZE)\n            throw Error(\"Too big\")\n        this._header[12] = buf.length\n        this._data = buf\n    }\n\n    get uintData() {\n        let buf = this._data\n        if (buf.length == 0)\n            return undefined\n        if (buf.length < 4)\n            buf = bufferConcat(buf, new Uint8Array(4))\n        return read32(buf, 0)\n    }\n\n    get intData() {\n        let fmt: NumberFormat\n        switch (this._data.length) {\n            case 0:\n                return undefined\n            case 1:\n                fmt = NumberFormat.Int8LE\n                break\n            case 2:\n            case 3:\n                fmt = NumberFormat.Int16LE\n                break\n            default:\n                fmt = NumberFormat.Int32LE\n                break\n        }\n        return this.getNumber(fmt, 0)\n    }\n\n    compress(stripped: Uint8Array[]) {\n        if (stripped.length == 0)\n            return\n        let sz = -4\n        for (let s of stripped) {\n            sz += s.length\n        }\n        const data = new Uint8Array(sz)\n        this._header.set(stripped[0], 12)\n        data.set(stripped[0].slice(4), 0)\n        sz = stripped[0].length - 4\n        for (let s of stripped.slice(1)) {\n            data.set(s, sz)\n            sz += s.length\n        }\n        this._data = data\n    }\n\n    withFrameStripped() {\n        return bufferConcat(this._header.slice(12, 12 + 4), this._data)\n    }\n\n    getNumber(fmt: NumberFormat, offset: number) {\n        return getNumber(this._data, fmt, offset)\n    }\n\n    get is_command() {\n        return !!(this.frame_flags & JD_FRAME_FLAG_COMMAND)\n    }\n\n    get is_report() {\n        return !this.is_command\n    }\n\n    toString(): string {\n        let msg = `${this.device_identifier}/${this.service_number}[${this.frame_flags}]: ${this.service_command} sz=${this.size}`\n        if (this.size < 20) msg += \": \" + toHex(this.data)\n        else msg += \": \" + toHex(this.data.slice(0, 20)) + \"...\"\n        return msg\n    }\n\n    sendCoreAsync(bus: Bus) {\n        this._header[2] = this.size + 4\n        write16(this._header, 0, crc(bufferConcat(this._header.slice(2), this._data)))\n        return bus.sendPacketAsync(this)\n    }\n\n    sendReportAsync(dev: Device) {\n        if (!dev)\n            return Promise.resolve()\n        this.device_identifier = dev.deviceId\n        return this.sendCoreAsync(dev.bus)\n    }\n\n    sendCmdAsync(dev: Device) {\n        if (!dev)\n            return Promise.resolve()\n        this.device_identifier = dev.deviceId\n        this._header[3] |= JD_FRAME_FLAG_COMMAND\n        return this.sendCoreAsync(dev.bus)\n    }\n\n    sendAsMultiCommandAsync(bus: Bus, service_class: number) {\n        this._header[3] |= JD_FRAME_FLAG_IDENTIFIER_IS_SERVICE_CLASS | JD_FRAME_FLAG_COMMAND\n        write32(this._header, 4, service_class)\n        write32(this._header, 8, 0)\n        return this.sendCoreAsync(bus)\n    }\n\n    static fromFrame(frame: Uint8Array, timestamp: number) {\n        return frameToPackets(frame, timestamp)\n    }\n\n    static packed(service_command: number, fmt: string, nums: number[]) {\n        return Packet.from(service_command, pack(fmt, nums))\n    }\n}\n\n\nfunction frameToPackets(frame: Uint8Array, timestamp: number) {\n    const size = frame[2] || 0\n    if (frame.length < size + 12) {\n        warn(`${timestamp}ms: got only ${frame.length} bytes; expecting ${size + 12}`)\n    } else if (size < 4) {\n        warn(`${timestamp}ms: empty packet`)\n    } else {\n        const computed = crc(frame.slice(2, size + 12))\n        const actual = read16(frame, 0)\n        if (actual != computed)\n            console.log(`crc mismatch; sz=${size} got:${actual}, exp:${computed}`)\n\n        const res: Packet[] = []\n        if (frame.length != 12 + frame[2])\n            warn(`${timestamp}ms: unexpected packet len: ${frame.length}`)\n        for (let ptr = 12; ptr < 12 + frame[2];) {\n            const psz = frame[ptr] + 4\n            const sz = ALIGN(psz)\n            const pkt = bufferConcat(frame.slice(0, 12), frame.slice(ptr, ptr + psz))\n            if (ptr + sz > 12 + frame[2])\n                warn(`${timestamp}ms: invalid frame compression, res len=${res.length}`)\n            const p = Packet.fromBinary(pkt)\n            p.timestamp = timestamp\n            res.push(p)\n            ptr += sz\n        }\n\n        return res\n    }\n\n    return []\n}","import { EventEmitter } from \"./eventemitter\";\n\nexport abstract class Node extends EventEmitter {\n    constructor() {\n        super()\n    }\n    /**\n     * Globally unique identifier per GraphQL spec\n     */\n    abstract get id(): string;\n}","import { SMap } from \"./utils\";\nimport { NEW_LISTENER, REMOVE_LISTENER, ERROR } from \"./constants\";\nexport type EventHandler = (...args) => void;\n\ninterface Listener {\n    handler: EventHandler;\n    once: boolean;\n}\n\nexport class EventEmitter {\n    readonly listeners: SMap<Listener[]> = {};\n\n    constructor() {\n    }\n\n    on(eventName: string, handler: EventHandler) {\n        return this.addListenerInternal(eventName, handler, false);\n    }\n\n    off(eventName: string, handler: EventHandler) {\n        return this.removeListener(eventName, handler);\n    }\n\n    once(eventName: string, handler: EventHandler) {\n        return this.addListenerInternal(eventName, handler, true);\n    }\n\n    addListener(eventName: string, handler: EventHandler) {\n        return this.addListenerInternal(eventName, handler, false);\n    }\n\n    private addListenerInternal(eventName: string, handler: EventHandler, once: boolean): EventEmitter {\n        if (!eventName || !handler) return this;\n\n        const listeners = this.listeners[eventName] || (this.listeners[eventName] = []);\n        const listener = listeners.find(listener => listener.handler == handler)\n        if (listener) {\n            listener.once = !!once;\n            return;\n        }\n\n        this.emit(NEW_LISTENER, eventName, handler)\n        listeners.push({\n            handler,\n            once: !!once\n        })\n        return this;\n    }\n\n    removeListener(eventName: string, handler: EventHandler): EventEmitter {\n        if (!eventName || !handler) return this;\n\n        const listeners = this.listeners[eventName]\n        if (listeners) {\n            for (let i = 0; i < listeners.length; ++i) {\n                const listener = listeners[i];\n                const handler = listener.handler\n                if (handler === handler) {\n                    listeners.splice(i, -1);\n                    --i;\n                    if (listeners.length == 0)\n                        delete this.listeners[eventName];\n                    this.emit(REMOVE_LISTENER, eventName, handler);\n                    return this;\n                }\n            }\n        }\n        return this;\n    }\n\n    /**\n     * Synchronously calls each of the listeners registered for the event named eventName, in the order they were registered, passing the supplied arguments to each.\n     * @param eventName \n     * @param args \n     */\n    emit(eventName: string, ...args): boolean {\n        if (!eventName) return false;\n\n        const listeners = this.listeners[eventName];\n        if (!listeners) return false;\n        for (let i = 0; i < listeners.length; ++i) {\n            const listener = listeners[i];\n            const handler = listener.handler;\n            if (listener.once) {\n                listeners.splice(i, -1);\n                --i;\n            }\n            try {\n                handler.apply(null, args);\n            }\n            catch (e) {\n                // avoid recursive errors in error handler\n                if (eventName !== ERROR)\n                    this.emit(ERROR, e)\n            }\n        }\n        if (listeners.length == 0)\n            delete this.listeners[eventName]\n        return true;\n    }\n\n    listenerCount(eventName: string): number {\n        if (!eventName) return 0;\n        const listeners = this.listeners[eventName]\n        return listeners ? listeners.length : 0\n    }\n\n    /**\n     * Returns an array listing the events for which the emitter has registered listeners.\n     */\n    eventNames(): string[] {\n        return Object.keys(this.listeners)\n    }\n}\n","import { Packet } from \"./packet\";\nimport { CMD_SET_REG, REPORT_RECEIVE, REPORT_UPDATE } from \"./constants\";\nimport { Service } from \"./service\";\nimport { intOfBuffer } from \"./buffer\";\nimport { Node } from \"./node\";\nimport { bufferEq } from \"./utils\";\nimport { bufferOfInt } from \"./struct\";\n\nexport class Register extends Node {\n    private _data: Uint8Array;\n    public lastData: number;\n\n    constructor(\n        public readonly service: Service,\n        public readonly address: number) {\n        super()\n    }\n\n    get id() {\n        return `reg:${this.service.device.deviceId}:${this.service.service_number.toString(16)}:${this.address.toString(16)}`\n    }\n\n    // send a message to set the register value\n    sendSetAsync(data: Uint8Array): Promise<void> {\n        const cmd = CMD_SET_REG | this.address;\n        const pkt = Packet.from(cmd, data)\n        return this.service.sendPacketAsync(pkt);\n    }\n\n    sendSetIntAsync(value: number): Promise<void> {\n        return this.sendSetAsync(bufferOfInt(value))\n    }\n\n    get data() {\n        return this._data;\n    }\n\n    get intValue(): number {\n        return this.data && intOfBuffer(this.data);\n    }\n\n    processReport(pkt: Packet) {\n        const updated = !bufferEq(this._data, pkt.data)\n        this._data = pkt.data;\n        this.lastData = pkt.timestamp;\n        this.emit(REPORT_RECEIVE, this)\n        if (updated)\n            this.emit(REPORT_UPDATE, this)\n    }\n}\n","import { Device } from \"./device\";\nimport { Packet } from \"./packet\";\nimport { serviceName } from \"./pretty\";\nimport { Register } from \"./register\";\nimport { CMD_REG_MASK, PACKET_RECEIVE, PACKET_SEND, REG_IS_STREAMING } from \"./constants\";\nimport { Node } from \"./node\";\n\nexport class Service extends Node {\n    private _registers: Register[];\n\n    constructor(\n        public readonly device: Device,\n        public readonly service_number: number\n    ) {\n        super()\n    }\n\n    get id() {\n        return `srv:${this.device.id}:${this.service_number.toString(16)}`\n    }\n\n    get serviceClass() {\n        return this.device.serviceClassAt(this.service_number);\n    }\n\n    get name() {\n        return serviceName(this.serviceClass)\n    }\n\n    registerAt(address: number) {\n        address = address | 0;\n        if (!this._registers)\n            this._registers = [];\n        let register = this._registers[address];\n        if (!register)\n            register = this._registers[address] = new Register(this, address);\n        return register;\n    }\n\n    register(options: { address: number }): Register {\n        const address = options.address;\n        return this.registerAt(address);\n    }\n\n    sendPacketAsync(pkt: Packet) {\n        pkt.dev = this.device;\n        pkt.service_number = this.service_number;\n        this.emit(PACKET_SEND, pkt)\n        return pkt.sendCmdAsync(this.device);\n    }\n\n    sendCmdAsync(cmd: number) {\n        const pkt = Packet.onlyHeader(cmd);\n        return this.sendPacketAsync(pkt)\n    }\n\n    processPacket(pkt: Packet) {\n        this.emit(PACKET_RECEIVE, pkt)\n        if (pkt.is_report) {\n            const address = pkt.service_command & CMD_REG_MASK\n            const reg = this.register({ address })\n            if (reg)\n                reg.processReport(pkt);\n        }\n    }\n}\n","import { Packet } from \"./packet\"\nimport {\n    JD_SERVICE_NUMBER_CTRL, DEVICE_ANNOUNCE, ANNOUNCE, DISCONNECT, CONNECT,\n    JD_ADVERTISEMENT_0_COUNTER_MASK, DEVICE_RESTART, RESTART\n} from \"./constants\"\nimport { hash, fromHex, idiv, read32, SMap, bufferEq, assert } from \"./utils\"\nimport { getNumber, NumberFormat } from \"./buffer\";\nimport { Bus } from \"./bus\";\nimport { Service } from \"./service\";\nimport { serviceClass } from \"./pretty\";\nimport { Node } from \"./node\";\n\nexport class Device extends Node {\n    connected: boolean;\n    private servicesData: Uint8Array\n    lastSeen: number\n    lastServiceUpdate: number\n    currentReading: Uint8Array\n    private _shortId: string\n    private _services: Service[]\n\n    constructor(public readonly bus: Bus, public readonly deviceId: string) {\n        super();\n        this.connected = true;\n    }\n\n    get id() {\n        return `dev:${this.deviceId}`\n    }\n\n    get name() {\n        return this.bus.lookupName(this.deviceId) || this.bus.lookupName(this.shortId);\n    }\n\n    get announced(): boolean {\n        return !!this.servicesData && !!this.servicesData.length;\n    }\n\n    get shortId() {\n        // TODO measure if caching is worth it\n        if (!this._shortId)\n            this._shortId = shortDeviceId(this.deviceId)\n        return this._shortId;\n    }\n\n    toString() {\n        return this.shortId + (this.name ? ` (${this.name})` : ``)\n    }\n\n    hasService(service_class: number): boolean {\n        if (!this.announced) return false;\n        for (let i = 4; i < this.servicesData.length; i += 4)\n            if (getNumber(this.servicesData, NumberFormat.UInt32LE, i) == service_class)\n                return true\n        return false\n    }\n\n    get serviceLength() {\n        if (!this.announced) return 0;\n        return this.servicesData.length >> 2;\n    }\n\n    serviceClassAt(idx: number): number {\n        idx <<= 2\n        if (!this.announced || idx + 4 > this.servicesData.length)\n            return undefined\n        if (idx == 0)\n            return 0\n        return read32(this.servicesData, idx)\n    }\n\n    get serviceClasses(): number[] {\n        const r = [];\n        const n = this.serviceLength;\n        for (let i = 0; i < n; ++i)\n            r.push(this.serviceClassAt(i))\n        return r;\n    }\n\n    private initServices() {\n        assert(this.announced)\n        if (!this._services) {\n            const n = this.serviceLength;\n            let s = [];\n            for (let i = 0; i < n; ++i)\n                s.push(new Service(this, i));\n            this._services = s;\n        }\n    }\n\n    service(service_number: number) {\n        if (!this.announced) return undefined;\n        this.initServices();\n        service_number = service_number | 0;\n        return this._services && this._services[service_number];\n    }\n\n\n    services(options?: { serviceNumber?: number, serviceName?: string, serviceClass?: number }): Service[] {\n        if (!this.announced) return [];\n\n        if (options?.serviceNumber >= 0)\n            return [this.service(options?.serviceNumber)]\n\n        if (options?.serviceName && options?.serviceClass > -1)\n            throw Error(\"serviceClass and serviceName cannot be used together\")\n        let sc = serviceClass(options?.serviceName);\n        if (sc === undefined) sc = options?.serviceClass;\n        if (sc === undefined) sc = -1;\n\n        this.initServices();\n        let r = this._services.slice();\n        if (sc > -1) r = r.filter(s => s.serviceClass == sc)\n        return r;\n    }\n\n    sendCtrlCommand(cmd: number, payload: Buffer = null) {\n        const pkt = !payload ? Packet.onlyHeader(cmd) : Packet.from(cmd, payload)\n        pkt.service_number = JD_SERVICE_NUMBER_CTRL\n        pkt.sendCmdAsync(this)\n    }\n\n    processAnnouncement(pkt: Packet) {\n        const w0 = this.servicesData ? getNumber(this.servicesData, NumberFormat.UInt32LE, 0) : 0\n        const w1 = getNumber(pkt.data, NumberFormat.UInt32LE, 0)\n\n        if (w1 && (w1 & JD_ADVERTISEMENT_0_COUNTER_MASK) < (w0 & JD_ADVERTISEMENT_0_COUNTER_MASK)) {\n            this.bus.emit(DEVICE_RESTART, this);\n            this.emit(RESTART)\n        }\n\n        const servData = this.servicesData ? this.servicesData.slice(4) : null\n        if (!bufferEq(pkt.data.slice(4), servData)) {\n            this.servicesData = pkt.data\n            this.lastServiceUpdate = pkt.timestamp\n            if (this._services) {\n                // patch services\n                throw new Error(\"need to patch vervices\")\n            }\n            this.bus.emit(DEVICE_ANNOUNCE, this);\n            this.emit(ANNOUNCE)\n        }\n    }\n\n    processPacket(pkt: Packet) {\n        const service = this.service(pkt.service_number)\n        if (service)\n            service.processPacket(pkt);\n    }\n\n    disconnect() {\n        this.connected = false;\n        this.emit(DISCONNECT)\n    }\n}\n\n\n// 4 letter ID; 0.04%/0.01%/0.002% collision probability among 20/10/5 devices\n// 3 letter ID; 1.1%/2.6%/0.05%\n// 2 letter ID; 25%/6.4%/1.5%\nexport function shortDeviceId(devid: string) {\n    const h = hash(fromHex(devid), 30)\n    return String.fromCharCode(0x41 + h % 26) +\n        String.fromCharCode(0x41 + idiv(h, 26) % 26) +\n        String.fromCharCode(0x41 + idiv(h, 26 * 26) % 26) +\n        String.fromCharCode(0x41 + idiv(h, 26 * 26 * 26) % 26)\n}","import { Packet } from \"./packet\";\nimport { Device } from \"./device\";\nimport { Node } from \"./node\";\nimport { SMap } from \"./utils\";\nimport {\n    ConsolePriority,\n    CMD_CONSOLE_SET_MIN_PRIORITY,\n    SRV_LOGGER, JD_SERVICE_NUMBER_CTRL,\n    CMD_ADVERTISEMENT_DATA,\n    CMD_EVENT, DEVICE_ANNOUNCE,\n    PACKET_SEND,\n    ERROR,\n    CONNECTING,\n    CONNECT,\n    DISCONNECT,\n    DEVICE_CONNECT,\n    DEVICE_DISCONNECT,\n    PACKET_RECEIVE,\n    PACKET_EVENT,\n    PACKET_REPORT,\n    PACKET_PROCESS\n} from \"./constants\";\nimport { serviceClass } from \"./pretty\";\n\nexport interface BusOptions {\n    sendPacketAsync?: (p: Packet) => Promise<void>;\n    connectAsync?: () => Promise<void>;\n    disconnectAsync?: () => Promise<void>;\n}\n\nexport interface Error {\n    context: string;\n    exception: any;\n}\n\n/**\n * A JACDAC bus manager. This instance maintains the list of devices on the bus.\n */\nexport class Bus extends Node {\n    private _connected = false;\n    private _connectPromise: Promise<void>;\n\n    private _devices: Device[] = [];\n    private _deviceNames: SMap<string> = {};\n    private _startTime: number;\n    private _gcInterval: any;\n    private _minConsolePriority = ConsolePriority.Log;\n\n    /**\n     * Creates the bus with the given transport\n     * @param sendPacket \n     */\n    constructor(public options?: BusOptions) {\n        super();\n        this.options = this.options || {};\n        this.resetTime();\n        this.addListener(DEVICE_ANNOUNCE, () => this.pingLoggers());\n    }\n\n    get id() {\n        return \"bus\";\n    }\n\n    node(id: string) {\n        const m = /^(?<type>bus|dev|srv|reg)(:(?<dev>\\w+)(:(?<srv>\\w+)(:(?<reg>\\w+))?)?)?$/.exec(id)\n        if (!m) return undefined;\n        switch (m.groups[\"type\"]) {\n            case \"bus\": return this;\n            case \"dev\": return this.device(m.groups[\"dev\"])\n            case \"srv\": return this.device(m.groups[\"dev\"])\n                ?.service(parseInt(m.groups[\"dev\"]))\n            case \"reg\": return this.device(m.groups[\"dev\"])\n                ?.service(parseInt(m.groups[\"dev\"]))\n                ?.registerAt(parseInt(m.groups[\"reg\"]));\n        }\n        return undefined;\n    }\n\n    private resetTime() {\n        this._startTime = Date.now();\n    }\n\n    get timestamp() {\n        return Date.now() - this._startTime;\n    }\n\n    get minConsolePriority(): ConsolePriority {\n        return this._minConsolePriority;\n    }\n\n    set minConsolePriority(priority: ConsolePriority) {\n        if (priority !== this._minConsolePriority) {\n            this._minConsolePriority = priority;\n        }\n    }\n\n    private pingLoggers() {\n        if (this._minConsolePriority < ConsolePriority.Silent) {\n            const pkt = Packet.packed(CMD_CONSOLE_SET_MIN_PRIORITY, \"i\", [this._minConsolePriority]);\n            pkt.sendAsMultiCommandAsync(this, SRV_LOGGER);\n        }\n    }\n\n    sendPacketAsync(p: Packet) {\n        this.emit(PACKET_SEND, p);\n        return this.options?.sendPacketAsync(p) || Promise.resolve();\n    }\n\n    get connecting() {\n        return !!this._connectPromise;\n    }\n\n    get connected() {\n        return this._connected;\n    }\n\n    errorHandler(context: string, exception: any) {\n        this.emit(ERROR, { context, exception })\n    }\n\n    connectAsync(): Promise<void> {\n        // already connected\n        if (this._connected)\n            return Promise.resolve();\n        // connecting\n        if (!this._connectPromise) {\n            this._connected = false;\n            this._connectPromise = Promise.resolve();\n            this.emit(CONNECTING);\n            const connectAsyncPromise = this.options?.connectAsync() || Promise.resolve();\n            this._connectPromise = connectAsyncPromise\n                .then(() => {\n                    this._connectPromise = undefined;\n                    this._connected = true;\n                    this.emit(CONNECT);\n                })\n                .catch(e => {\n                    this.errorHandler(CONNECT, e);\n                    this._connected = false;\n                    this._connectPromise = undefined;\n                    this.emit(DISCONNECT);\n                })\n        }\n        return this._connectPromise;\n    }\n\n    async disconnectAsync(): Promise<void> {\n        if (!this._connected) return Promise.resolve();\n\n        if (this._connectPromise)\n            throw new Error(\"trying to disconnect while connecting\");\n        this._connected = false;\n        if (this._gcInterval) {\n            clearInterval(this._gcInterval);\n            this._gcInterval = undefined;\n        }\n        try {\n            this.options?.disconnectAsync();\n        } catch (e) {\n            this.errorHandler(DISCONNECT, e)\n        }\n        finally {\n            this.emit(DISCONNECT);\n        }\n    }\n\n    /**\n     * Gets the current list of known devices on the bus\n     */\n    devices(options?: { serviceName?: string, serviceClass?: number }) {\n        if (options?.serviceName && options?.serviceClass > -1)\n            throw Error(\"serviceClass and serviceName cannot be used together\")\n        let sc = serviceClass(options?.serviceName);\n        if (sc === undefined) sc = options?.serviceClass;\n        if (sc === undefined) sc = -1;\n\n\n        let r = this._devices.slice();\n        if (sc > -1) r = r.filter(s => s.hasService(sc))\n        return r;\n    }\n\n    /**\n     * Gets a device on the bus\n     * @param id \n     */\n    device(id: string) {\n        let d = this._devices.find(d => d.deviceId == id)\n        if (!d) {\n            d = new Device(this, id)\n            this._devices.push(d);\n            this.emit(DEVICE_CONNECT, d);\n\n            if (!this._gcInterval && this.connected)\n                this._gcInterval = setInterval(() => this.gcDevices(), 2000);\n        }\n        return d\n    }\n\n    private gcDevices() {\n        const cutoff = this.timestamp - 2000;\n        for (let i = 0; i < this._devices.length; ++i) {\n            const dev = this._devices[i]\n            if (dev.lastSeen < cutoff) {\n                this._devices.splice(i, 1)\n                i--\n                dev.disconnect();\n                this.emit(DEVICE_DISCONNECT, dev);\n            }\n        }\n    }\n\n    /**\n     * Ingests and process a packet received from the bus.\n     * @param pkt a jacdac packet\n     */\n    processPacket(pkt: Packet) {\n        this.emit(PACKET_PROCESS, pkt)\n        let isAnnounce = false\n        if (pkt.multicommand_class) {\n            //\n        } else if (pkt.is_command) {\n            pkt.dev = this.device(pkt.device_identifier)\n            pkt.dev.processPacket(pkt);\n        } else {\n            const dev = pkt.dev = this.device(pkt.device_identifier)\n            dev.lastSeen = pkt.timestamp\n\n            if (pkt.service_number == JD_SERVICE_NUMBER_CTRL) {\n                if (pkt.service_command == CMD_ADVERTISEMENT_DATA) {\n                    isAnnounce = true\n                    dev.processAnnouncement(pkt)\n                }\n            } else\n                pkt.dev.processPacket(pkt);\n        }\n        // don't spam with duplicate advertisement events\n        if (!isAnnounce) {\n            this.emit(PACKET_RECEIVE, pkt)\n            if (pkt.is_report)\n                this.emit(PACKET_REPORT, pkt)\n            if (pkt.is_command && pkt.service_command === CMD_EVENT)\n                this.emit(PACKET_EVENT, pkt);\n        }\n    }\n\n    /**\n     * Tries to find the given device by id\n     * @param id \n     */\n    lookupName(id: string) {\n        return this._deviceNames[id];\n    }\n\n    log(msg: any) {\n        if (this._minConsolePriority > ConsolePriority.Log)\n            return\n        console.log(msg);\n    }\n}\n","import React, { useState } from \"react\";\nimport JacdacContext from \"./Context\";\nimport { Bus } from \"../../../src/dom/bus\";\nimport { createUSBBus } from \"../../../src/dom/usb\";\nimport { DISCONNECT, CONNECTING, CONNECT } from \"../../../src/dom/constants\";\n\nconst JacdacProvider = ({ children }) => {\n    const [bus] = useState<Bus>(createUSBBus());\n    const [connected, setConnected] = useState(bus.connected);\n    const [connecting, setConnecting] = useState(bus.connecting);\n    bus.on(CONNECT, () => setConnected(bus.connected))\n    bus.on(CONNECTING, () => setConnecting(bus.connecting))\n    bus.on(DISCONNECT, () => setConnected(bus.connected))\n\n    const connectAsync = () => bus.connectAsync();\n    const disconnectAsync = () => bus.disconnectAsync();\n    return (\n        <JacdacContext.Provider value={{ bus, connected, connecting, connectAsync, disconnectAsync }}>\n            {children}\n        </JacdacContext.Provider>\n    )\n}\n\nexport default JacdacProvider;\n","import { Transport, Proto } from \"./hf2\";\nimport { Bus } from \"./bus\";\nimport { Packet } from \"./packet\";\n\nexport interface UsbBusOptions {\n    requestDevice?: (options: USBDeviceRequestOptions) => Promise<USBDevice>\n}\n\nexport function createUSBBus(options?: UsbBusOptions): Bus {\n    let requestDevice = options?.requestDevice;\n    if (!requestDevice && typeof navigator !== \"undefined\" && navigator.usb && navigator.usb.requestDevice) {\n        requestDevice = options => navigator.usb.requestDevice(options);\n    }\n\n    let hf2: Proto;\n    const bus = new Bus({\n        connectAsync: () => {\n            if (hf2) return Promise.resolve();\n            const transport = new Transport(requestDevice);\n            hf2 = new Proto(transport);\n            const onJDMessage = (buf: Uint8Array) => {\n                const pkts = Packet.fromFrame(buf, bus.timestamp)\n                for (const pkt of pkts)\n                    bus.processPacket(pkt);\n            }\n            return hf2.init().then(() => hf2.onJDMessage(onJDMessage))\n        },\n        sendPacketAsync: p => {\n            const buf = p.toBuffer();\n            return hf2.sendJDMessageAsync(buf)\n                .then(() => { }, err => console.log(err));\n        },\n        disconnectAsync: () => {\n            const h = hf2;\n            hf2 = undefined;\n            return h.disconnectAsync();\n        }\n    });\n\n    return bus;\n}","import { Link } from \"gatsby\"\nimport PropTypes from \"prop-types\"\nimport React from \"react\"\n\nconst Header = ({ siteTitle }) => (\n  <header\n    style={{\n      background: `rebeccapurple`,\n      marginBottom: `1.45rem`,\n    }}\n  >\n    <div\n      style={{\n        margin: `0 auto`,\n        maxWidth: 960,\n        padding: `1.45rem 1.0875rem`,\n      }}\n    >\n      <h1 style={{ margin: 0 }}>\n        <Link\n          to=\"/\"\n          style={{\n            color: `white`,\n            textDecoration: `none`,\n          }}\n        >\n          {siteTitle}\n        </Link>\n      </h1>\n    </div>\n  </header>\n)\n\nHeader.propTypes = {\n  siteTitle: PropTypes.string,\n}\n\nHeader.defaultProps = {\n  siteTitle: ``,\n}\n\nexport default Header\n","/**\n * Layout component that queries for data\n * with Gatsby's useStaticQuery component\n *\n * See: https://www.gatsbyjs.org/docs/use-static-query/\n */\n\nimport React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { useStaticQuery, graphql } from \"gatsby\"\nimport JacdacProvider from \"../jacdac/Provider\"\n\nimport Header from \"./header\"\n// tslint:disable-next-line: no-import-side-effect\nimport \"./layout.css\"\nimport { Typography } from \"@material-ui/core\"\n\nconst Layout = ({ children }) => {\n  const data = useStaticQuery(graphql`\n    query SiteTitleQuery {\n      site {\n        siteMetadata {\n          title\n        }\n      }\n    }\n  `)\n  return (\n    <JacdacProvider>\n      <Typography>\n        <Header siteTitle={data.site.siteMetadata.title} />\n        <div\n          style={{\n            margin: `0 auto`,\n            maxWidth: 960,\n            padding: `0 1.0875rem 1.45rem`,\n          }}\n        >\n          <main>{children}</main>\n          <footer>\n             {new Date().getFullYear()} Microsoft Corporation\n        </footer>\n        </div>\n      </Typography>\n    </JacdacProvider>\n  )\n}\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n","// 20.2.2.18 Math.imul(x, y)\nvar $export = require('./_export');\nvar $imul = Math.imul;\n\n// some WebKit versions fails with big numbers, some has wrong arity\n$export($export.S + $export.F * require('./_fails')(function () {\n  return $imul(0xffffffff, 5) != -5 || $imul.length != 2;\n}), 'Math', {\n  imul: function imul(x, y) {\n    var UINT16 = 0xffff;\n    var xn = +x;\n    var yn = +y;\n    var xl = UINT16 & xn;\n    var yl = UINT16 & yn;\n    return 0 | xl * yl + ((UINT16 & xn >>> 16) * yl + xl * (UINT16 & yn >>> 16) << 16 >>> 0);\n  }\n});\n","// https://tc39.github.io/ecma262/#sec-toindex\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toInteger(it);\n  var length = toLength(number);\n  if (number !== length) throw RangeError('Wrong length!');\n  return length;\n};\n","var global = require('./_global');\nvar hide = require('./_hide');\nvar uid = require('./_uid');\nvar TYPED = uid('typed_array');\nvar VIEW = uid('view');\nvar ABV = !!(global.ArrayBuffer && global.DataView);\nvar CONSTR = ABV;\nvar i = 0;\nvar l = 9;\nvar Typed;\n\nvar TypedArrayConstructors = (\n  'Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'\n).split(',');\n\nwhile (i < l) {\n  if (Typed = global[TypedArrayConstructors[i++]]) {\n    hide(Typed.prototype, TYPED, true);\n    hide(Typed.prototype, VIEW, true);\n  } else CONSTR = false;\n}\n\nmodule.exports = {\n  ABV: ABV,\n  CONSTR: CONSTR,\n  TYPED: TYPED,\n  VIEW: VIEW\n};\n","// 26.1.2 Reflect.construct(target, argumentsList [, newTarget])\nvar $export = require('./_export');\nvar create = require('./_object-create');\nvar aFunction = require('./_a-function');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar fails = require('./_fails');\nvar bind = require('./_bind');\nvar rConstruct = (require('./_global').Reflect || {}).construct;\n\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(rConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\nvar ARGS_BUG = !fails(function () {\n  rConstruct(function () { /* empty */ });\n});\n\n$export($export.S + $export.F * (NEW_TARGET_BUG || ARGS_BUG), 'Reflect', {\n  construct: function construct(Target, args /* , newTarget */) {\n    aFunction(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return rConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      $args.push.apply($args, args);\n      return new (bind.apply(Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : Object.prototype);\n    var result = Function.apply.call(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","// Python-like packing, see https://docs.python.org/3/library/struct.html\n\nimport { NumberFormat, setNumber, getNumber, sizeOfNumberFormat } from \"./buffer\"\n\nexport function packedSize(format: string) {\n    return packUnpackCore(format, null, null, true)\n}\n\nexport function pack(format: string, nums: number[]) {\n    let buf = new Uint8Array(packedSize(format))\n    packUnpackCore(format, nums, buf, true)\n    return buf\n}\n\n\nexport function unpack(buf: Uint8Array, format: string, offset?: number) {\n    if (!offset) offset = 0\n    const res: number[] = []\n    packUnpackCore(format, res, buf, false, offset)\n    return res\n}\n\nfunction getFormat(pychar: string, isBig: boolean) {\n    switch (pychar) {\n        case 'B':\n            return NumberFormat.UInt8LE\n        case 'b':\n            return NumberFormat.Int8LE\n        case 'H':\n            return isBig ? NumberFormat.UInt16BE : NumberFormat.UInt16LE\n        case 'h':\n            return isBig ? NumberFormat.Int16BE : NumberFormat.Int16LE\n        case 'I':\n        case 'L':\n            return isBig ? NumberFormat.UInt32BE : NumberFormat.UInt32LE\n        case 'i':\n        case 'l':\n            return isBig ? NumberFormat.Int32BE : NumberFormat.Int32LE\n        case 'f':\n            return isBig ? NumberFormat.Float32BE : NumberFormat.Float32LE\n        case 'd':\n            return isBig ? NumberFormat.Float64BE : NumberFormat.Float64LE\n        default:\n            return null as NumberFormat\n    }\n}\n\nfunction isDigit(ch: string) {\n    const code = ch.charCodeAt(0)\n    return 0x30 <= code && code <= 0x39\n}\n\nfunction packUnpackCore(format: string, nums: number[], buf: Uint8Array, isPack: boolean, off = 0) {\n    let isBig = false\n    let idx = 0\n    for (let i = 0; i < format.length; ++i) {\n        switch (format[i]) {\n            case ' ':\n            case '<':\n            case '=':\n                isBig = false\n                break\n            case '>':\n            case '!':\n                isBig = true\n                break\n            case 'x':\n                off++\n                break\n            default:\n                const i0 = i\n                while (isDigit(format[i])) i++\n                let reps = 1\n                if (i0 != i)\n                    reps = parseInt(format.slice(i0, i))\n                while (reps--) {\n                    let fmt = getFormat(format[i], isBig)\n                    if (fmt === null) {\n                        throw new Error(\"Unsupported format character: \" + format[i])\n                    } else {\n                        if (buf) {\n                            if (isPack)\n                                setNumber(buf, fmt, off, nums[idx++])\n                            else\n                                nums.push(getNumber(buf, fmt, off))\n                        }\n\n                        off += sizeOfNumberFormat(fmt)\n                    }\n                }\n                break\n        }\n    }\n    return off\n}\n\nexport function bufferOfInt(value: number): Uint8Array {\n    return pack(\"i\", [value | 0])\n}\n","\nexport function error(msg: string) {\n    throw new Error(msg)\n}\n\nexport function log(msg: string, v?: any) {\n    if (v === undefined)\n        console.log(\"JD: \" + msg)\n    else\n        console.log(\"JD: \" + msg, v)\n}\n\nexport function warn(msg: string, v?: any) {\n    if (v === undefined)\n        console.log(\"JD-WARN: \" + msg)\n    else\n        console.log(\"JD-WARN: \" + msg, v)\n}\n\nexport function delay<T>(millis: number, value?: T): Promise<T> {\n    return new Promise((resolve) => setTimeout(() => resolve(value), millis))\n}\n\nexport function memcpy(trg: Uint8Array, trgOff: number, src: ArrayLike<number>, srcOff?: number, len?: number) {\n    if (srcOff === void 0)\n        srcOff = 0\n    if (len === void 0)\n        len = src.length - srcOff\n    for (let i = 0; i < len; ++i)\n        trg[trgOff + i] = src[srcOff + i]\n}\n\nexport function bufferEq(a: Uint8Array, b: ArrayLike<number>) {\n    if (a == b)\n        return true\n    if (!a || !b || a.length != b.length)\n        return false\n    for (let i = 0; i < a.length; ++i) {\n        if (a[i] != b[i]) return false\n    }\n    return true\n}\n\nexport function hash(buf: Uint8Array, bits: number) {\n    bits |= 0\n    if (bits < 1)\n        return 0\n    const h = fnv1(buf)\n    if (bits >= 32)\n        return h >>> 0\n    else\n        return ((h ^ (h >>> bits)) & ((1 << bits) - 1)) >>> 0\n}\n\nexport function idiv(a: number, b: number) { return ((a | 0) / (b | 0)) | 0 }\nexport function fnv1(data: Uint8Array) {\n    let h = 0x811c9dc5\n    for (let i = 0; i < data.length; ++i) {\n        h = Math.imul(h, 0x1000193) ^ data[i]\n    }\n    return h\n}\n\nexport function crc(p: Uint8Array) {\n    let crc = 0xffff;\n    for (let i = 0; i < p.length; ++i) {\n        const data = p[i];\n        let x = (crc >> 8) ^ data;\n        x ^= x >> 4;\n        crc = (crc << 8) ^ (x << 12) ^ (x << 5) ^ x;\n        crc &= 0xffff;\n    }\n    return crc;\n}\n\nexport function ALIGN(n: number) { return (n + 3) & ~3 }\n\n// this will take lower 8 bits from each character\nexport function stringToUint8Array(input: string) {\n    let len = input.length;\n    let res = new Uint8Array(len)\n    for (let i = 0; i < len; ++i)\n        res[i] = input.charCodeAt(i) & 0xff;\n    return res;\n}\n\nexport function uint8ArrayToString(input: ArrayLike<number>) {\n    let len = input.length;\n    let res = \"\"\n    for (let i = 0; i < len; ++i)\n        res += String.fromCharCode(input[i]);\n    return res;\n}\n\n\nexport function fromUTF8(binstr: string) {\n    if (!binstr) return \"\"\n\n    // escape function is deprecated\n    let escaped = \"\"\n    for (let i = 0; i < binstr.length; ++i) {\n        let k = binstr.charCodeAt(i) & 0xff\n        if (k == 37 || k > 0x7f) {\n            escaped += \"%\" + k.toString(16);\n        } else {\n            escaped += binstr.charAt(i)\n        }\n    }\n\n    // decodeURIComponent does the actual UTF8 decoding\n    return decodeURIComponent(escaped)\n}\n\nexport function toUTF8(str: string, cesu8?: boolean) {\n    let res = \"\";\n    if (!str) return res;\n    for (let i = 0; i < str.length; ++i) {\n        let code = str.charCodeAt(i);\n        if (code <= 0x7f) res += str.charAt(i);\n        else if (code <= 0x7ff) {\n            res += String.fromCharCode(0xc0 | (code >> 6), 0x80 | (code & 0x3f));\n        } else {\n            if (!cesu8 && 0xd800 <= code && code <= 0xdbff) {\n                let next = str.charCodeAt(++i);\n                if (!isNaN(next))\n                    code = 0x10000 + ((code - 0xd800) << 10) + (next - 0xdc00);\n            }\n\n            if (code <= 0xffff)\n                res += String.fromCharCode(0xe0 | (code >> 12), 0x80 | ((code >> 6) & 0x3f), 0x80 | (code & 0x3f));\n            else\n                res += String.fromCharCode(0xf0 | (code >> 18), 0x80 | ((code >> 12) & 0x3f), 0x80 | ((code >> 6) & 0x3f), 0x80 | (code & 0x3f));\n        }\n\n    }\n    return res;\n}\n\n\nexport interface SMap<T> {\n    [index: string]: T;\n}\n\nexport class PromiseBuffer<T> {\n    private waiting: ((v: (T | Error)) => void)[] = [];\n    private available: (T | Error)[] = [];\n\n    drain() {\n        for (let f of this.waiting) {\n            f(new Error(\"Promise Buffer Reset\"))\n        }\n        this.waiting = []\n        this.available = []\n    }\n\n\n    pushError(v: Error) {\n        this.push(v as any)\n    }\n\n    push(v: T) {\n        let f = this.waiting.shift()\n        if (f) f(v)\n        else this.available.push(v)\n    }\n\n    shiftAsync(timeout = 0) {\n        if (this.available.length > 0) {\n            let v = this.available.shift()\n            if (v instanceof Error)\n                return Promise.reject<T>(v)\n            else\n                return Promise.resolve<T>(v)\n        } else\n            return new Promise<T>((resolve, reject) => {\n                let f = (v: (T | Error)) => {\n                    if (v instanceof Error) reject(v)\n                    else resolve(v)\n                }\n                this.waiting.push(f)\n                if (timeout > 0) {\n                    delay(timeout)\n                        .then(() => {\n                            let idx = this.waiting.indexOf(f)\n                            if (idx >= 0) {\n                                this.waiting.splice(idx, 1)\n                                reject(new Error(\"Timeout\"))\n                            }\n                        })\n                }\n            })\n    }\n}\n\n\nexport class PromiseQueue {\n    promises: SMap<(() => Promise<any>)[]> = {};\n\n    enqueue<T>(id: string, f: () => Promise<T>): Promise<T> {\n        return new Promise<T>((resolve, reject) => {\n            let arr = this.promises[id]\n            if (!arr) {\n                arr = this.promises[id] = []\n            }\n            const cleanup = () => {\n                arr.shift()\n                if (arr.length == 0)\n                    delete this.promises[id]\n                else\n                    arr[0]()\n            }\n            arr.push(() =>\n                f().then(v => {\n                    cleanup()\n                    resolve(v)\n                }, err => {\n                    cleanup()\n                    reject(err)\n                }))\n            if (arr.length == 1)\n                arr[0]()\n        })\n    }\n}\n\nexport function toHex(bytes: ArrayLike<number>) {\n    let r = \"\"\n    for (let i = 0; i < bytes.length; ++i)\n        r += (\"0\" + bytes[i].toString(16)).slice(-2)\n    return r\n}\n\nexport function fromHex(hex: string) {\n    let r = new Uint8Array(hex.length >> 1)\n    for (let i = 0; i < hex.length; i += 2)\n        r[i >> 1] = parseInt(hex.slice(i, i + 2), 16)\n    return r\n}\n\nexport interface MutableArrayLike<T> {\n    readonly length: number;\n    [n: number]: T;\n}\n\nexport function write32(buf: MutableArrayLike<number>, pos: number, v: number) {\n    buf[pos + 0] = (v >> 0) & 0xff;\n    buf[pos + 1] = (v >> 8) & 0xff;\n    buf[pos + 2] = (v >> 16) & 0xff;\n    buf[pos + 3] = (v >> 24) & 0xff;\n}\n\nexport function write16(buf: MutableArrayLike<number>, pos: number, v: number) {\n    buf[pos + 0] = (v >> 0) & 0xff;\n    buf[pos + 1] = (v >> 8) & 0xff;\n}\n\nexport function read32(buf: ArrayLike<number>, pos: number) {\n    return (buf[pos] | (buf[pos + 1] << 8) | (buf[pos + 2] << 16) | (buf[pos + 3] << 24)) >>> 0\n}\n\nexport function read16(buf: ArrayLike<number>, pos: number) {\n    return buf[pos] | (buf[pos + 1] << 8)\n}\n\nexport function encodeU32LE(words: number[]) {\n    let r = new Uint8Array(words.length * 4)\n    for (let i = 0; i < words.length; ++i)\n        write32(r, i * 4, words[i])\n    return r\n}\n\nexport function decodeU32LE(buf: Uint8Array) {\n    let res: number[] = []\n    for (let i = 0; i < buf.length; i += 4)\n        res.push(read32(buf, i))\n    return res\n}\n\nexport function bufferToString(buf: Uint8Array) {\n    return fromUTF8(uint8ArrayToString(buf))\n}\n\nexport function bufferConcat(a: Uint8Array, b: Uint8Array) {\n    const r = new Uint8Array(a.length + b.length)\n    r.set(a, 0)\n    r.set(b, a.length)\n    return r\n}\n\nexport function jsonCopyFrom<T>(trg: T, src: T) {\n    let v = clone(src)\n    for (let k of Object.keys(src)) {\n        (trg as any)[k] = (v as any)[k]\n    }\n}\nexport function assert(cond: boolean, msg = \"Assertion failed\") {\n    if (!cond) {\n        debugger\n        throw new Error(msg)\n    }\n}\n\nexport function flatClone<T extends Object>(obj: T): T {\n    if (obj == null) return null\n    let r: any = {}\n    Object.keys(obj).forEach((k) => { r[k] = (obj as any)[k] })\n    return r;\n}\n\nexport function clone<T>(v: T): T {\n    if (v == null) return null\n    return JSON.parse(JSON.stringify(v))\n}\n\nexport function debounceAsync(handler: () => Promise<void>, delay: number): () => void {\n    let timeOutId: any;\n    return function () {\n        if (timeOutId) {\n            clearTimeout(timeOutId);\n        }\n        timeOutId = setTimeout(async () => {\n            await handler();\n        }, delay);\n    }\n}\n\nexport interface DebouncedPoll {\n    execute: () => void;\n    stop: () => void;\n}\n\n/**\n * Creates a debounced polls the handler, use stop to any polling interval\n * @param handler \n * @param delay \n * @param pollDelay \n */\nexport function debouncedPollAsync(handler: () => Promise<void>, delay: number, pollDelay: number): DebouncedPoll {\n    const debounced = debounceAsync(handler, delay);\n    let interval\n\n    const poll = () => {\n        if (!interval)\n            interval = setInterval(() => debounced(), pollDelay)\n    }\n\n    const execute = () => {\n        poll()\n        debounced()\n    }\n\n    const stop = () => {\n        if (interval) {\n            clearInterval(interval);\n            interval = undefined;\n        }\n    }\n\n    poll()\n    return { execute, stop }\n}\n","require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","import { formatMuiErrorMessage as _formatMuiErrorMessage } from \"@material-ui/utils\"; // It should to be noted that this function isn't equivalent to `text-transform: capitalize`.\n//\n// A strict capitalization should uppercase the first letter of each word a the sentence.\n// We only handle the first word.\n\nexport default function capitalize(string) {\n  if (typeof string !== 'string') {\n    throw new Error(process.env.NODE_ENV !== \"production\" ? \"Material-UI: capitalize(string) expects a string argument.\" : _formatMuiErrorMessage(7));\n  }\n\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","\n// Registers 0x001-0x07f - r/w common to all services\n// Registers 0x080-0x0ff - r/w defined per-service\n// Registers 0x100-0x17f - r/o common to all services\n// Registers 0x180-0x1ff - r/o defined per-service\n// Registers 0x200-0xeff - custom, defined per-service\n// Registers 0xf00-0xfff - reserved for implementation, should not be on the wire\n\n// this is either binary (0 or non-zero), or can be gradual (eg. brightness of neopixel)\nexport const REG_INTENSITY = 0x01\n// the primary value of actuator (eg. servo angle)\nexport const REG_VALUE = 0x02\n// enable/disable streaming\nexport const REG_IS_STREAMING = 0x03\n// streaming interval in miliseconds\nexport const REG_STREAMING_INTERVAL = 0x04\n// for analog sensors\nexport const REG_LOW_THRESHOLD = 0x05\nexport const REG_HIGH_THRESHOLD = 0x06\n// limit power drawn; in mA\nexport const REG_MAX_POWER = 0x07\n\n// eg. one number for light sensor, all 3 coordinates for accelerometer\nexport const REG_READING = 0x101\n\nexport const CMD_GET_REG = 0x1000\nexport const CMD_SET_REG = 0x2000\n\nexport const CMD_TOP_MASK = 0xf000\nexport const CMD_REG_MASK = 0x0fff\n\n\n// Commands 0x000-0x07f - common to all services\n// Commands 0x080-0xeff - defined per-service\n// Commands 0xf00-0xfff - reserved for implementation\n// enumeration data for CTRL, ad-data for other services\nexport const CMD_ADVERTISEMENT_DATA = 0x00\n// event from sensor or on broadcast service\nexport const CMD_EVENT = 0x01\n// request to calibrate sensor\nexport const CMD_CALIBRATE = 0x02\n// request human-readable description of service\nexport const CMD_GET_DESCRIPTION = 0x03\n\n// Commands specific to control service\n// do nothing\nexport const CMD_CTRL_NOOP = 0x80\n// blink led or otherwise draw user's attention\nexport const CMD_CTRL_IDENTIFY = 0x81\n// reset device\nexport const CMD_CTRL_RESET = 0x82\n\nexport const CMD_CONSOLE_REG = 0x80\nexport const CMD_CONSOLE_MESSAGE_DBG = 0x80\nexport const CMD_CONSOLE_SET_MIN_PRIORITY = 0x2000 | CMD_CONSOLE_REG\n\nexport const STREAM_PORT_SHIFT = 7\nexport const STREAM_COUNTER_MASK = 0x001f\nexport const STREAM_CLOSE_MASK = 0x0020\nexport const STREAM_METADATA_MASK = 0x0040\n\nexport const JD_SERIAL_HEADER_SIZE = 16\nexport const JD_SERIAL_MAX_PAYLOAD_SIZE = 236\nexport const JD_SERVICE_NUMBER_MASK = 0x3f\nexport const JD_SERVICE_NUMBER_INV_MASK = 0xc0\nexport const JD_SERVICE_NUMBER_CRC_ACK = 0x3f\nexport const JD_SERVICE_NUMBER_STREAM = 0x3e\nexport const JD_SERVICE_NUMBER_CTRL = 0x00\n\n// the COMMAND flag signifies that the device_identifier is the recipent\n// (i.e., it's a command for the peripheral); the bit clear means device_identifier is the source\n// (i.e., it's a report from peripheral or a broadcast message)\nexport const JD_FRAME_FLAG_COMMAND = 0x01\n// an ACK should be issued with CRC of this package upon reception\nexport const JD_FRAME_FLAG_ACK_REQUESTED = 0x02\n// the device_identifier contains target service class number\nexport const JD_FRAME_FLAG_IDENTIFIER_IS_SERVICE_CLASS = 0x04\n\nexport const JD_ADVERTISEMENT_0_COUNTER_MASK = 0x0000000F\nexport const JD_ADVERTISEMENT_0_ACK_SUPPORTED = 0x00000100\n\nexport enum ConsolePriority {\n    Debug = 0,\n    Log = 1,\n    Warning = 2,\n    Error = 3,\n    Silent = 4\n}\n\n/** known service numbers */\nexport const SRV_CTRL = 0;\nexport const SRV_LOGGER = 0x12dc1fca;\nexport const SRV_BATTERY = 0x1d2a2acd;\nexport const SRV_ACCELEROMETER = 0x1f140409;\nexport const SRV_BUTTON = 0x1473a263;\nexport const SRV_TOUCHBUTTON = 0x130cf5be;\nexport const SRV_LIGHT_SENSOR = 0x15e7a0ff;\nexport const SRV_MICROPHONE = 0x1a5c5866;\nexport const SRV_THERMOMETER = 0x1421bac7;\nexport const SRV_SWITCH = 0x14218172;\nexport const SRV_PIXEL = 0x1768fbbf;\nexport const SRV_HAPTIC = 0x116b14a3;\nexport const SRV_LIGHT = 0x126f00e0;\nexport const SRV_KEYBOARD = 0x1ae4812d;\nexport const SRV_MOUSE = 0x14bc97bf;\nexport const SRV_GAMEPAD = 0x100527e8;\nexport const SRV_MUSIC = 0x1b57b1d7;\nexport const SRV_SERVO = 0x12fc9103;\nexport const SRV_CONTROLLER = 0x188ae4b8;\nexport const SRV_LCD = 0x18d5284c;\nexport const SRV_MESSAGE_BUS = 0x115cabf5;\nexport const SRV_COLOR_SENSOR = 0x14d6dda2;\nexport const SRV_LIGHT_SPECTRUM_SENSOR = 0x16fa0c0d;\nexport const SRV_PROXIMITY = 0x14c1791b;\nexport const SRV_TOUCH_BUTTONS = 0x1acb49d5;\nexport const SRV_SERVOS = 0x182988d8;\nexport const SRV_ROTARY_ENCODER = 0x10fa29c9;\nexport const SRV_DNS = 0x117729bd;\nexport const SRV_PWM_LIGHT = 0x1fb57453;\nexport const SRV_BOOTLOADER = 0x1ffa9948;\nexport const SRV_ARCADE_CONTROLS = 0x1deaa06e;\nexport const SRV_POWER = 0x1fa4c95a;\nexport const SRV_SLIDER = 0x1f274746;\nexport const SRV_MOTOR = 0x17004cd8;\nexport const SRV_TCP = 0x1b43b70b;\nexport const SRV_WIFI = 0x18aae1fa;\n\nexport const NEW_LISTENER = 'newListener'\nexport const REMOVE_LISTENER = 'removeListener'\n\nexport const CONNECT = 'connect';\nexport const CONNECTING = 'connecting';\nexport const DISCONNECT = 'disconnect';\nexport const ANNOUNCE = 'announce'\nexport const RESTART = 'restart'\n\nexport const DEVICE_CONNECT = 'deviceConnect'\nexport const DEVICE_DISCONNECT = 'deviceDisconnect'\nexport const DEVICE_ANNOUNCE = 'deviceAnnounce'\nexport const DEVICE_RESTART = 'deviceRestart'\n\nexport const PACKET_SEND = 'packetSend'\n\nexport const PACKET_PROCESS = 'packetProcess'\nexport const PACKET_RECEIVE = 'packetReceive'\nexport const PACKET_EVENT = 'packetEvent'\nexport const PACKET_REPORT = 'packetReport'\n\nexport const REPORT_RECEIVE = 'reportReceive'\nexport const REPORT_UPDATE = 'reportUpdate'\n\nexport const ERROR = 'error'\n","require('./_typed-array')('Float64', 8, function (init) {\n  return function Float64Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","require('./_typed-array')('Float32', 4, function (init) {\n  return function Float32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","import { read16, read32 } from \"./utils\";\n\nexport enum NumberFormat {\n    Int8LE = 1,\n    UInt8LE = 2,\n    Int16LE = 3,\n    UInt16LE = 4,\n    Int32LE = 5,\n    Int8BE = 6,\n    UInt8BE = 7,\n    Int16BE = 8,\n    UInt16BE = 9,\n    Int32BE = 10,\n    UInt32LE = 11,\n    UInt32BE = 12,\n    Float32LE = 13,\n    Float64LE = 14,\n    Float32BE = 15,\n    Float64BE = 16,\n}\n\nfunction fmtInfoCore(fmt: NumberFormat) {\n    switch (fmt) {\n        case NumberFormat.Int8LE: return -1;\n        case NumberFormat.UInt8LE: return 1;\n        case NumberFormat.Int16LE: return -2;\n        case NumberFormat.UInt16LE: return 2;\n        case NumberFormat.Int32LE: return -4;\n        case NumberFormat.UInt32LE: return 4;\n        case NumberFormat.Int8BE: return -10;\n        case NumberFormat.UInt8BE: return 10;\n        case NumberFormat.Int16BE: return -20;\n        case NumberFormat.UInt16BE: return 20;\n        case NumberFormat.Int32BE: return -40;\n        case NumberFormat.UInt32BE: return 40;\n\n        case NumberFormat.Float32LE: return 4;\n        case NumberFormat.Float32BE: return 40;\n        case NumberFormat.Float64LE: return 8;\n        case NumberFormat.Float64BE: return 80;\n        default: throw new Error(\"unknown format\");\n    }\n}\n\nfunction fmtInfo(fmt: NumberFormat) {\n    let size = fmtInfoCore(fmt)\n    let signed = false\n    if (size < 0) {\n        signed = true\n        size = -size\n    }\n    let swap = false\n    if (size >= 10) {\n        swap = true\n        size /= 10\n    }\n    let isFloat = fmt >= NumberFormat.Float32LE\n    return { size, signed, swap, isFloat }\n}\n\n/**\n * Get the size in bytes of specified number format.\n */\nexport function sizeOfNumberFormat(format: NumberFormat) {\n    switch (format) {\n        case NumberFormat.Int8LE:\n        case NumberFormat.UInt8LE:\n        case NumberFormat.Int8BE:\n        case NumberFormat.UInt8BE:\n            return 1;\n        case NumberFormat.Int16LE:\n        case NumberFormat.UInt16LE:\n        case NumberFormat.Int16BE:\n        case NumberFormat.UInt16BE:\n            return 2;\n        case NumberFormat.Int32LE:\n        case NumberFormat.Int32BE:\n        case NumberFormat.UInt32BE:\n        case NumberFormat.UInt32LE:\n        case NumberFormat.Float32BE:\n        case NumberFormat.Float32LE:\n            return 4;\n        case NumberFormat.Float64BE:\n        case NumberFormat.Float64LE:\n            return 8;\n    }\n    return 0;\n}\n\nexport function getNumber(buf: ArrayLike<number>, fmt: NumberFormat, offset: number) {\n    switch (fmt) {\n        case NumberFormat.UInt8BE:\n        case NumberFormat.UInt8LE:\n            return buf[offset]\n        case NumberFormat.Int8BE:\n        case NumberFormat.Int8LE:\n            return (buf[offset] << 24) >> 24\n        case NumberFormat.UInt16LE:\n            return read16(buf, offset)\n        case NumberFormat.Int16LE:\n            return (read16(buf, offset) << 16) >> 16\n        case NumberFormat.UInt32LE:\n            return read32(buf, offset)\n        case NumberFormat.Int32LE:\n            return read32(buf, offset) >> 0\n        default:\n            throw new Error(\"unsupported fmt:\" + fmt)\n    }\n}\n\nexport function setNumber(buf: Uint8Array, fmt: NumberFormat, offset: number, r: number) {\n    let inf = fmtInfo(fmt)\n    if (inf.isFloat) {\n        let arr = new Uint8Array(inf.size)\n        if (inf.size == 4)\n            new Float32Array(arr.buffer)[0] = r\n        else\n            new Float64Array(arr.buffer)[0] = r\n        if (inf.swap)\n            arr.reverse()\n        for (let i = 0; i < inf.size; ++i) {\n            buf[offset + i] = arr[i]\n        }\n        return\n    }\n\n    for (let i = 0; i < inf.size; ++i) {\n        let off = !inf.swap ? offset + i : offset + inf.size - i - 1\n        buf[off] = (r & 0xff)\n        r >>= 8\n    }\n}\n\nexport function intOfBuffer(data: Uint8Array) {\n    let fmt: NumberFormat\n    switch (data.length) {\n        case 0:\n        case 1:\n            fmt = NumberFormat.Int8LE\n            break\n        case 2:\n        case 3:\n            fmt = NumberFormat.Int16LE\n            break\n        default:\n            fmt = NumberFormat.Int32LE\n            break\n    }\n    return getNumber(data, fmt, 0)\n}\n\nexport function bufferToArray(data: Uint8Array, fmt: NumberFormat) {\n    const res: number[] = []\n    const sz = sizeOfNumberFormat(fmt)\n    for (let off = 0; off <= data.length - sz; off += sz)\n        res.push(getNumber(data, fmt, off))\n    return res\n}\n\nexport function concatBufferArray(chunks: Uint8Array[]) {\n    let sz = 0\n    for (const ch of chunks) sz += ch.length\n    const r = new Uint8Array(sz)\n    sz = 0\n    for (const ch of chunks) {\n        r.set(ch, sz)\n        sz += ch.length\n    }\n    return r\n}\n","require(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar runtime = function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n    return generator;\n  }\n\n  exports.wrap = wrap; // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n\n  var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n\n\n  var IteratorPrototype = {};\n\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\n  if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\"; // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      prototype[method] = function (arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function (genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can\n    // do is to check its .name property.\n    (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n  };\n\n  exports.mark = function (genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  }; // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n\n\n  exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n\n        if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function (value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function (err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function (unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function (error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = // If enqueue has been called before, then we want to wait until\n      // all previous Promises have been resolved before calling invoke,\n      // so that results are always delivered in the correct order. If\n      // enqueue has not been called before, then it is important to\n      // call invoke immediately, without waiting on a callback to fire,\n      // so that the async generator function has the opportunity to do\n      // any necessary setup in a predictable way. This predictability\n      // is why the Promise constructor synchronously invokes its\n      // executor callback, and why async functions synchronously\n      // execute code before the first await. Since we implement simple\n      // async functions in terms of async generators, it is especially\n      // important to get this right, even though it requires care.\n      previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later\n      // invocations of the iterator.\n      callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    } // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n\n\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n\n  exports.AsyncIterator = AsyncIterator; // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n\n  exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n    : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        } // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n        var record = tryCatch(innerFn, self, context);\n\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted; // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  } // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (!info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n      context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    } // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n\n\n    context.delegate = null;\n    return ContinueSentinel;\n  } // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n\n\n  defineIteratorMethods(Gp);\n  Gp[toStringTagSymbol] = \"Generator\"; // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n\n  Gp[iteratorSymbol] = function () {\n    return this;\n  };\n\n  Gp.toString = function () {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    keys.reverse(); // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      } // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n\n\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n          return next;\n        };\n\n        return next.next = next;\n      }\n    } // Return an iterator with no values.\n\n\n    return {\n      next: doneResult\n    };\n  }\n\n  exports.values = values;\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: true\n    };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      this.prev = 0;\n      this.next = 0; // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n      this.method = \"next\";\n      this.arg = undefined;\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n    stop: function stop() {\n      this.done = true;\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" || record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      } // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  }; // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n\n  return exports;\n}( // If this script is executing as a CommonJS module, use module.exports\n// as the regeneratorRuntime namespace. Otherwise create a new empty\n// object. Either way, the resulting object will be used to initialize\n// the regeneratorRuntime variable at the top of this file.\ntypeof module === \"object\" ? module.exports : {});\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}","module.exports = require(\"regenerator-runtime\");\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport capitalize from '../utils/capitalize';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      margin: 0\n    },\n\n    /* Styles applied to the root element if `variant=\"body2\"`. */\n    body2: theme.typography.body2,\n\n    /* Styles applied to the root element if `variant=\"body1\"`. */\n    body1: theme.typography.body1,\n\n    /* Styles applied to the root element if `variant=\"caption\"`. */\n    caption: theme.typography.caption,\n\n    /* Styles applied to the root element if `variant=\"button\"`. */\n    button: theme.typography.button,\n\n    /* Styles applied to the root element if `variant=\"h1\"`. */\n    h1: theme.typography.h1,\n\n    /* Styles applied to the root element if `variant=\"h2\"`. */\n    h2: theme.typography.h2,\n\n    /* Styles applied to the root element if `variant=\"h3\"`. */\n    h3: theme.typography.h3,\n\n    /* Styles applied to the root element if `variant=\"h4\"`. */\n    h4: theme.typography.h4,\n\n    /* Styles applied to the root element if `variant=\"h5\"`. */\n    h5: theme.typography.h5,\n\n    /* Styles applied to the root element if `variant=\"h6\"`. */\n    h6: theme.typography.h6,\n\n    /* Styles applied to the root element if `variant=\"subtitle1\"`. */\n    subtitle1: theme.typography.subtitle1,\n\n    /* Styles applied to the root element if `variant=\"subtitle2\"`. */\n    subtitle2: theme.typography.subtitle2,\n\n    /* Styles applied to the root element if `variant=\"overline\"`. */\n    overline: theme.typography.overline,\n\n    /* Styles applied to the root element if `variant=\"srOnly\"`. Only accessible to screen readers. */\n    srOnly: {\n      position: 'absolute',\n      height: 1,\n      width: 1,\n      overflow: 'hidden'\n    },\n\n    /* Styles applied to the root element if `align=\"left\"`. */\n    alignLeft: {\n      textAlign: 'left'\n    },\n\n    /* Styles applied to the root element if `align=\"center\"`. */\n    alignCenter: {\n      textAlign: 'center'\n    },\n\n    /* Styles applied to the root element if `align=\"right\"`. */\n    alignRight: {\n      textAlign: 'right'\n    },\n\n    /* Styles applied to the root element if `align=\"justify\"`. */\n    alignJustify: {\n      textAlign: 'justify'\n    },\n\n    /* Styles applied to the root element if `nowrap={true}`. */\n    noWrap: {\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap'\n    },\n\n    /* Styles applied to the root element if `gutterBottom={true}`. */\n    gutterBottom: {\n      marginBottom: '0.35em'\n    },\n\n    /* Styles applied to the root element if `paragraph={true}`. */\n    paragraph: {\n      marginBottom: 16\n    },\n\n    /* Styles applied to the root element if `color=\"inherit\"`. */\n    colorInherit: {\n      color: 'inherit'\n    },\n\n    /* Styles applied to the root element if `color=\"primary\"`. */\n    colorPrimary: {\n      color: theme.palette.primary.main\n    },\n\n    /* Styles applied to the root element if `color=\"secondary\"`. */\n    colorSecondary: {\n      color: theme.palette.secondary.main\n    },\n\n    /* Styles applied to the root element if `color=\"textPrimary\"`. */\n    colorTextPrimary: {\n      color: theme.palette.text.primary\n    },\n\n    /* Styles applied to the root element if `color=\"textSecondary\"`. */\n    colorTextSecondary: {\n      color: theme.palette.text.secondary\n    },\n\n    /* Styles applied to the root element if `color=\"error\"`. */\n    colorError: {\n      color: theme.palette.error.main\n    },\n\n    /* Styles applied to the root element if `display=\"inline\"`. */\n    displayInline: {\n      display: 'inline'\n    },\n\n    /* Styles applied to the root element if `display=\"block\"`. */\n    displayBlock: {\n      display: 'block'\n    }\n  };\n};\nvar defaultVariantMapping = {\n  h1: 'h1',\n  h2: 'h2',\n  h3: 'h3',\n  h4: 'h4',\n  h5: 'h5',\n  h6: 'h6',\n  subtitle1: 'h6',\n  subtitle2: 'h6',\n  body1: 'p',\n  body2: 'p'\n};\nvar Typography = /*#__PURE__*/React.forwardRef(function Typography(props, ref) {\n  var _props$align = props.align,\n      align = _props$align === void 0 ? 'inherit' : _props$align,\n      classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'initial' : _props$color,\n      component = props.component,\n      _props$display = props.display,\n      display = _props$display === void 0 ? 'initial' : _props$display,\n      _props$gutterBottom = props.gutterBottom,\n      gutterBottom = _props$gutterBottom === void 0 ? false : _props$gutterBottom,\n      _props$noWrap = props.noWrap,\n      noWrap = _props$noWrap === void 0 ? false : _props$noWrap,\n      _props$paragraph = props.paragraph,\n      paragraph = _props$paragraph === void 0 ? false : _props$paragraph,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'body1' : _props$variant,\n      _props$variantMapping = props.variantMapping,\n      variantMapping = _props$variantMapping === void 0 ? defaultVariantMapping : _props$variantMapping,\n      other = _objectWithoutProperties(props, [\"align\", \"classes\", \"className\", \"color\", \"component\", \"display\", \"gutterBottom\", \"noWrap\", \"paragraph\", \"variant\", \"variantMapping\"]);\n\n  var Component = component || (paragraph ? 'p' : variantMapping[variant] || defaultVariantMapping[variant]) || 'span';\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    className: clsx(classes.root, className, variant !== 'inherit' && classes[variant], color !== 'initial' && classes[\"color\".concat(capitalize(color))], noWrap && classes.noWrap, gutterBottom && classes.gutterBottom, paragraph && classes.paragraph, align !== 'inherit' && classes[\"align\".concat(capitalize(align))], display !== 'initial' && classes[\"display\".concat(capitalize(display))]),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default withStyles(styles, {\n  name: 'MuiTypography'\n})(Typography);","import * as U from \"./utils\"\nimport * as jd from \"./constants\"\nimport { Packet } from \"./packet\"\nimport { Device } from \"./device\"\nimport { intOfBuffer } from \"./buffer\"\nimport { unpack } from \"./struct\"\n\nconst service_classes: U.SMap<number> = {\n    \"<disabled>\": -1,\n    CTRL: 0,\n    LOGGER: jd.SRV_LOGGER,\n    BATTERY: jd.SRV_BATTERY,\n    ACCELEROMETER: jd.SRV_ACCELEROMETER,\n    BUTTON: jd.SRV_BUTTON,\n    TOUCHBUTTON: jd.SRV_TOUCHBUTTON,\n    LIGHT_SENSOR: jd.SRV_LIGHT_SENSOR,\n    MICROPHONE: jd.SRV_MICROPHONE,\n    THERMOMETER: jd.SRV_THERMOMETER,\n    SWITCH: jd.SRV_SWITCH,\n    PIXEL: jd.SRV_PIXEL,\n    HAPTIC: jd.SRV_HAPTIC,\n    LIGHT: jd.SRV_LIGHT,\n    KEYBOARD: jd.SRV_KEYBOARD,\n    MOUSE: jd.SRV_MOUSE,\n    GAMEPAD: jd.SRV_GAMEPAD,\n    MUSIC: jd.SRV_MUSIC,\n    SERVO: jd.SRV_SERVO,\n    CONTROLLER: jd.SRV_CONTROLLER,\n    LCD: jd.SRV_LCD,\n    MESSAGE_BUS: jd.SRV_MESSAGE_BUS,\n    COLOR_SENSOR: jd.SRV_COLOR_SENSOR,\n    LIGHT_SPECTRUM_SENSOR: jd.SRV_LIGHT_SPECTRUM_SENSOR,\n    PROXIMITY: jd.SRV_PROXIMITY,\n    TOUCH_BUTTONS: jd.SRV_TOUCH_BUTTONS,\n    SERVOS: jd.SRV_SERVOS,\n    ROTARY_ENCODER: jd.SRV_ROTARY_ENCODER,\n    DNS: jd.SRV_DNS,\n    PWM_LIGHT: jd.SRV_PWM_LIGHT,\n    BOOTLOADER: jd.SRV_BOOTLOADER,\n    ARCADE_CONTROLS: jd.SRV_ARCADE_CONTROLS,\n    POWER: jd.SRV_POWER,\n    SLIDER: jd.SRV_SLIDER,\n    MOTOR: jd.SRV_MOTOR,\n    TCP: jd.SRV_TCP,\n    WIFI: jd.SRV_WIFI,\n}\n\nconst generic_commands: U.SMap<number> = {\n    CMD_ADVERTISEMENT_DATA: 0x00,\n    CMD_EVENT: 0x01,\n    CMD_CALIBRATE: 0x02,\n    CMD_GET_DESCRIPTION: 0x03,\n    /*\n    CMD_CTRL_NOOP: 0x80,\n    CMD_CTRL_IDENTIFY: 0x81,\n    CMD_CTRL_RESET: 0x82,\n    */\n}\n\nconst generic_regs: U.SMap<number> = {\n    REG_INTENSITY: 0x01,\n    REG_VALUE: 0x02,\n    REG_IS_STREAMING: 0x03,\n    REG_STREAMING_INTERVAL: 0x04,\n    REG_LOW_THRESHOLD: 0x05,\n    REG_HIGH_THRESHOLD: 0x06,\n    REG_MAX_POWER: 0x07,\n    REG_READING: 0x101\n}\n\nfunction decodeIntSensorData(pkt: Packet) {\n    const value = intOfBuffer(pkt.data)\n    return value.toString();\n}\n\nfunction decodeBootloader(pkt: Packet) {\n    if (pkt.service_command == 0x80) {\n        if (pkt.is_command) {\n            const [pageAddr, suboff, currsubpage, maxSubpage, session] = unpack(pkt.data, \"IHBBI\")\n            const hdsize = 4 * 7\n            return `write page=${toHex(pageAddr)}+${suboff} ${currsubpage}/${maxSubpage} session=${toHex(session)} data=` +\n                U.toHex(pkt.data.slice(hdsize, hdsize + 10)) + \"...\"\n        } else {\n            const [sess, berr, pageAddr] = unpack(pkt.data, \"III\")\n            return `status page=${toHex(pageAddr)} session=${toHex(sess)} err=${toHex(berr)}`\n        }\n    } else if (pkt.service_command == 0x81) {\n        return `set session ${toHex(pkt.uintData)}`\n    } else if (pkt.service_command == 0x00) {\n        const [magic, pageSize, flashSize, devClass] = unpack(pkt.data, \"4I\")\n        return `magic:${toHex(magic)} pageSize:${pageSize} flashSize:${flashSize} devClass:${toHex(devClass)}`\n    } else {\n        return null\n    }\n}\n\nconst serv_decoders: U.SMap<(p: Packet) => string> = {\n    LOGGER: (pkt: Packet) => {\n        const pri = priority()\n        if (!pri) return null\n        return `${pri} \"${U.bufferToString(pkt.data)}\"`\n\n        function priority() {\n            switch (pkt.service_command) {\n                case 0x80: return \"dbg\"\n                case 0x81: return \"log\"\n                case 0x82: return \"warn\"\n                case 0x83: return \"err\"\n                default: return null\n            }\n        }\n    },\n    SLIDER: decodeIntSensorData,\n    THERMOMETER: decodeIntSensorData,\n    POWER: decodeIntSensorData,\n    BUTTON: decodeIntSensorData,\n    ROTARY_ENCODER: decodeIntSensorData,\n    BATTERY: decodeIntSensorData,\n    BOOTLOADER: decodeBootloader,\n}\n\nexport function decodePacketData(pkt: Packet): string {\n    const srv_class = pkt?.multicommand_class || pkt?.dev?.serviceClassAt(pkt.service_number);\n    const serv_id = serviceName(srv_class);\n    const decoder = serv_decoders[serv_id];\n    const decoded = decoder ? decoder(pkt) : null\n    return decoded;\n}\n\nfunction reverseLookup(map: U.SMap<number>, n: number) {\n    for (let k of Object.keys(map)) {\n        if (map[k] == n)\n            return k\n    }\n    return toHex(n)\n}\n\nexport function serviceClass(name: string) {\n    return service_classes[(name || \"\").toUpperCase()];\n}\n\nexport function serviceName(n: number) {\n    if (n == null)\n        return \"?\"\n    return reverseLookup(service_classes, n)\n}\n\nexport function deviceServiceName(pkt: Packet): string {\n    const srv_class = pkt?.dev?.serviceClassAt(pkt.service_number);\n    const serv_id = serviceName(srv_class);\n    return `${pkt?.dev?.shortId || \"?\"}/${serv_id}:${pkt.service_number}`\n}\n\nexport function commandName(n: number) {\n    let pref = \"\"\n    if ((n & jd.CMD_TOP_MASK) == jd.CMD_SET_REG) pref = \"SET[\"\n    else if ((n & jd.CMD_TOP_MASK) == jd.CMD_GET_REG) pref = \"GET[\"\n    if (pref) {\n        const reg = n & jd.CMD_REG_MASK\n        return pref + reverseLookup(generic_regs, reg) + \"]\"\n    }\n    return reverseLookup(generic_commands, n)\n}\n\nfunction toHex(n: number) {\n    return \"0x\" + n.toString(16)\n}\n\nfunction num2str(n: number) {\n    return n + \" (0x\" + n.toString(16) + \")\"\n}\n\nexport interface Options {\n    skipRepeatedAnnounce?: boolean;\n    skipRepeatedReading?: boolean;\n}\n\nexport function printServices(device: Device) {\n    let srv = \"\"\n    const n = device.serviceLength;\n    for (let i = 0; i < n; ++i) {\n        const id = device.serviceClassAt(i);\n        const name = `${i}:${serviceName(id)}`;\n        if (i) srv += \", \"\n        srv += name;\n    }\n    return srv;\n}\n\nexport function printPacket(pkt: Packet, opts: Options = {}): string {\n    const frame_flags = pkt._header[3]\n\n    let devname = pkt.dev ? pkt.dev.name || pkt.dev.shortId : pkt.device_identifier\n\n    if (frame_flags & jd.JD_FRAME_FLAG_IDENTIFIER_IS_SERVICE_CLASS)\n        devname = \"[multicmd]\"\n\n    const serv_id = serviceName(pkt?.multicommand_class || pkt?.dev?.serviceClassAt(pkt.service_number))\n    let service_name = `${serv_id} (${pkt.service_number})`\n    const cmd = pkt.service_command\n    let cmdname = commandName(cmd)\n    if (pkt.service_number == jd.JD_SERVICE_NUMBER_CRC_ACK) {\n        service_name = \"CRC-ACK\"\n        cmdname = toHex(cmd)\n    }\n    if (pkt.service_number == jd.JD_SERVICE_NUMBER_STREAM) {\n        service_name = \"STREAM\"\n        cmdname = `port:${cmd >> jd.STREAM_PORT_SHIFT} cnt:${cmd & jd.STREAM_COUNTER_MASK}`\n        if (cmd & jd.STREAM_METADATA_MASK)\n            cmdname += \" meta\"\n        if (cmd & jd.STREAM_CLOSE_MASK)\n            cmdname += \" close\"\n    }\n\n    let pdesc = `${devname}/${service_name}: ${cmdname}; sz=${pkt.size}`\n\n    if (frame_flags & jd.JD_FRAME_FLAG_COMMAND)\n        pdesc = 'to ' + pdesc\n    else\n        pdesc = 'from ' + pdesc\n    if (frame_flags & jd.JD_FRAME_FLAG_ACK_REQUESTED)\n        pdesc = `[ack:${toHex(pkt.crc)}] ` + pdesc\n\n    const d = pkt.data\n    if (pkt.dev && pkt.service_number == 0 && pkt.service_command == jd.CMD_ADVERTISEMENT_DATA) {\n        if (pkt.dev.lastServiceUpdate < pkt.timestamp) {\n            if (opts.skipRepeatedAnnounce)\n                return \"\"\n            else\n                pdesc = \" ====== \" + pdesc\n        } else {\n            const services = []\n            for (const sc of pkt.dev.serviceClasses)\n                services.push(serviceName(sc))\n            pdesc += \"; \" + \"Announce services: \" + services.join(\", \")\n        }\n    } else {\n        if (pkt.dev && !pkt.is_command && pkt.service_command == (jd.CMD_GET_REG | jd.REG_READING)) {\n            if (opts.skipRepeatedReading && pkt.dev.currentReading && U.bufferEq(pkt.dev.currentReading, pkt.data))\n                return \"\"\n            pkt.dev.currentReading = pkt.data\n        }\n\n        const decoder = serv_decoders[serv_id]\n        const decoded = decoder ? decoder(pkt) : null\n        if (decoded) {\n            pdesc += \"; \" + decoded\n        } else if (pkt.service_command == jd.CMD_EVENT) {\n            pdesc += \"; ev=\" + num2str(pkt.intData) + \" arg=\" + (U.read32(pkt.data, 4) | 0)\n        } else if (0 < d.length && d.length <= 4) {\n            let v0 = pkt.uintData, v1 = pkt.intData\n            pdesc += \"; \" + num2str(v0)\n            if (v0 != v1)\n                pdesc += \"; signed: \" + num2str(v1)\n        } else if (d.length) {\n            pdesc += \"; \" + U.toHex(d)\n        }\n    }\n\n    return (!isNaN(pkt.timestamp) ? Math.round(pkt.timestamp) + \"ms: \" : \"\") + pdesc\n}\n","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\n\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = toLength(O.length);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = Math.min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else delete O[to];\n    to += inc;\n    from += inc;\n  } return O;\n};\n","require(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n!function (global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    } // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n\n\n    return;\n  } // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n\n\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n    return generator;\n  }\n\n  runtime.wrap = wrap; // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n\n  var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n\n\n  var IteratorPrototype = {};\n\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\n  if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\"; // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      prototype[method] = function (arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function (genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can\n    // do is to check its .name property.\n    (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n  };\n\n  runtime.mark = function (genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  }; // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n\n\n  runtime.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n\n        if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function (value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function (err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function (unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = // If enqueue has been called before, then we want to wait until\n      // all previous Promises have been resolved before calling invoke,\n      // so that results are always delivered in the correct order. If\n      // enqueue has not been called before, then it is important to\n      // call invoke immediately, without waiting on a callback to fire,\n      // so that the async generator function has the opportunity to do\n      // any necessary setup in a predictable way. This predictability\n      // is why the Promise constructor synchronously invokes its\n      // executor callback, and why async functions synchronously\n      // execute code before the first await. Since we implement simple\n      // async functions in terms of async generators, it is especially\n      // important to get this right, even though it requires care.\n      previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later\n      // invocations of the iterator.\n      callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    } // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n\n\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n\n  runtime.AsyncIterator = AsyncIterator; // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n\n  runtime.async = function (innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList));\n    return runtime.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n    : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        } // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n        var record = tryCatch(innerFn, self, context);\n\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted; // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  } // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (!info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n      context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    } // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n\n\n    context.delegate = null;\n    return ContinueSentinel;\n  } // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n\n\n  defineIteratorMethods(Gp);\n  Gp[toStringTagSymbol] = \"Generator\"; // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n\n  Gp[iteratorSymbol] = function () {\n    return this;\n  };\n\n  Gp.toString = function () {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    keys.reverse(); // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      } // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n\n\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n          return next;\n        };\n\n        return next.next = next;\n      }\n    } // Return an iterator with no values.\n\n\n    return {\n      next: doneResult\n    };\n  }\n\n  runtime.values = values;\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: true\n    };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      this.prev = 0;\n      this.next = 0; // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n      this.method = \"next\";\n      this.arg = undefined;\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n    stop: function stop() {\n      this.done = true;\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" || record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      } // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n}( // In sloppy mode, unbound `this` refers to the global object, fallback to\n// Function constructor if we're in global strict mode. That is sadly a form\n// of indirect eval which violates Content Security Policy.\nfunction () {\n  return this;\n}() || Function(\"return this\")());","import { createContext } from \"react\";\nimport { Bus } from \"../../../src/dom/bus\";\n\nconst JacdacContext = createContext<{\n    bus: Bus,\n    connected: boolean,\n    connecting: boolean,\n    connectAsync: () => Promise<void>,\n    disconnectAsync: () => Promise<void>\n}>({\n    bus: undefined,\n    connected: false,\n    connecting: false,\n    connectAsync: undefined,\n    disconnectAsync: undefined\n});\nJacdacContext.displayName = \"jacdac\";\n\nexport default JacdacContext;"],"sourceRoot":""}