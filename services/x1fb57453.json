{
  "name": "LED",
  "status": "experimental",
  "shortId": "led",
  "camelName": "led",
  "shortName": "led",
  "extends": [
    "_base"
  ],
  "notes": {
    "short": "A controller for 1 or more LEDs connected in parallel.",
    "long": "## Animation steps\n\nAnimations are described using pairs of intensity and duration.\nFor example, the following animation\n`(0, 10ms), (0.5, 5ms), (0.5, 10ms), (1, 5ms), (0, 7ms), (0, 0ms)`\nwill gradually rise the intensity `0 - 0.5` in 10ms,\nthen, it will keep it steady for at `0.5` for 5ms,\nthen it will rise it again `0.5 - 1` over 10ms,\ndrop `1 - 0` in 5ms,\nand keep it at 0 for 7ms more.\nAny entry with duration of 0ms is considered to be end-marker.\n\nTo get steady glow at `x`, use animation of `(x, 60000ms), (x, 0ms)` and keep `max_iterations` at `0xffff`."
  },
  "classIdentifier": 531985491,
  "enums": {},
  "packets": [
    {
      "kind": "ro",
      "name": "status_code",
      "identifier": 259,
      "description": "Reports the current state or error status of the device. ``code`` is a standardized value from \nthe JACDAC status/error codes. ``vendor_code`` is any vendor specific error code describing the device\nstate. This report is typically not queried, when a device has an error, it will typically\nadd this report in frame along with the announce packet.",
      "fields": [
        {
          "name": "code",
          "unit": "",
          "type": "u16",
          "storage": 2,
          "isSimpleType": true
        },
        {
          "name": "vendor_code",
          "unit": "",
          "type": "u16",
          "storage": 2,
          "isSimpleType": true
        }
      ],
      "optional": true,
      "identifierName": "status_code",
      "packFormat": "u16 u16",
      "derived": "_base"
    },
    {
      "kind": "event",
      "name": "status_code_changed",
      "identifier": 4,
      "description": "Notifies that the status code of the service changed.",
      "fields": [
        {
          "name": "code",
          "unit": "",
          "type": "u16",
          "storage": 2,
          "isSimpleType": true
        },
        {
          "name": "vendor_code",
          "unit": "",
          "type": "u16",
          "storage": 2,
          "isSimpleType": true
        }
      ],
      "optional": true,
      "identifierName": "status_code_changed",
      "packFormat": "u16 u16",
      "derived": "_base"
    },
    {
      "kind": "rw",
      "name": "brightness",
      "identifier": 1,
      "description": "Set the luminosity of the strip. The value is used to scale `start_intensity` in `steps` register.\nAt `0` the power to the strip is completely shut down.",
      "fields": [
        {
          "name": "_",
          "unit": "/",
          "shift": 16,
          "type": "u0.16",
          "storage": 2
        }
      ],
      "identifierName": "intensity",
      "packFormat": "u0.16"
    },
    {
      "kind": "rw",
      "name": "max_power",
      "identifier": 7,
      "description": "Limit the power drawn by the light-strip (and controller).",
      "fields": [
        {
          "name": "_",
          "unit": "mA",
          "type": "u16",
          "storage": 2,
          "isSimpleType": true,
          "defaultValue": 100
        }
      ],
      "identifierName": "max_power",
      "packFormat": "u16"
    },
    {
      "kind": "const",
      "name": "max_steps",
      "identifier": 384,
      "description": "Maximum number of steps allowed in animation definition. This determines the size of the `steps` register.",
      "fields": [
        {
          "name": "_",
          "unit": "",
          "type": "u8",
          "storage": 1,
          "isSimpleType": true
        }
      ],
      "packFormat": "u8"
    },
    {
      "kind": "rw",
      "name": "steps",
      "identifier": 130,
      "description": "The steps of current animation. Setting this also sets `current_iteration` to `0`.\nStep with `duration == 0` is treated as an end marker.",
      "fields": [
        {
          "name": "start_intensity",
          "unit": "/",
          "shift": 16,
          "type": "u0.16",
          "storage": 2,
          "startRepeats": true
        },
        {
          "name": "duration",
          "unit": "ms",
          "type": "u16",
          "storage": 2,
          "isSimpleType": true
        }
      ],
      "packFormat": "r: u0.16 u16"
    },
    {
      "kind": "rw",
      "name": "current_iteration",
      "identifier": 128,
      "description": "Currently excecuting iteration of animation. Can be set to `0` to restart current animation.\nIf `current_iteration > max_iterations`, then no animation is currently running.",
      "fields": [
        {
          "name": "_",
          "unit": "",
          "type": "u16",
          "storage": 2,
          "isSimpleType": true
        }
      ],
      "packFormat": "u16"
    },
    {
      "kind": "rw",
      "name": "max_iterations",
      "identifier": 129,
      "description": "The animation will be repeated `max_iterations + 1` times.",
      "fields": [
        {
          "name": "_",
          "unit": "",
          "type": "u16",
          "storage": 2,
          "isSimpleType": true,
          "defaultValue": 65535
        }
      ],
      "packFormat": "u16"
    }
  ]
}