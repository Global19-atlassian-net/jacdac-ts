{"version":3,"sources":["webpack:///./node_modules/core-js/modules/_typed-array.js","webpack:///./node_modules/core-js/modules/_typed-buffer.js","webpack:///../src/utils.ts","webpack:///../src/hf2.ts","webpack:///../src/constants.ts","webpack:///../src/buffer.ts","webpack:///../src/struct.ts","webpack:///../src/packet.ts","webpack:///../src/device.ts","webpack:///../src/bus.ts","webpack:///../src/eventemitter.ts","webpack:///./src/jacdac/Provider.tsx","webpack:///../src/webusb.ts","webpack:///./src/components/header.js","webpack:///./src/components/layout.tsx","webpack:///./node_modules/core-js/modules/es6.math.imul.js","webpack:///./node_modules/core-js/modules/_to-index.js","webpack:///./node_modules/core-js/modules/_typed.js","webpack:///./node_modules/core-js/modules/es6.typed.uint8-array.js","webpack:///./node_modules/core-js/modules/_array-fill.js","webpack:///./node_modules/core-js/modules/es6.typed.float64-array.js","webpack:///./node_modules/core-js/modules/es6.typed.float32-array.js","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./node_modules/core-js/modules/_array-copy-within.js","webpack:///../node_modules/regenerator-runtime/runtime.js","webpack:///./src/jacdac/Context.tsx"],"names":["LIBRARY","global","fails","$export","$typed","$buffer","ctx","anInstance","propertyDesc","hide","redefineAll","toInteger","toLength","toIndex","toAbsoluteIndex","toPrimitive","has","classof","isObject","toObject","isArrayIter","create","getPrototypeOf","gOPN","f","getIterFn","uid","wks","createArrayMethod","createArrayIncludes","speciesConstructor","ArrayIterators","Iterators","$iterDetect","setSpecies","arrayFill","arrayCopyWithin","$DP","$GOPD","dP","gOPD","RangeError","TypeError","Uint8Array","ArrayProto","Array","$ArrayBuffer","ArrayBuffer","$DataView","DataView","arrayForEach","arrayFilter","arraySome","arrayEvery","arrayFind","arrayFindIndex","arrayIncludes","arrayIndexOf","arrayValues","values","arrayKeys","keys","arrayEntries","entries","arrayLastIndexOf","lastIndexOf","arrayReduce","reduce","arrayReduceRight","reduceRight","arrayJoin","join","arraySort","sort","arraySlice","slice","arrayToString","toString","arrayToLocaleString","toLocaleString","ITERATOR","TAG","TYPED_CONSTRUCTOR","DEF_CONSTRUCTOR","ALL_CONSTRUCTORS","CONSTR","TYPED_ARRAY","TYPED","VIEW","$map","O","length","allocate","LITTLE_ENDIAN","Uint16Array","buffer","FORCED_SET","set","toOffset","it","BYTES","offset","validate","C","speciesFromList","list","fromList","index","result","addGetter","key","internal","get","this","_d","$from","source","i","step","iterator","aLen","arguments","mapfn","undefined","mapping","iterFn","call","next","done","push","value","$of","TO_LOCALE_BUG","$toLocaleString","apply","proto","copyWithin","target","start","every","callbackfn","fill","filter","find","predicate","findIndex","forEach","indexOf","searchElement","includes","separator","map","reverse","middle","Math","floor","some","comparefn","subarray","begin","end","$begin","byteOffset","BYTES_PER_ELEMENT","$slice","$set","arrayLike","src","len","$iterators","isTAIndex","String","$getDesc","$setDesc","desc","configurable","writable","enumerable","S","F","getOwnPropertyDescriptor","defineProperty","$TypedArrayPrototype$","constructor","module","exports","KEY","wrapper","CLAMPED","NAME","GETTER","SETTER","TypedArray","Base","TAC","FORCED","ABV","TypedArrayPrototype","addElement","that","data","v","o","getter","round","setter","$offset","$length","byteLength","klass","$len","b","l","e","iter","Function","prototype","concat","$nativeIterator","CORRECT_ITER_NAME","name","$iterator","G","W","of","from","P","DESCRIPTORS","setToStringTag","Infinity","BaseBuffer","abs","pow","log","LN2","$BUFFER","$LENGTH","$OFFSET","packIEEE754","mLen","nBytes","m","c","eLen","eMax","eBias","rt","s","unpackIEEE754","nBits","NaN","unpackI32","bytes","packI8","packI16","packI32","packF64","packF32","view","isLittleEndian","intIndex","store","_b","pack","conversion","ArrayBufferProto","j","$setInt8","setInt8","getInt8","setUint8","bufferLength","getUint8","getInt16","getUint16","getInt32","getUint32","getFloat32","getFloat64","setInt16","setUint16","setInt32","setUint32","setFloat32","setFloat64","warn","msg","console","delay","millis","Promise","resolve","setTimeout","memcpy","trg","trgOff","srcOff","hash","buf","bits","h","imul","fnv1","idiv","a","crc","p","x","PromiseBuffer","waiting","available","drain","Error","pushError","shift","shiftAsync","timeout","reject","then","idx","splice","PromiseQueue","promises","enqueue","id","arr","cleanup","err","toHex","r","fromHex","hex","parseInt","write32","pos","write16","read32","read16","bufferToString","binstr","escaped","k","charCodeAt","charAt","decodeURIComponent","fromUTF8","input","res","fromCharCode","uint8ArrayToString","bufferConcat","assert","cond","ConsolePriority","Transport","requestDevice","readLoopStarted","ready","onData","onError","error","stack","clearDev","dev","epIn","epOut","disconnectAsync","close","catch","U","recvPacketAsync","final","status","transferIn","endpointNumber","controlTransferIn","requestType","recipient","request","iface","interfaceNumber","productName","readLoop","sendPacketAsync","pkt","transferOut","controlTransferOut","init","filters","classCode","subclassCode","altIface","manufacturerName","configuration","interfaces","alt","alternates","interfaceClass","interfaceSubclass","open","selectConfiguration","endpoints","direction","packetSize","claimInterface","Proto","io","eventHandlers","msgs","cmdSeq","random","lock","frames","tp","frame","onSerial","total","ptr","handleEvent","talkAsync","cmd","seq","numSkipped","handleReturnAsync","info","sendMsgAsync","serial","loop","onEvent","onJDMessage","words","sendJDMessageAsync","evid","iserr","NumberFormat","fmtInfo","fmt","size","Int8LE","UInt8LE","Int16LE","UInt16LE","Int32LE","UInt32LE","Int8BE","UInt8BE","Int16BE","UInt16BE","Int32BE","UInt32BE","Float32LE","Float32BE","Float64LE","Float64BE","fmtInfoCore","signed","swap","isFloat","sizeOfNumberFormat","format","getNumber","setNumber","inf","Float32Array","Float64Array","nums","packUnpackCore","packedSize","getFormat","pychar","isBig","isPack","off","ch","code","i0","reps","Packet","fromBinary","_header","_data","service_command","onlyHeader","toBuffer","compress","stripped","sz","withFrameStripped","device_identifier","service_number","frame_flags","sendCoreAsync","bus","sendReportAsync","deviceId","sendCmdAsync","sendAsMultiCommandAsync","service_class","JD_FRAME_FLAG_IDENTIFIER_IS_SERVICE_CLASS","fromFrame","timestamp","computed","actual","psz","frameToPackets","packed","idb","ack","requires_ack","serviceClassAt","CMD_SET_REG","is_command","Device","connected","shortId","hasService","services","sendCtrlCommand","payload","disconnect","lookupName","devid","_shortId","n","serviceLength","Bus","options","_connected","_devices","_deviceNames","_minConsolePriority","Log","resetTime","on","pingLoggers","_startTime","Date","now","Silent","emit","errorHandler","context","exception","connectAsync","_connectPromise","connectAsyncPromise","_gcInterval","clearInterval","devices","device","d","setInterval","gcDevices","cutoff","lastSeen","processPacket","multicommand_class","bufferEq","lastServiceUpdate","priority","handlers","type","handler","hs","evt","JacdacProvider","children","useState","hf2","navigator","usb","transport","createUSBBus","setConnected","connecting","Provider","Header","siteTitle","style","background","marginBottom","margin","maxWidth","padding","to","color","textDecoration","Layout","site","siteMetadata","title","getFullYear","$imul","y","xn","yn","xl","yl","number","Typed","TypedArrayConstructors","split","endPos","runtime","Op","Object","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","state","method","arg","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","fn","obj","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","object","pop","skipTempReset","prev","stop","rootRecord","rval","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","count","min","inc","inModule","JacdacContext","React","createContext"],"mappings":"6FACA,GAAI,EAAQ,QAAmB,CAC7B,IAAIA,EAAU,EAAQ,QAClBC,EAAS,EAAQ,QACjBC,EAAQ,EAAQ,QAChBC,EAAU,EAAQ,QAClBC,EAAS,EAAQ,QACjBC,EAAU,EAAQ,QAClBC,EAAM,EAAQ,QACdC,EAAa,EAAQ,QACrBC,EAAe,EAAQ,QACvBC,EAAO,EAAQ,QACfC,EAAc,EAAQ,QACtBC,EAAY,EAAQ,QACpBC,EAAW,EAAQ,QACnBC,EAAU,EAAQ,QAClBC,EAAkB,EAAQ,QAC1BC,EAAc,EAAQ,QACtBC,EAAM,EAAQ,QACdC,EAAU,EAAQ,QAClBC,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAc,EAAQ,QACtBC,EAAS,EAAQ,QACjBC,EAAiB,EAAQ,QACzBC,EAAO,EAAQ,QAAkBC,EACjCC,EAAY,EAAQ,QACpBC,EAAM,EAAQ,QACdC,EAAM,EAAQ,QACdC,EAAoB,EAAQ,QAC5BC,EAAsB,EAAQ,QAC9BC,EAAqB,EAAQ,QAC7BC,EAAiB,EAAQ,QACzBC,EAAY,EAAQ,QACpBC,EAAc,EAAQ,QACtBC,EAAa,EAAQ,QACrBC,EAAY,EAAQ,QACpBC,EAAkB,EAAQ,QAC1BC,EAAM,EAAQ,QACdC,EAAQ,EAAQ,QAChBC,EAAKF,EAAIb,EACTgB,EAAOF,EAAMd,EACbiB,EAAaxC,EAAOwC,WACpBC,EAAYzC,EAAOyC,UACnBC,EAAa1C,EAAO0C,WAKpBC,EAAaC,MAAe,UAC5BC,EAAezC,EAAQ0C,YACvBC,EAAY3C,EAAQ4C,SACpBC,EAAetB,EAAkB,GACjCuB,EAAcvB,EAAkB,GAChCwB,EAAYxB,EAAkB,GAC9ByB,EAAazB,EAAkB,GAC/B0B,EAAY1B,EAAkB,GAC9B2B,GAAiB3B,EAAkB,GACnC4B,GAAgB3B,GAAoB,GACpC4B,GAAe5B,GAAoB,GACnC6B,GAAc3B,EAAe4B,OAC7BC,GAAY7B,EAAe8B,KAC3BC,GAAe/B,EAAegC,QAC9BC,GAAmBpB,EAAWqB,YAC9BC,GAActB,EAAWuB,OACzBC,GAAmBxB,EAAWyB,YAC9BC,GAAY1B,EAAW2B,KACvBC,GAAY5B,EAAW6B,KACvBC,GAAa9B,EAAW+B,MACxBC,GAAgBhC,EAAWiC,SAC3BC,GAAsBlC,EAAWmC,eACjCC,GAAWrD,EAAI,YACfsD,GAAMtD,EAAI,eACVuD,GAAoBxD,EAAI,qBACxByD,GAAkBzD,EAAI,mBACtB0D,GAAmBhF,EAAOiF,OAC1BC,GAAclF,EAAOmF,MACrBC,GAAOpF,EAAOoF,KAGdC,GAAO7D,EAAkB,GAAG,SAAU8D,EAAGC,GAC3C,OAAOC,GAAS9D,EAAmB4D,EAAGA,EAAEP,KAAmBQ,MAGzDE,GAAgB3F,GAAM,WAExB,OAA0D,IAAnD,IAAIyC,EAAW,IAAImD,YAAY,CAAC,IAAIC,QAAQ,MAGjDC,KAAerD,KAAgBA,EAAoB,UAAEsD,KAAO/F,GAAM,WACpE,IAAIyC,EAAW,GAAGsD,IAAI,OAGpBC,GAAW,SAAUC,EAAIC,GAC3B,IAAIC,EAAS1F,EAAUwF,GACvB,GAAIE,EAAS,GAAKA,EAASD,EAAO,MAAM3D,EAAW,iBACnD,OAAO4D,GAGLC,GAAW,SAAUH,GACvB,GAAIjF,EAASiF,IAAOb,MAAea,EAAI,OAAOA,EAC9C,MAAMzD,EAAUyD,EAAK,2BAGnBP,GAAW,SAAUW,EAAGZ,GAC1B,IAAMzE,EAASqF,MAAMrB,MAAqBqB,GACxC,MAAM7D,EAAU,wCAChB,OAAO,IAAI6D,EAAEZ,IAGba,GAAkB,SAAUd,EAAGe,GACjC,OAAOC,GAAS5E,EAAmB4D,EAAGA,EAAEP,KAAmBsB,IAGzDC,GAAW,SAAUH,EAAGE,GAI1B,IAHA,IAAIE,EAAQ,EACRhB,EAASc,EAAKd,OACdiB,EAAShB,GAASW,EAAGZ,GAClBA,EAASgB,GAAOC,EAAOD,GAASF,EAAKE,KAC5C,OAAOC,GAGLC,GAAY,SAAUV,EAAIW,EAAKC,GACjCxE,EAAG4D,EAAIW,EAAK,CAAEE,IAAK,WAAc,OAAOC,KAAKC,GAAGH,OAG9CI,GAAQ,SAAcC,GACxB,IAKIC,EAAG1B,EAAQhC,EAAQiD,EAAQU,EAAMC,EALjC7B,EAAIvE,EAASiG,GACbI,EAAOC,UAAU9B,OACjB+B,EAAQF,EAAO,EAAIC,UAAU,QAAKE,EAClCC,OAAoBD,IAAVD,EACVG,EAASpG,EAAUiE,GAEvB,GAAciC,MAAVE,IAAwBzG,EAAYyG,GAAS,CAC/C,IAAKN,EAAWM,EAAOC,KAAKpC,GAAI/B,EAAS,GAAI0D,EAAI,IAAKC,EAAOC,EAASQ,QAAQC,KAAMX,IAClF1D,EAAOsE,KAAKX,EAAKY,OACjBxC,EAAI/B,EAGR,IADIiE,GAAWJ,EAAO,IAAGE,EAAQpH,EAAIoH,EAAOD,UAAU,GAAI,IACrDJ,EAAI,EAAG1B,EAAS/E,EAAS8E,EAAEC,QAASiB,EAAShB,GAASqB,KAAMtB,GAASA,EAAS0B,EAAGA,IACpFT,EAAOS,GAAKO,EAAUF,EAAMhC,EAAE2B,GAAIA,GAAK3B,EAAE2B,GAE3C,OAAOT,GAGLuB,GAAM,WAIR,IAHA,IAAIxB,EAAQ,EACRhB,EAAS8B,UAAU9B,OACnBiB,EAAShB,GAASqB,KAAMtB,GACrBA,EAASgB,GAAOC,EAAOD,GAASc,UAAUd,KACjD,OAAOC,GAILwB,KAAkBzF,GAAczC,GAAM,WAAc4E,GAAoBgD,KAAK,IAAInF,EAAW,OAE5F0F,GAAkB,WACpB,OAAOvD,GAAoBwD,MAAMF,GAAgB1D,GAAWoD,KAAKxB,GAASW,OAASX,GAASW,MAAOQ,YAGjGc,GAAQ,CACVC,WAAY,SAAoBC,EAAQC,GACtC,OAAOtG,EAAgB0F,KAAKxB,GAASW,MAAOwB,EAAQC,EAAOjB,UAAU9B,OAAS,EAAI8B,UAAU,QAAKE,IAEnGgB,MAAO,SAAeC,GACpB,OAAOvF,EAAWiD,GAASW,MAAO2B,EAAYnB,UAAU9B,OAAS,EAAI8B,UAAU,QAAKE,IAEtFkB,KAAM,SAAcX,GAClB,OAAO/F,EAAUmG,MAAMhC,GAASW,MAAOQ,YAEzCqB,OAAQ,SAAgBF,GACtB,OAAOpC,GAAgBS,KAAM9D,EAAYmD,GAASW,MAAO2B,EACvDnB,UAAU9B,OAAS,EAAI8B,UAAU,QAAKE,KAE1CoB,KAAM,SAAcC,GAClB,OAAO1F,EAAUgD,GAASW,MAAO+B,EAAWvB,UAAU9B,OAAS,EAAI8B,UAAU,QAAKE,IAEpFsB,UAAW,SAAmBD,GAC5B,OAAOzF,GAAe+C,GAASW,MAAO+B,EAAWvB,UAAU9B,OAAS,EAAI8B,UAAU,QAAKE,IAEzFuB,QAAS,SAAiBN,GACxB1F,EAAaoD,GAASW,MAAO2B,EAAYnB,UAAU9B,OAAS,EAAI8B,UAAU,QAAKE,IAEjFwB,QAAS,SAAiBC,GACxB,OAAO3F,GAAa6C,GAASW,MAAOmC,EAAe3B,UAAU9B,OAAS,EAAI8B,UAAU,QAAKE,IAE3F0B,SAAU,SAAkBD,GAC1B,OAAO5F,GAAc8C,GAASW,MAAOmC,EAAe3B,UAAU9B,OAAS,EAAI8B,UAAU,QAAKE,IAE5FpD,KAAM,SAAc+E,GAClB,OAAOhF,GAAUgE,MAAMhC,GAASW,MAAOQ,YAEzCxD,YAAa,SAAqBmF,GAChC,OAAOpF,GAAiBsE,MAAMhC,GAASW,MAAOQ,YAEhD8B,IAAK,SAAa7B,GAChB,OAAOjC,GAAKa,GAASW,MAAOS,EAAOD,UAAU9B,OAAS,EAAI8B,UAAU,QAAKE,IAE3ExD,OAAQ,SAAgByE,GACtB,OAAO1E,GAAYoE,MAAMhC,GAASW,MAAOQ,YAE3CpD,YAAa,SAAqBuE,GAChC,OAAOxE,GAAiBkE,MAAMhC,GAASW,MAAOQ,YAEhD+B,QAAS,WAMP,IALA,IAIItB,EAHAvC,EAASW,GADFW,MACiBtB,OACxB8D,EAASC,KAAKC,MAAMhE,EAAS,GAC7BgB,EAAQ,EAELA,EAAQ8C,GACbvB,EANSjB,KAMIN,GANJM,KAOJN,KAPIM,OAOctB,GAPdsB,KAQJtB,GAAUuC,EACf,OATSjB,MAWb2C,KAAM,SAAchB,GAClB,OAAOxF,EAAUkD,GAASW,MAAO2B,EAAYnB,UAAU9B,OAAS,EAAI8B,UAAU,QAAKE,IAErFlD,KAAM,SAAcoF,GAClB,OAAOrF,GAAUsD,KAAKxB,GAASW,MAAO4C,IAExCC,SAAU,SAAkBC,EAAOC,GACjC,IAAItE,EAAIY,GAASW,MACbtB,EAASD,EAAEC,OACXsE,EAASnJ,EAAgBiJ,EAAOpE,GACpC,OAAO,IAAK7D,EAAmB4D,EAAGA,EAAEP,KAA7B,CACLO,EAAEK,OACFL,EAAEwE,WAAaD,EAASvE,EAAEyE,kBAC1BvJ,QAAkB+G,IAARqC,EAAoBrE,EAAS7E,EAAgBkJ,EAAKrE,IAAWsE,MAKzEG,GAAS,SAAe1B,EAAOsB,GACjC,OAAOxD,GAAgBS,KAAMvC,GAAWoD,KAAKxB,GAASW,MAAOyB,EAAOsB,KAGlEK,GAAO,SAAaC,GACtBhE,GAASW,MACT,IAAIZ,EAASH,GAASuB,UAAU,GAAI,GAChC9B,EAASsB,KAAKtB,OACd4E,EAAMpJ,EAASmJ,GACfE,EAAM5J,EAAS2J,EAAI5E,QACnBgB,EAAQ,EACZ,GAAI6D,EAAMnE,EAASV,EAAQ,MAAMlD,EAvKhB,iBAwKjB,KAAOkE,EAAQ6D,GAAKvD,KAAKZ,EAASM,GAAS4D,EAAI5D,MAG7C8D,GAAa,CACf1G,QAAS,WACP,OAAOD,GAAagE,KAAKxB,GAASW,QAEpCpD,KAAM,WACJ,OAAOD,GAAUkE,KAAKxB,GAASW,QAEjCtD,OAAQ,WACN,OAAOD,GAAYoE,KAAKxB,GAASW,SAIjCyD,GAAY,SAAUjC,EAAQ3B,GAChC,OAAO5F,EAASuH,IACXA,EAAOnD,KACO,iBAAPwB,GACPA,KAAO2B,GACPkC,QAAQ7D,IAAQ6D,OAAO7D,IAE1B8D,GAAW,SAAkCnC,EAAQ3B,GACvD,OAAO4D,GAAUjC,EAAQ3B,EAAM/F,EAAY+F,GAAK,IAC5CtG,EAAa,EAAGiI,EAAO3B,IACvBtE,EAAKiG,EAAQ3B,IAEf+D,GAAW,SAAwBpC,EAAQ3B,EAAKgE,GAClD,QAAIJ,GAAUjC,EAAQ3B,EAAM/F,EAAY+F,GAAK,KACxC5F,EAAS4J,IACT9J,EAAI8J,EAAM,WACT9J,EAAI8J,EAAM,QACV9J,EAAI8J,EAAM,QAEVA,EAAKC,cACJ/J,EAAI8J,EAAM,cAAeA,EAAKE,UAC9BhK,EAAI8J,EAAM,gBAAiBA,EAAKG,WAI9B1I,EAAGkG,EAAQ3B,EAAKgE,IAFvBrC,EAAO3B,GAAOgE,EAAK5C,MACZO,IAINrD,KACH9C,EAAMd,EAAIoJ,GACVvI,EAAIb,EAAIqJ,IAGV1K,EAAQA,EAAQ+K,EAAI/K,EAAQgL,GAAK/F,GAAkB,SAAU,CAC3DgG,yBAA0BR,GAC1BS,eAAgBR,KAGd3K,GAAM,WAAc0E,GAAckD,KAAK,SACzClD,GAAgBE,GAAsB,WACpC,OAAOR,GAAUwD,KAAKb,QAI1B,IAAIqE,GAAwB5K,EAAY,GAAI6H,IAC5C7H,EAAY4K,GAAuBb,IACnChK,EAAK6K,GAAuBtG,GAAUyF,GAAW9G,QACjDjD,EAAY4K,GAAuB,CACjC3G,MAAOyF,GACPnE,IAAKoE,GACLkB,YAAa,aACb1G,SAAUD,GACVG,eAAgBsD,KAElBxB,GAAUyE,GAAuB,SAAU,KAC3CzE,GAAUyE,GAAuB,aAAc,KAC/CzE,GAAUyE,GAAuB,aAAc,KAC/CzE,GAAUyE,GAAuB,SAAU,KAC3C/I,EAAG+I,GAAuBrG,GAAK,CAC7B+B,IAAK,WAAc,OAAOC,KAAK3B,OAIjCkG,EAAOC,QAAU,SAAUC,EAAKtF,EAAOuF,EAASC,GAE9C,IAAIC,EAAOH,IADXE,IAAYA,GACgB,UAAY,IAAM,QAC1CE,EAAS,MAAQJ,EACjBK,EAAS,MAAQL,EACjBM,EAAa/L,EAAO4L,GACpBI,EAAOD,GAAc,GACrBE,EAAMF,GAAc1K,EAAe0K,GACnCG,GAAUH,IAAe5L,EAAOgM,IAChC1G,EAAI,GACJ2G,EAAsBL,GAAcA,EAAoB,UAUxDM,EAAa,SAAUC,EAAM5F,GAC/BpE,EAAGgK,EAAM5F,EAAO,CACdK,IAAK,WACH,OAZO,SAAUuF,EAAM5F,GAC3B,IAAI6F,EAAOD,EAAKrF,GAChB,OAAOsF,EAAKC,EAAEX,GAAQnF,EAAQP,EAAQoG,EAAKE,EAAG7G,IAUnC8G,CAAO1F,KAAMN,IAEtBV,IAAK,SAAUiC,GACb,OAXO,SAAUqE,EAAM5F,EAAOuB,GAClC,IAAIsE,EAAOD,EAAKrF,GACZ0E,IAAS1D,GAASA,EAAQwB,KAAKkD,MAAM1E,IAAU,EAAI,EAAIA,EAAQ,IAAO,IAAe,IAARA,GACjFsE,EAAKC,EAAEV,GAAQpF,EAAQP,EAAQoG,EAAKE,EAAGxE,EAAOrC,IAQnCgH,CAAO5F,KAAMN,EAAOuB,IAE7B+C,YAAY,KAGZkB,GACFH,EAAaL,GAAQ,SAAUY,EAAMC,EAAMM,EAASC,GAClDxM,EAAWgM,EAAMP,EAAYH,EAAM,MACnC,IAEI9F,EAAQiH,EAAYrH,EAAQsH,EAF5BtG,EAAQ,EACRN,EAAS,EAEb,GAAKnF,EAASsL,GAIP,MAAIA,aAAgB1J,GAhUd,gBAgU+BmK,EAAQhM,EAAQuL,KA/T9C,qBA+TwES,GAa/E,OAAI3H,MAAekH,EACjB9F,GAASsF,EAAYQ,GAErBrF,GAAMW,KAAKkE,EAAYQ,GAf9BzG,EAASyG,EACTnG,EAASH,GAAS4G,EAAS1G,GAC3B,IAAI8G,EAAOV,EAAKQ,WAChB,QAAgBrF,IAAZoF,EAAuB,CACzB,GAAIG,EAAO9G,EAAO,MAAM3D,EApSf,iBAsST,IADAuK,EAAaE,EAAO7G,GACH,EAAG,MAAM5D,EAtSjB,sBAyST,IADAuK,EAAapM,EAASmM,GAAW3G,GAChBC,EAAS6G,EAAM,MAAMzK,EAzS7B,iBA2SXkD,EAASqH,EAAa5G,OAftBT,EAAS9E,EAAQ2L,GAEjBzG,EAAS,IAAIjD,EADbkK,EAAarH,EAASS,GA2BxB,IAPA3F,EAAK8L,EAAM,KAAM,CACfY,EAAGpH,EACH2G,EAAGrG,EACH+G,EAAGJ,EACHK,EAAG1H,EACH8G,EAAG,IAAIzJ,EAAU+C,KAEZY,EAAQhB,GAAQ2G,EAAWC,EAAM5F,QAE1C0F,EAAsBL,EAAoB,UAAI3K,EAAOiK,IACrD7K,EAAK4L,EAAqB,cAAeL,IAC/B9L,GAAM,WAChB8L,EAAW,OACN9L,GAAM,WACX,IAAI8L,GAAY,OACX/J,GAAY,SAAUqL,GAC3B,IAAItB,EACJ,IAAIA,EAAW,MACf,IAAIA,EAAW,KACf,IAAIA,EAAWsB,MACd,KACDtB,EAAaL,GAAQ,SAAUY,EAAMC,EAAMM,EAASC,GAElD,IAAIE,EAGJ,OAJA1M,EAAWgM,EAAMP,EAAYH,GAIxB3K,EAASsL,GACVA,aAAgB1J,GA7WP,gBA6WwBmK,EAAQhM,EAAQuL,KA5WvC,qBA4WiES,OAC1DtF,IAAZoF,EACH,IAAId,EAAKO,EAAMtG,GAAS4G,EAAS1G,GAAQ2G,QAC7BpF,IAAZmF,EACE,IAAIb,EAAKO,EAAMtG,GAAS4G,EAAS1G,IACjC,IAAI6F,EAAKO,GAEblH,MAAekH,EAAa9F,GAASsF,EAAYQ,GAC9CrF,GAAMW,KAAKkE,EAAYQ,GATF,IAAIP,EAAKpL,EAAQ2L,OAW/CtJ,EAAagJ,IAAQqB,SAASC,UAAYjM,EAAK0K,GAAMwB,OAAOlM,EAAK2K,IAAQ3K,EAAK0K,IAAO,SAAUnF,GACvFA,KAAOkF,GAAavL,EAAKuL,EAAYlF,EAAKmF,EAAKnF,OAEvDkF,EAAoB,UAAIK,EACnBrM,IAASqM,EAAoBd,YAAcS,IAElD,IAAI0B,EAAkBrB,EAAoBrH,IACtC2I,IAAsBD,IACI,UAAxBA,EAAgBE,MAA4CjG,MAAxB+F,EAAgBE,MACtDC,EAAYpD,GAAW9G,OAC3BlD,EAAKuL,EAAY9G,IAAmB,GACpCzE,EAAK4L,EAAqB/G,GAAauG,GACvCpL,EAAK4L,EAAqB7G,IAAM,GAChC/E,EAAK4L,EAAqBlH,GAAiB6G,IAEvCJ,EAAU,IAAII,EAAW,GAAG/G,KAAQ4G,EAAS5G,MAAOoH,IACtD9J,EAAG8J,EAAqBpH,GAAK,CAC3B+B,IAAK,WAAc,OAAO6E,KAI9BnG,EAAEmG,GAAQG,EAEV7L,EAAQA,EAAQ2N,EAAI3N,EAAQ4N,EAAI5N,EAAQgL,GAAKa,GAAcC,GAAOvG,GAElEvF,EAAQA,EAAQ+K,EAAGW,EAAM,CACvB1B,kBAAmB/D,IAGrBjG,EAAQA,EAAQ+K,EAAI/K,EAAQgL,EAAIjL,GAAM,WAAc+L,EAAK+B,GAAGlG,KAAKkE,EAAY,MAAQH,EAAM,CACzFoC,KAAM9G,GACN6G,GAAI7F,KApZgB,sBAuZKkE,GAAsB5L,EAAK4L,EAvZhC,oBAuZwEjG,GAE9FjG,EAAQA,EAAQ+N,EAAGrC,EAAMtD,IAEzBrG,EAAW2J,GAEX1L,EAAQA,EAAQ+N,EAAI/N,EAAQgL,EAAInF,GAAY6F,EAAM,CAAE5F,IAAKoE,KAEzDlK,EAAQA,EAAQ+N,EAAI/N,EAAQgL,GAAKwC,EAAmB9B,EAAMpB,IAErDzK,GAAWqM,EAAoBxH,UAAYD,KAAeyH,EAAoBxH,SAAWD,IAE9FzE,EAAQA,EAAQ+N,EAAI/N,EAAQgL,EAAIjL,GAAM,WACpC,IAAI8L,EAAW,GAAGrH,WAChBkH,EAAM,CAAElH,MAAOyF,KAEnBjK,EAAQA,EAAQ+N,EAAI/N,EAAQgL,GAAKjL,GAAM,WACrC,MAAO,CAAC,EAAG,GAAG6E,kBAAoB,IAAIiH,EAAW,CAAC,EAAG,IAAIjH,sBACpD7E,GAAM,WACXmM,EAAoBtH,eAAe+C,KAAK,CAAC,EAAG,QACzC+D,EAAM,CAAE9G,eAAgBsD,KAE7BrG,EAAU6J,GAAQ8B,EAAoBD,EAAkBG,EACnD7N,GAAY2N,GAAmBlN,EAAK4L,EAAqBrH,GAAU6I,SAErErC,EAAOC,QAAU,c,oCC9dxB,IAAIxL,EAAS,EAAQ,QACjBkO,EAAc,EAAQ,QACtBnO,EAAU,EAAQ,QAClBI,EAAS,EAAQ,QACjBK,EAAO,EAAQ,QACfC,EAAc,EAAQ,QACtBR,EAAQ,EAAQ,QAChBK,EAAa,EAAQ,QACrBI,EAAY,EAAQ,QACpBC,EAAW,EAAQ,QACnBC,EAAU,EAAQ,QAClBU,EAAO,EAAQ,QAAkBC,EACjCe,EAAK,EAAQ,QAAgBf,EAC7BW,EAAY,EAAQ,QACpBiM,EAAiB,EAAQ,QAMzBtL,EAAe7C,EAAmB,YAClC+C,EAAY/C,EAAgB,SAC5ByJ,EAAOzJ,EAAOyJ,KACdjH,EAAaxC,EAAOwC,WAEpB4L,EAAWpO,EAAOoO,SAClBC,EAAaxL,EACbyL,EAAM7E,EAAK6E,IACXC,EAAM9E,EAAK8E,IACX7E,EAAQD,EAAKC,MACb8E,EAAM/E,EAAK+E,IACXC,EAAMhF,EAAKgF,IAIXC,EAAUR,EAAc,KAHf,SAITS,EAAUT,EAAc,KAHV,aAIdU,EAAUV,EAAc,KAHV,aAMlB,SAASW,EAAY5G,EAAO6G,EAAMC,GAChC,IAOI3B,EAAG4B,EAAGC,EAPNnJ,EAAS,IAAIlD,MAAMmM,GACnBG,EAAgB,EAATH,EAAaD,EAAO,EAC3BK,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBE,EAAc,KAATP,EAAcP,EAAI,GAAI,IAAMA,EAAI,GAAI,IAAM,EAC/CnH,EAAI,EACJkI,EAAIrH,EAAQ,GAAe,IAAVA,GAAe,EAAIA,EAAQ,EAAI,EAAI,EAkCxD,KAhCAA,EAAQqG,EAAIrG,KAECA,GAASA,IAAUmG,GAE9BY,EAAI/G,GAASA,EAAQ,EAAI,EACzBmF,EAAI+B,IAEJ/B,EAAI1D,EAAM8E,EAAIvG,GAASwG,GACnBxG,GAASgH,EAAIV,EAAI,GAAInB,IAAM,IAC7BA,IACA6B,GAAK,IAGLhH,GADEmF,EAAIgC,GAAS,EACNC,EAAKJ,EAELI,EAAKd,EAAI,EAAG,EAAIa,IAEfH,GAAK,IACf7B,IACA6B,GAAK,GAEH7B,EAAIgC,GAASD,GACfH,EAAI,EACJ5B,EAAI+B,GACK/B,EAAIgC,GAAS,GACtBJ,GAAK/G,EAAQgH,EAAI,GAAKV,EAAI,EAAGO,GAC7B1B,GAAQgC,IAERJ,EAAI/G,EAAQsG,EAAI,EAAGa,EAAQ,GAAKb,EAAI,EAAGO,GACvC1B,EAAI,IAGD0B,GAAQ,EAAGhJ,EAAOsB,KAAW,IAAJ4H,EAASA,GAAK,IAAKF,GAAQ,GAG3D,IAFA1B,EAAIA,GAAK0B,EAAOE,EAChBE,GAAQJ,EACDI,EAAO,EAAGpJ,EAAOsB,KAAW,IAAJgG,EAASA,GAAK,IAAK8B,GAAQ,GAE1D,OADApJ,IAASsB,IAAU,IAAJkI,EACRxJ,EAET,SAASyJ,EAAczJ,EAAQgJ,EAAMC,GACnC,IAOIC,EAPAE,EAAgB,EAATH,EAAaD,EAAO,EAC3BK,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBK,EAAQN,EAAO,EACf9H,EAAI2H,EAAS,EACbO,EAAIxJ,EAAOsB,KACXgG,EAAQ,IAAJkC,EAGR,IADAA,IAAM,EACCE,EAAQ,EAAGpC,EAAQ,IAAJA,EAAUtH,EAAOsB,GAAIA,IAAKoI,GAAS,GAIzD,IAHAR,EAAI5B,GAAK,IAAMoC,GAAS,EACxBpC,KAAOoC,EACPA,GAASV,EACFU,EAAQ,EAAGR,EAAQ,IAAJA,EAAUlJ,EAAOsB,GAAIA,IAAKoI,GAAS,GACzD,GAAU,IAANpC,EACFA,EAAI,EAAIgC,MACH,IAAIhC,IAAM+B,EACf,OAAOH,EAAIS,IAAMH,GAAKlB,EAAWA,EAEjCY,GAAQT,EAAI,EAAGO,GACf1B,GAAQgC,EACR,OAAQE,GAAK,EAAI,GAAKN,EAAIT,EAAI,EAAGnB,EAAI0B,GAGzC,SAASY,EAAUC,GACjB,OAAOA,EAAM,IAAM,GAAKA,EAAM,IAAM,GAAKA,EAAM,IAAM,EAAIA,EAAM,GAEjE,SAASC,EAAO1J,GACd,MAAO,CAAM,IAALA,GAEV,SAAS2J,EAAQ3J,GACf,MAAO,CAAM,IAALA,EAAWA,GAAM,EAAI,KAE/B,SAAS4J,EAAQ5J,GACf,MAAO,CAAM,IAALA,EAAWA,GAAM,EAAI,IAAMA,GAAM,GAAK,IAAMA,GAAM,GAAK,KAEjE,SAAS6J,EAAQ7J,GACf,OAAO2I,EAAY3I,EAAI,GAAI,GAE7B,SAAS8J,EAAQ9J,GACf,OAAO2I,EAAY3I,EAAI,GAAI,GAG7B,SAASU,EAAUN,EAAGO,EAAKC,GACzBxE,EAAGgE,EAAW,UAAGO,EAAK,CAAEE,IAAK,WAAc,OAAOC,KAAKF,MAGzD,SAASC,EAAIkJ,EAAMN,EAAOjJ,EAAOwJ,GAC/B,IACIC,EAAWvP,GADC8F,GAEhB,GAAIyJ,EAAWR,EAAQM,EAAKtB,GAAU,MAAMnM,EAxH5B,gBAyHhB,IAAI4N,EAAQH,EAAKvB,GAAS2B,GACtB5H,EAAQ0H,EAAWF,EAAKrB,GACxB0B,EAAOF,EAAM1L,MAAM+D,EAAOA,EAAQkH,GACtC,OAAOO,EAAiBI,EAAOA,EAAK/G,UAEtC,SAASvD,EAAIiK,EAAMN,EAAOjJ,EAAO6J,EAAYtI,EAAOiI,GAClD,IACIC,EAAWvP,GADC8F,GAEhB,GAAIyJ,EAAWR,EAAQM,EAAKtB,GAAU,MAAMnM,EAjI5B,gBAqIhB,IAHA,IAAI4N,EAAQH,EAAKvB,GAAS2B,GACtB5H,EAAQ0H,EAAWF,EAAKrB,GACxB0B,EAAOC,GAAYtI,GACdb,EAAI,EAAGA,EAAIuI,EAAOvI,IAAKgJ,EAAM3H,EAAQrB,GAAKkJ,EAAKJ,EAAiB9I,EAAIuI,EAAQvI,EAAI,GAG3F,GAAKjH,EAAOgM,IAgFL,CACL,IAAKlM,GAAM,WACT4C,EAAa,QACR5C,GAAM,WACX,IAAI4C,GAAc,OACd5C,GAAM,WAIV,OAHA,IAAI4C,EACJ,IAAIA,EAAa,KACjB,IAAIA,EAAa4M,KApOF,eAqOR5M,EAAa8K,QAClB,CAMF,IADA,IACyC9G,EADrC2J,GAJJ3N,EAAe,SAAqB6C,GAElC,OADApF,EAAW0G,KAAMnE,GACV,IAAIwL,EAAWzN,EAAQ8E,MAEa,UAAI2I,EAAoB,UAC5DzK,EAAOtC,EAAK+M,GAAaoC,EAAI,EAAQ7M,EAAK8B,OAAS+K,IACnD5J,EAAMjD,EAAK6M,QAAS5N,GAAerC,EAAKqC,EAAcgE,EAAKwH,EAAWxH,IAE1E9G,IAASyQ,EAAiBlF,YAAczI,GAG/C,IAAIoN,EAAO,IAAIlN,EAAU,IAAIF,EAAa,IACtC6N,EAAW3N,EAAmB,UAAE4N,QACpCV,EAAKU,QAAQ,EAAG,YAChBV,EAAKU,QAAQ,EAAG,aACZV,EAAKW,QAAQ,IAAOX,EAAKW,QAAQ,IAAInQ,EAAYsC,EAAmB,UAAG,CACzE4N,QAAS,SAAiB1G,EAAYhC,GACpCyI,EAAS7I,KAAKb,KAAMiD,EAAYhC,GAAS,IAAM,KAEjD4I,SAAU,SAAkB5G,EAAYhC,GACtCyI,EAAS7I,KAAKb,KAAMiD,EAAYhC,GAAS,IAAM,OAEhD,QAhHHpF,EAAe,SAAqB6C,GAClCpF,EAAW0G,KAAMnE,EA9IF,eA+If,IAAIkK,EAAanM,EAAQ8E,GACzBsB,KAAKqJ,GAAKnO,EAAU2F,KAAK,IAAIjF,MAAMmK,GAAa,GAChD/F,KAAK2H,GAAW5B,GAGlBhK,EAAY,SAAkB+C,EAAQmE,EAAY8C,GAChDzM,EAAW0G,KAAMjE,EApJL,YAqJZzC,EAAWwF,EAAQjD,EArJP,YAsJZ,IAAIiO,EAAehL,EAAO6I,GACtBvI,EAAS1F,EAAUuJ,GACvB,GAAI7D,EAAS,GAAKA,EAAS0K,EAAc,MAAMtO,EAAW,iBAE1D,GAAI4D,GADJ2G,OAA4BrF,IAAfqF,EAA2B+D,EAAe1K,EAASzF,EAASoM,IAC/C+D,EAAc,MAAMtO,EAxJ/B,iBAyJfwE,KAAK0H,GAAW5I,EAChBkB,KAAK4H,GAAWxI,EAChBY,KAAK2H,GAAW5B,GAGdmB,IACFtH,EAAU/D,EAhJI,aAgJuB,MACrC+D,EAAU7D,EAlJD,SAkJoB,MAC7B6D,EAAU7D,EAlJI,aAkJoB,MAClC6D,EAAU7D,EAlJI,aAkJoB,OAGpCtC,EAAYsC,EAAmB,UAAG,CAChC6N,QAAS,SAAiB3G,GACxB,OAAOlD,EAAIC,KAAM,EAAGiD,GAAY,IAAM,IAAM,IAE9C8G,SAAU,SAAkB9G,GAC1B,OAAOlD,EAAIC,KAAM,EAAGiD,GAAY,IAElC+G,SAAU,SAAkB/G,GAC1B,IAAI0F,EAAQ5I,EAAIC,KAAM,EAAGiD,EAAYzC,UAAU,IAC/C,OAAQmI,EAAM,IAAM,EAAIA,EAAM,KAAO,IAAM,IAE7CsB,UAAW,SAAmBhH,GAC5B,IAAI0F,EAAQ5I,EAAIC,KAAM,EAAGiD,EAAYzC,UAAU,IAC/C,OAAOmI,EAAM,IAAM,EAAIA,EAAM,IAE/BuB,SAAU,SAAkBjH,GAC1B,OAAOyF,EAAU3I,EAAIC,KAAM,EAAGiD,EAAYzC,UAAU,MAEtD2J,UAAW,SAAmBlH,GAC5B,OAAOyF,EAAU3I,EAAIC,KAAM,EAAGiD,EAAYzC,UAAU,OAAS,GAE/D4J,WAAY,SAAoBnH,GAC9B,OAAOsF,EAAcxI,EAAIC,KAAM,EAAGiD,EAAYzC,UAAU,IAAK,GAAI,IAEnE6J,WAAY,SAAoBpH,GAC9B,OAAOsF,EAAcxI,EAAIC,KAAM,EAAGiD,EAAYzC,UAAU,IAAK,GAAI,IAEnEmJ,QAAS,SAAiB1G,EAAYhC,GACpCjC,EAAIgB,KAAM,EAAGiD,EAAY2F,EAAQ3H,IAEnC4I,SAAU,SAAkB5G,EAAYhC,GACtCjC,EAAIgB,KAAM,EAAGiD,EAAY2F,EAAQ3H,IAEnCqJ,SAAU,SAAkBrH,EAAYhC,GACtCjC,EAAIgB,KAAM,EAAGiD,EAAY4F,EAAS5H,EAAOT,UAAU,KAErD+J,UAAW,SAAmBtH,EAAYhC,GACxCjC,EAAIgB,KAAM,EAAGiD,EAAY4F,EAAS5H,EAAOT,UAAU,KAErDgK,SAAU,SAAkBvH,EAAYhC,GACtCjC,EAAIgB,KAAM,EAAGiD,EAAY6F,EAAS7H,EAAOT,UAAU,KAErDiK,UAAW,SAAmBxH,EAAYhC,GACxCjC,EAAIgB,KAAM,EAAGiD,EAAY6F,EAAS7H,EAAOT,UAAU,KAErDkK,WAAY,SAAoBzH,EAAYhC,GAC1CjC,EAAIgB,KAAM,EAAGiD,EAAY+F,EAAS/H,EAAOT,UAAU,KAErDmK,WAAY,SAAoB1H,EAAYhC,GAC1CjC,EAAIgB,KAAM,EAAGiD,EAAY8F,EAAS9H,EAAOT,UAAU,OAsCzD2G,EAAetL,EA/PI,eAgQnBsL,EAAepL,EA/PC,YAgQhBvC,EAAKuC,EAAmB,UAAG5C,EAAOoF,MAAM,GACxCiG,EAAoB,YAAI3I,EACxB2I,EAAiB,SAAIzI,G,ukCCxQd,SAAS6O,EAAKC,EAAarF,QACpB9E,IAAN8E,EACAsF,QAAQtD,IAAI,YAAcqD,GAE1BC,QAAQtD,IAAI,YAAcqD,EAAKrF,GAGhC,SAASuF,EAASC,EAAgB/J,GACrC,OAAO,IAAIgK,SAAQ,SAACC,GAAD,OAAaC,YAAW,kBAAMD,EAAQjK,KAAQ+J,MAG9D,SAASI,EAAOC,EAAiBC,EAAgBhI,EAAwBiI,EAAiBhI,QAC9E,IAAXgI,IACAA,EAAS,QACD,IAARhI,IACAA,EAAMD,EAAI5E,OAAS6M,GACvB,IAAK,IAAInL,EAAI,EAAGA,EAAImD,IAAOnD,EACvBiL,EAAIC,EAASlL,GAAKkD,EAAIiI,EAASnL,GAehC,SAASoL,EAAKC,EAAiBC,GAElC,IADAA,GAAQ,GACG,EACP,OAAO,EACX,IAAMC,EAQH,SAAcpG,GAEjB,IADA,IAAIoG,EAAI,WACCvL,EAAI,EAAGA,EAAImF,EAAK7G,SAAU0B,EAC/BuL,EAAIlJ,KAAKmJ,KAAKD,EAAG,UAAapG,EAAKnF,GAEvC,OAAOuL,EAbGE,CAAKJ,GACf,OAAIC,GAAQ,GACDC,IAAM,IAEJA,EAAKA,IAAMD,IAAW,GAAKA,GAAQ,KAAQ,EAGrD,SAASI,EAAKC,EAAW7F,GAAa,OAAa,EAAJ6F,IAAc,EAAJ7F,GAAU,EASnE,SAAS8F,EAAIC,GAEhB,IADA,IAAID,EAAM,MACD5L,EAAI,EAAGA,EAAI6L,EAAEvN,SAAU0B,EAAG,CAC/B,IACI8L,EAAKF,GAAO,EADHC,EAAE7L,GAGf4L,EAAOA,GAAO,GADdE,GAAKA,GAAK,IACe,GAAOA,GAAK,EAAKA,EAC1CF,GAAO,MAEX,OAAOA,EAuEJ,IAAMG,EAAb,6BACYC,QAAwC,GADpD,KAEYC,UAA2B,GAFvC,2BAIIC,MAAA,WACI,cAActM,KAAKoM,WAAnB,aAA4B,EACxB7R,EADwB,SACtB,IAAIgS,MAAM,yBAEhBvM,KAAKoM,QAAU,GACfpM,KAAKqM,UAAY,IATzB,EAaIG,UAAA,SAAUhH,GACNxF,KAAKgB,KAAKwE,IAdlB,EAiBIxE,KAAA,SAAKwE,GACD,IAAIjL,EAAIyF,KAAKoM,QAAQK,QACjBlS,EAAGA,EAAEiL,GACJxF,KAAKqM,UAAUrL,KAAKwE,IApBjC,EAuBIkH,WAAA,SAAWC,GAAa,WACpB,QADoB,IAAbA,MAAU,GACb3M,KAAKqM,UAAU3N,OAAS,EAAG,CAC3B,IAAI8G,EAAIxF,KAAKqM,UAAUI,QACvB,OAAIjH,aAAa+G,MACNtB,QAAQ2B,OAAUpH,GAElByF,QAAQC,QAAW1F,GAE9B,OAAO,IAAIyF,SAAW,SAACC,EAAS0B,GAC5B,IAAIrS,EAAI,SAACiL,GACDA,aAAa+G,MAAOK,EAAOpH,GAC1B0F,EAAQ1F,IAEjB,EAAK4G,QAAQpL,KAAKzG,GACdoS,EAAU,GACV5B,EAAM4B,GACDE,MAAK,WACF,IAAIC,EAAM,EAAKV,QAAQlK,QAAQ3H,GAC3BuS,GAAO,IACP,EAAKV,QAAQW,OAAOD,EAAK,GACzBF,EAAO,IAAIL,MAAM,oBA3CjD,KAoDaS,EAAb,6BACIC,SAAyC,GAD7C,mBAGIC,QAAA,SAAWC,EAAY5S,GAAiC,WACpD,OAAO,IAAI0Q,SAAW,SAACC,EAAS0B,GAC5B,IAAIQ,EAAM,EAAKH,SAASE,GACnBC,IACDA,EAAM,EAAKH,SAASE,GAAM,IAE9B,IAAME,EAAU,WACZD,EAAIX,QACc,GAAdW,EAAI1O,cACG,EAAKuO,SAASE,GAErBC,EAAI,MAEZA,EAAIpM,MAAK,kBACLzG,IAAIsS,MAAK,SAAArH,GACL6H,IACAnC,EAAQ1F,MACT,SAAA8H,GACCD,IACAT,EAAOU,SAEG,GAAdF,EAAI1O,QACJ0O,EAAI,SAzBpB,KA8BO,SAASG,EAAM5E,GAElB,IADA,IAAI6E,EAAI,GACCpN,EAAI,EAAGA,EAAIuI,EAAMjK,SAAU0B,EAChCoN,IAAM,IAAM7E,EAAMvI,GAAGxC,SAAS,KAAKF,OAAO,GAC9C,OAAO8P,EAGJ,SAASC,EAAQC,GAEpB,IADA,IAAIF,EAAI,IAAI9R,WAAWgS,EAAIhP,QAAU,GAC5B0B,EAAI,EAAGA,EAAIsN,EAAIhP,OAAQ0B,GAAK,EACjCoN,EAAEpN,GAAK,GAAKuN,SAASD,EAAIhQ,MAAM0C,EAAGA,EAAI,GAAI,IAC9C,OAAOoN,EAQJ,SAASI,EAAQnC,EAA+BoC,EAAarI,GAChEiG,EAAIoC,EAAM,GAAMrI,GAAK,EAAK,IAC1BiG,EAAIoC,EAAM,GAAMrI,GAAK,EAAK,IAC1BiG,EAAIoC,EAAM,GAAMrI,GAAK,GAAM,IAC3BiG,EAAIoC,EAAM,GAAMrI,GAAK,GAAM,IAGxB,SAASsI,EAAQrC,EAA+BoC,EAAarI,GAChEiG,EAAIoC,EAAM,GAAMrI,GAAK,EAAK,IAC1BiG,EAAIoC,EAAM,GAAMrI,GAAK,EAAK,IAGvB,SAASuI,EAAOtC,EAAwBoC,GAC3C,OAAQpC,EAAIoC,GAAQpC,EAAIoC,EAAM,IAAM,EAAMpC,EAAIoC,EAAM,IAAM,GAAOpC,EAAIoC,EAAM,IAAM,MAAS,EAGvF,SAASG,EAAOvC,EAAwBoC,GAC3C,OAAOpC,EAAIoC,GAAQpC,EAAIoC,EAAM,IAAM,EAiBhC,SAASI,EAAexC,GAC3B,OAxLG,SAAkByC,GACrB,IAAKA,EAAQ,MAAO,GAIpB,IADA,IAAIC,EAAU,GACL/N,EAAI,EAAGA,EAAI8N,EAAOxP,SAAU0B,EAAG,CACpC,IAAIgO,EAA2B,IAAvBF,EAAOG,WAAWjO,GAEtB+N,GADK,IAALC,GAAWA,EAAI,IACJ,IAAMA,EAAExQ,SAAS,IAEjBsQ,EAAOI,OAAOlO,GAKjC,OAAOmO,mBAAmBJ,GAyKnBK,CAjMJ,SAA4BC,GAG/B,IAFA,IAAIlL,EAAMkL,EAAM/P,OACZgQ,EAAM,GACDtO,EAAI,EAAGA,EAAImD,IAAOnD,EACvBsO,GAAOhL,OAAOiL,aAAaF,EAAMrO,IACrC,OAAOsO,EA4LSE,CAAmBnD,IAGhC,SAASoD,EAAa9C,EAAe7F,GACxC,IAAMsH,EAAI,IAAI9R,WAAWqQ,EAAErN,OAASwH,EAAExH,QAGtC,OAFA8O,EAAExO,IAAI+M,EAAG,GACTyB,EAAExO,IAAIkH,EAAG6F,EAAErN,QACJ8O,EASJ,SAASsB,EAAOC,EAAelE,GAClC,QAD4D,IAA1BA,MAAM,qBACnCkE,EAED,MAAM,IAAIxC,MAAM1B,G,8nCCtSxB,IC0EYmE,EDoBCC,EAAb,WASI,WAAoBC,GAAyE,KAH7FC,iBAAkB,EAG2E,KAF7FC,OAAQ,EAEqF,KAI7FC,OAAS,SAAC7J,KAJmF,KAK7F8J,QAAU,SAAClJ,GACP0E,QAAQyE,MAAM,eAAiBnJ,EAAIA,EAAEoJ,MAAQpJ,KAN4C,KAAzE8I,gBATxB,2BAkBI1H,IAAA,SAAIqD,EAAarF,GACJ9E,MAAL8E,EACAsF,QAAQtD,IAAI,QAAUqD,EAAKrF,GAE3BsF,QAAQtD,IAAI,QAAUqD,IAtBlC,EA0BY4E,SAAR,WACQzP,KAAK0P,MACL1P,KAAK0P,IAAM,KACX1P,KAAK2P,KAAO,KACZ3P,KAAK4P,MAAQ,OA9BzB,EAkCIC,gBAAA,WAAiC,WAE7B,OADA7P,KAAKoP,OAAQ,EACRpP,KAAK0P,KACV1P,KAAKwH,IAAI,gBACFxH,KAAK0P,IAAII,QACXC,OAAM,SAAA3J,OAGNyG,MAAK,WAEF,OADA,EAAK4C,WACEO,EAAQ,SARD/E,QAAQC,WApCtC,EAgDY+E,gBAAR,WAA+C,WACvCC,EAAQ,SAACxB,GACS,MAAdA,EAAIyB,QACJ,EAAKZ,MAAM,0BACf,IAAInC,EAAM,IAAI1R,WAAWgT,EAAInJ,KAAKzG,QAClC,OAAkB,GAAdsO,EAAI1O,OACG,EAAKuR,kBACT7C,GAGX,OAAKpN,KAAK0P,IAGL1P,KAAK2P,KAUH3P,KAAK0P,IAAIU,WAAWpQ,KAAK2P,KAAKU,eAAgB,IAChDxD,KAAKqD,GAVClQ,KAAK0P,IAAIY,kBAAkB,CAC9BC,YAAa,QACbC,UAAW,YACXC,QA/JiB,EAgKjBxP,MA7JgB,IA8JhBvB,MAAOM,KAAK0Q,MAAMC,iBACnB,IAAI9D,KAAKqD,GATLjF,QAAQ2B,OAAO,IAAIL,MAAM,kBA3D5C,EA2EIgD,MAAA,SAAM1E,GACF,MAAM,IAAI0B,MAAJ,wBAAiCvM,KAAK0P,IAAM1P,KAAK0P,IAAIkB,YAAc,OAAnE,KAA6E/F,EAA7E,MA5Ed,EA+EkBgG,SA/ElB,6BA+EI,wFACQ7Q,KAAKmP,gBADb,iDAGInP,KAAKmP,iBAAkB,EACvBnP,KAAKwH,IAAI,mBAJb,UAOaxH,KAAKoP,MAPlB,6EAc8BpP,KAAKiQ,kBAdnC,aAckBxE,EAdlB,QAgBoB,GAhBpB,iBAkBgBzL,KAAKqP,OAAO5D,GAlB5B,yCAqBsBuE,EAAQ,GArB9B,iEAwBgBhQ,KAAK0P,KACL1P,KAAKsP,QAAL,MAzBhB,UA0BkBU,EAAQ,KA1B1B,iFA/EJ,uDA8GIc,gBAAA,SAAgBC,GAAiB,WAC7B,OAAK/Q,KAAK0P,KAEVM,EAASe,EAAIrS,QAAU,IAClBsB,KAAK4P,MAYH5P,KAAK0P,IAAIsB,YAAYhR,KAAK4P,MAAMS,eAAgBU,GAClDlE,MAAK,SAAA6B,GACgB,MAAdA,EAAIyB,QACJ,EAAKZ,MAAM,8BAdZvP,KAAK0P,IAAIuB,mBAAmB,CAC/BV,YAAa,QACbC,UAAW,YACXC,QAnNiB,EAoNjBxP,MAnNiB,IAoNjBvB,MAAOM,KAAK0Q,MAAMC,iBACnBI,GAAKlE,MAAK,SAAA6B,GACS,MAAdA,EAAIyB,QACJ,EAAKZ,MAAM,oCAXZtE,QAAQ2B,OAAO,IAAIL,MAAM,kBAhH5C,EAsIU2E,KAtIV,6BAsII,kCAAAnF,EAAA,sEACqB/L,KAAKkP,cAAc,CAChCiC,QAAS,CAAC,CACNC,UAAW,IACXC,aAlOgB,OA8N5B,OACIrR,KAAK0P,IADT,OAOI1P,KAAK0Q,WAAQhQ,EACbV,KAAKsR,cAAW5Q,EAChBV,KAAKwH,IAAI,mBAAqBxH,KAAK0P,IAAI6B,iBAAmB,IAAMvR,KAAK0P,IAAIkB,aAT7E,IAYwB5Q,KAAK0P,IAAI8B,cAAcC,YAZ/C,2CAYef,EAZf,QAckC,MADpBgB,EAAMhB,EAAMiB,WAAW,IACrBC,gBA5OY,IA4OcF,EAAIG,kBAd9C,wBAeY7R,KAAK0Q,MAAQA,EACb1Q,KAAKsR,SAAWI,EAhB5B,uDAqBS1R,KAAK0Q,MArBd,uBAqB2B,IAAInE,MAAM,2BArBrC,yBAuBUvM,KAAK0P,IAAIoC,OAvBnB,yBAwBU9R,KAAK0P,IAAIqC,oBAAoB,GAxBvC,eA0BQ/R,KAAKsR,SAASU,UAAUtT,SACxBsB,KAAK2P,KAAO3P,KAAKsR,SAASU,UAAUnQ,QAAO,SAAAuE,GAAC,MAAmB,MAAfA,EAAE6L,aAAmB,GACrEjS,KAAK4P,MAAQ5P,KAAKsR,SAASU,UAAUnQ,QAAO,SAAAuE,GAAC,MAAmB,OAAfA,EAAE6L,aAAoB,GACvEjC,EAAiC,IAAxBhQ,KAAK2P,KAAKuC,YACnBlC,EAAkC,IAAzBhQ,KAAK4P,MAAMsC,aAExBlS,KAAKwH,IAAI,mBAhCb,UAiCUxH,KAAK0P,IAAIyC,eAAenS,KAAK0Q,MAAMC,iBAjC7C,QAkCI3Q,KAAKwH,IAAI,iBACTxH,KAAKoP,OAAQ,EACbpP,KAAK6Q,WApCT,iDAtIJ,0DA8KauB,EAAb,WAMI,WAAmBC,GAAe,gBALlCC,cAAmD,GAKjB,KAJlCC,KAAO,IAAIvC,EAIuB,KAHlCwC,OAA0B,MAAhB/P,KAAKgQ,SAAqB,EAGF,KAF1BC,KAAO,IAAI1C,EAEe,KAAfqC,KACf,IAAIM,EAAuB,GAE3BN,EAAGhD,OAAS,SAAA5D,GACR,IAAImH,EAxMa,IAwMRnH,EAAI,GACTlI,EAAe,GAATkI,EAAI,GAEVoH,EAAQ,IAAInX,WAAW6H,GAE3B,GADAyM,EAAS6C,EAAO,EAAGpH,EAAK,EAAGlI,GAhNJ,IAiNnBqP,EACA,EAAKE,SAASD,EAjNK,KAiNED,QAIzB,GADAD,EAAO3R,KAAK6R,GAlNY,GAmNpBD,EAAJ,CAGI5C,EAvNoB,IAuNX4C,GAET,IADA,IACA,EADIG,EAAQ,EACZ,IAAcJ,KAAd,cAAsBI,GAAtB,QAAiCrU,OAGjC,IAFA,IAEA,EAFI8O,EAAI,IAAI9R,WAAWqX,GACnBC,EAAM,EACV,IAAcL,KAAd,aAAsB,KAAbpY,EAAa,QAClByV,EAASxC,EAAGwF,EAAKzY,GACjByY,GAAOzY,EAAEmE,OAEbiU,EAAS,GAxNO,IAyNZnF,EAAE,GAEF,EAAKyF,YAAYzF,GAEjB,EAAK+E,KAAKvR,KAAKwM,KArCnC,2BA4CI+B,MAAA,SAAMvH,GACF,OAAOhI,KAAKqS,GAAG9C,MAAMvH,IA7C7B,EAgDIkL,UAAA,SAAUC,EAAa5N,GAAmB,WAClChC,EAAM,EACNgC,IAAMhC,GAAOgC,EAAK7G,QACtB,IAAIqS,EAAM,IAAIrV,WAAW6H,GACrB6P,EAAsB,QAAdpT,KAAKwS,OACjBxC,EAAUe,EAAK,EAAGoC,GAClBnD,EAAUe,EAAK,EAAGqC,GAClBpD,EAAUe,EAAK,EAAG,GACdxL,GACAyK,EAASe,EAAK,EAAGxL,EAAM,EAAGA,EAAK7G,QACnC,IAAI2U,EAAa,EACbC,EAAoB,SAApBA,IAAoB,OACpB,EAAKf,KAAK7F,WAAW,KAChBG,MAAK,SAAA6B,GACF,GAAIsB,EAAStB,EAAK,IAAM0E,EAAK,CACzB,GAAIC,EAAa,EAGb,OAFAA,IACA,EAAKhB,GAAG7K,IAAR,yBAAqC4L,EAArC,OAA+CpD,EAAStB,EAAK,GAA7D,kBACO4E,IAEX,EAAK/D,MAAM,eAEf,IAAIgE,EAAO,GAGX,OAFI7E,EAAI,KACJ6E,EAAO,UAAY7E,EAAI,IACnBA,EAAI,IACR,KArQK,EAsQD,OAAOA,EAAIhR,MAAM,GACrB,KAtQc,EAuQV,EAAK6R,MAAM,kBAAoBgE,GAC/B,MACJ,KAxQW,EAyQP,EAAKhE,MAAM,kBAAoBgE,GAC/B,MACJ,QACI,EAAKhE,MAAM,SAAWb,EAAI,GAAK6E,GAGvC,OAAO,SAGnB,OAAOvT,KAAK0S,KAAKxF,QAAQ,QAAQ,kBAC7B,EAAKsG,aAAazC,GACblE,KAAKyG,OA3FtB,EA+FYE,aAAR,SAAqB/H,EAAiBgI,GAAoB,oBAApBA,MAAiB,GAEnD,IAAIZ,EAAQ,IAAInX,WAAW,IAiB3B,OAhBW,SAAPgY,EAAQ7F,GACR,IAAItK,EAAMkI,EAAI/M,OAASmP,EACvB,GAAItK,GAAO,EAAG,OAAO0H,QAAQC,UACzB3H,EAAM,IACNA,EAAM,GACNsP,EAAM,GAtSc,GAwSpBA,EAAM,GAzSc,GA2SpBY,IAAQZ,EAAM,GAAe,GAAVY,EA7SA,IACA,KA6SvBZ,EAAM,IAAMtP,EACZ,IAAK,IAAInD,EAAI,EAAGA,EAAImD,IAAOnD,EACvByS,EAAMzS,EAAI,GAAKqL,EAAIoC,EAAMzN,GAC7B,OAAO,EAAKiS,GAAGvB,gBAAgB+B,GAC1BhG,MAAK,kBAAM6G,EAAK7F,EAAMtK,MAExBmQ,CAAK,IAlHpB,EAqHIC,QAAA,SAAQxG,EAAY5S,GAChByV,KA1SmB,QA0SP7C,IACZnN,KAAKsS,cAAcnF,EAAK,IAAM5S,GAvHtC,EA0HIqZ,YAAA,SAAYrZ,GACRyF,KAAKkT,UA7SqB,GD0K3B,SAAqBW,GAExB,IADA,IAAIrG,EAAI,IAAI9R,WAA0B,EAAfmY,EAAMnV,QACpB0B,EAAI,EAAGA,EAAIyT,EAAMnV,SAAU0B,EAChCwN,EAAQJ,EAAO,EAAJpN,EAAOyT,EAAMzT,IAC5B,OAAOoN,EC+HgCwC,CAAc,CAAC,KAClDhQ,KAAK2T,QA5SoB,QA4SOpZ,IA5HxC,EA+HIuZ,mBAAA,SAAmBrI,GACf,OAAOzL,KAAKkT,UAjTY,GAiTgBzH,IAhIhD,EAmIIwH,YAAA,SAAYxH,GACR,IAAIsI,EAAO/D,EAASvE,EAAK,GACrBlR,EAAIyF,KAAKsS,cAAcyB,EAAO,IAC9BxZ,EACAA,EAAEkR,EAAI/N,MAAM,IAEZsC,KAAKqS,GAAG7K,IAAI,oBAAsBuM,EAAKnW,SAAS,MAzI5D,EA4IIkV,SAAA,SAASvN,EAAkByO,GACvBlJ,QAAQtD,IAAI,UAAWwI,EAAiBzK,KA7IhD,EAgJU2L,KAhJV,6BAgJI,4BAAAnF,EAAA,sEACU/L,KAAKqS,GAAGnB,OADlB,uBAEsBlR,KAAKkT,UA3YH,GAyYxB,OAEUzH,EAFV,OAGIzL,KAAKqS,GAAG7K,IAAI,iBAAmBwI,EAAiBvE,IAHpD,gDAhJJ,uDAsJIoE,gBAAA,WACI,OAAO7P,KAAKqS,GAAGxC,mBAvJvB,K,oBClMYb,O,iBAAAA,I,aAAAA,I,qBAAAA,I,iBAAAA,I,oBAAAA,M,KASL,ICrFKiF,E,oBA0CZ,SAASC,EAAQC,GACb,IAAIC,EAxBR,SAAqBD,GACjB,OAAQA,GACJ,KAAKF,EAAaI,OAAQ,OAAQ,EAClC,KAAKJ,EAAaK,QAAS,OAAO,EAClC,KAAKL,EAAaM,QAAS,OAAQ,EACnC,KAAKN,EAAaO,SAAU,OAAO,EACnC,KAAKP,EAAaQ,QAAS,OAAQ,EACnC,KAAKR,EAAaS,SAAU,OAAO,EACnC,KAAKT,EAAaU,OAAQ,OAAQ,GAClC,KAAKV,EAAaW,QAAS,OAAO,GAClC,KAAKX,EAAaY,QAAS,OAAQ,GACnC,KAAKZ,EAAaa,SAAU,OAAO,GACnC,KAAKb,EAAac,QAAS,OAAQ,GACnC,KAAKd,EAAae,SAAU,OAAO,GAEnC,KAAKf,EAAagB,UAAW,OAAO,EACpC,KAAKhB,EAAaiB,UAAW,OAAO,GACpC,KAAKjB,EAAakB,UAAW,OAAO,EACpC,KAAKlB,EAAamB,UAAW,OAAO,GACpC,QAAS,MAAM,IAAI7I,MAAM,mBAKlB8I,CAAYlB,GACnBmB,GAAS,EACTlB,EAAO,IACPkB,GAAS,EACTlB,GAAQA,GAEZ,IAAImB,GAAO,EAMX,OALInB,GAAQ,KACRmB,GAAO,EACPnB,GAAQ,IAGL,CAAEA,OAAMkB,SAAQC,OAAMC,QADfrB,GAAOF,EAAagB,WAO/B,SAASQ,EAAmBC,GAC/B,OAAQA,GACJ,KAAKzB,EAAaI,OAClB,KAAKJ,EAAaK,QAClB,KAAKL,EAAaU,OAClB,KAAKV,EAAaW,QACd,OAAO,EACX,KAAKX,EAAaM,QAClB,KAAKN,EAAaO,SAClB,KAAKP,EAAaY,QAClB,KAAKZ,EAAaa,SACd,OAAO,EACX,KAAKb,EAAaQ,QAClB,KAAKR,EAAac,QAClB,KAAKd,EAAae,SAClB,KAAKf,EAAaS,SAClB,KAAKT,EAAaiB,UAClB,KAAKjB,EAAagB,UACd,OAAO,EACX,KAAKhB,EAAamB,UAClB,KAAKnB,EAAakB,UACd,OAAO,EAEf,OAAO,EAGJ,SAASQ,EAAUlK,EAAwB0I,EAAmB/U,GACjE,OAAQ+U,GACJ,KAAKF,EAAaW,QAClB,KAAKX,EAAaK,QACd,OAAO7I,EAAIrM,GACf,KAAK6U,EAAaU,OAClB,KAAKV,EAAaI,OACd,OAAQ5I,EAAIrM,IAAW,IAAO,GAClC,KAAK6U,EAAaO,SACd,OAAOxG,EAAOvC,EAAKrM,GACvB,KAAK6U,EAAaM,QACd,OAAQvG,EAAOvC,EAAKrM,IAAW,IAAO,GAC1C,KAAK6U,EAAaS,SACd,OAAO3G,EAAOtC,EAAKrM,GACvB,KAAK6U,EAAaQ,QACd,OAAO1G,EAAOtC,EAAKrM,IAAW,EAClC,QACI,MAAM,IAAImN,MAAM,mBAAqB4H,IAI1C,SAASyB,EAAUnK,EAAiB0I,EAAmB/U,EAAgBoO,GAC1E,IAAIqI,EAAM3B,EAAQC,GAClB,GAAI0B,EAAIL,QAAR,CACI,IAAIpI,EAAM,IAAI1R,WAAWma,EAAIzB,MACb,GAAZyB,EAAIzB,KACJ,IAAI0B,aAAa1I,EAAItO,QAAQ,GAAK0O,EAElC,IAAIuI,aAAa3I,EAAItO,QAAQ,GAAK0O,EAClCqI,EAAIN,MACJnI,EAAI7K,UACR,IAAK,IAAInC,EAAI,EAAGA,EAAIyV,EAAIzB,OAAQhU,EAC5BqL,EAAIrM,EAASgB,GAAKgN,EAAIhN,QAK9B,IAAK,IAAIA,EAAI,EAAGA,EAAIyV,EAAIzB,OAAQhU,EAAG,CAE/BqL,EADWoK,EAAIN,KAAoBnW,EAASyW,EAAIzB,KAAOhU,EAAI,EAArChB,EAASgB,GACf,IAAJoN,EACZA,IAAM,GCzHP,SAASlE,EAAKoM,EAAgBM,GACjC,IAAIvK,EAAM,IAAI/P,WALX,SAAoBga,GACvB,OAAOO,EAAeP,EAAQ,KAAM,MAAM,GAIjBQ,CAAWR,IAEpC,OADAO,EAAeP,EAAQM,EAAMvK,GAAK,GAC3BA,EAIX,SAAS0K,EAAUC,EAAgBC,GAC/B,OAAQD,GACJ,IAAK,IACD,OAAOnC,EAAaK,QACxB,IAAK,IACD,OAAOL,EAAaI,OACxB,IAAK,IACD,OAAOgC,EAAQpC,EAAaa,SAAWb,EAAaO,SACxD,IAAK,IACD,OAAO6B,EAAQpC,EAAaY,QAAUZ,EAAaM,QACvD,IAAK,IACL,IAAK,IACD,OAAO8B,EAAQpC,EAAae,SAAWf,EAAaS,SACxD,IAAK,IACL,IAAK,IACD,OAAO2B,EAAQpC,EAAac,QAAUd,EAAaQ,QACvD,IAAK,IACD,OAAO4B,EAAQpC,EAAaiB,UAAYjB,EAAagB,UACzD,IAAK,IACD,OAAOoB,EAAQpC,EAAamB,UAAYnB,EAAakB,UACzD,QACI,OAAO,MASnB,SAASc,EAAeP,EAAgBM,EAAgBvK,EAAiB6K,EAAiBC,QAAS,IAATA,MAAM,GAG5F,IAFA,IANaC,EACPC,EAKFJ,GAAQ,EACRvJ,EAAM,EACD1M,EAAI,EAAGA,EAAIsV,EAAOhX,SAAU0B,EACjC,OAAQsV,EAAOtV,IACX,IAAK,IACL,IAAK,IACL,IAAK,IACDiW,GAAQ,EACR,MACJ,IAAK,IACL,IAAK,IACDA,GAAQ,EACR,MACJ,IAAK,IACDE,IACA,MACJ,QAEI,IADA,IAAMG,EAAKtW,EAvBVoW,EAwBcd,EAAOtV,GAvB5BqW,SACC,KADDA,EAAOD,EAAGnI,WAAW,KACJoI,GAAQ,IAsBQrW,IAC3B,IAAIuW,EAAO,EAGX,IAFID,GAAMtW,IACNuW,EAAOhJ,SAAS+H,EAAOhY,MAAMgZ,EAAItW,KAC9BuW,KAAQ,CACX,IAAIxC,EAAMgC,EAAUT,EAAOtV,GAAIiW,GAC/B,GAAY,OAARlC,EACA,MAAM,IAAI5H,MAAM,iCAAmCmJ,EAAOtV,IAEtDqL,IACI6K,EACAV,EAAUnK,EAAK0I,EAAKoC,EAAKP,EAAKlJ,MAE9BkJ,EAAKhV,KAAK2U,EAAUlK,EAAK0I,EAAKoC,KAGtCA,GAAOd,EAAmBtB,IAM9C,OAAOoC,E,k/BDpFCtC,O,mBAAAA,I,qBAAAA,I,qBAAAA,I,uBAAAA,I,qBAAAA,I,mBAAAA,I,qBAAAA,I,qBAAAA,I,uBAAAA,I,sBAAAA,I,wBAAAA,I,wBAAAA,I,0BAAAA,I,0BAAAA,I,0BAAAA,I,2BAAAA,M,KEcL,IAAM2C,EAAb,WAMI,cANJ,EAQWC,WAAP,SAAkBpL,GACd,IAAMQ,EAAI,IAAI2K,EAGd,OAFA3K,EAAE6K,QAAUrL,EAAI/N,MAAM,EHmCO,IGlC7BuO,EAAE8K,MAAQtL,EAAI/N,MHkCe,IGjCtBuO,GAZf,EAeWjF,KAAP,SAAYgQ,EAAyBzR,GACjC,IAAM0G,EAAI,IAAI2K,EAId,OAHA3K,EAAE6K,QAAU,IAAIpb,WH4Ba,IG3B7BuQ,EAAE1G,KAAOA,EACT0G,EAAE+K,gBAAkBA,EACb/K,GApBf,EAuBWgL,WAAP,SAAkBD,GACd,OAAOJ,EAAO5P,KAAKgQ,EAAiB,IAAItb,WAAW,KAxB3D,I,MAAA,uBA2BIwb,SAAA,WACI,OAAOrI,EAAa7O,KAAK8W,QAAS9W,KAAK+W,QA5B/C,EAsIII,SAAA,SAASC,GACL,GAAuB,GAAnBA,EAAS1Y,OAAb,CAGA,IADA,IACA,EADI2Y,GAAM,EACV,IAAcD,KAAd,aAAwB,CACpBC,GADoB,QACZ3Y,OAEZ,IAAM6G,EAAO,IAAI7J,WAAW2b,GAC5BrX,KAAK8W,QAAQ9X,IAAIoY,EAAS,GAAI,IAC9B7R,EAAKvG,IAAIoY,EAAS,GAAG1Z,MAAM,GAAI,GAC/B2Z,EAAKD,EAAS,GAAG1Y,OAAS,EAC1B,cAAc0Y,EAAS1Z,MAAM,MAA7B,aAAiC,KAAxB4K,EAAwB,QAC7B/C,EAAKvG,IAAIsJ,EAAG+O,GACZA,GAAM/O,EAAE5J,OAEZsB,KAAK+W,MAAQxR,IArJrB,EAwJI+R,kBAAA,WACI,OAAOzI,EAAa7O,KAAK8W,QAAQpZ,MAAM,GAAI,IAASsC,KAAK+W,QAzJjE,EA4JIpB,UAAA,SAAUxB,EAAmB/U,GACzB,OAAOuW,EAAU3V,KAAK+W,MAAO5C,EAAK/U,IA7J1C,EAwKIxB,SAAA,WACI,IAAIiN,EAAS7K,KAAKuX,kBAAX,IAAgCvX,KAAKwX,eAArC,IAAuDxX,KAAKyX,YAA5D,MAA6EzX,KAAKgX,gBAAlF,OAAwGhX,KAAKoU,KAGpH,OAFIpU,KAAKoU,KAAO,GAAIvJ,GAAO,KAAO0C,EAAMvN,KAAKuF,MACxCsF,GAAO,KAAO0C,EAAMvN,KAAKuF,KAAK7H,MAAM,EAAG,KAAO,MAC5CmN,GA5Kf,EA+KI6M,cAAA,SAAcC,GAGV,OAFA3X,KAAK8W,QAAQ,GAAK9W,KAAKoU,KAAO,EAC9BtG,EAAQ9N,KAAK8W,QAAS,EAAG9K,EAAI6C,EAAa7O,KAAK8W,QAAQpZ,MAAM,GAAIsC,KAAK+W,SAC/DY,EAAI7G,gBAAgB9Q,OAlLnC,EAqLI4X,gBAAA,SAAgBlI,GACZ,OAAKA,GAEL1P,KAAKuX,kBAAoB7H,EAAImI,SACtB7X,KAAK0X,cAAchI,EAAIiI,MAFnB1M,QAAQC,WAvL3B,EA4LI4M,aAAA,SAAapI,GACT,OAAKA,GAEL1P,KAAKuX,kBAAoB7H,EAAImI,SAC7B7X,KAAK8W,QAAQ,IHxIgB,EGyItB9W,KAAK0X,cAAchI,EAAIiI,MAHnB1M,QAAQC,WA9L3B,EAoMI6M,wBAAA,SAAwBJ,EAAUK,GAI9B,OAHAhY,KAAK8W,QAAQ,IAAMmB,EACnBrK,EAAQ5N,KAAK8W,QAAS,EAAGkB,GACzBpK,EAAQ5N,KAAK8W,QAAS,EAAG,GAClB9W,KAAK0X,cAAcC,IAxMlC,EA2MWO,UAAP,SAAiBrF,EAAmBsF,GAChC,OASR,SAAwBtF,EAAmBsF,GACvC,IAAM/D,EAAOvB,EAAM,IAAM,EACzB,GAAIA,EAAMnU,OAAS0V,EAAO,GACtBxJ,EAAQuN,EAAJ,gBAA6BtF,EAAMnU,OAAnC,sBAA8D0V,EAAO,SACtE,MAAIA,EAAO,GAEX,CACH,IAAMgE,EAAWpM,EAAI6G,EAAMnV,MAAM,EAAG0W,EAAO,KACrCiE,EAASrK,EAAO6E,EAAO,GACzBwF,GAAUD,GACVtN,QAAQtD,IAAR,oBAAgC4M,EAAhC,QAA4CiE,EAA5C,SAA2DD,GAE/D,IAAM1J,EAAgB,GAClBmE,EAAMnU,QAAU,GAAKmU,EAAM,IAC3BjI,EAAQuN,EAAJ,8BAA2CtF,EAAMnU,QACzD,IAAK,IAAIsU,EAAM,GAAIA,EAAM,GAAKH,EAAM,IAAK,CACrC,IAAMyF,EAAMzF,EAAMG,GAAO,EACnBqE,EAAWiB,EL3KkB,GAAK,EK4KlCvH,EAAMlC,EAAagE,EAAMnV,MAAM,EAAG,IAAKmV,EAAMnV,MAAMsV,EAAKA,EAAMsF,IAChEtF,EAAMqE,EAAK,GAAKxE,EAAM,IACtBjI,EAAQuN,EAAJ,0CAAuDzJ,EAAIhQ,QACnE,IAAMuN,EAAI2K,EAAOC,WAAW9F,GAC5B9E,EAAEkM,UAAYA,EACdzJ,EAAI1N,KAAKiL,GACT+G,GAAOqE,EAGX,OAAO3I,EAtBP9D,EAAQuN,EAAJ,oBAyBR,MAAO,GAvCII,CAAe1F,EAAOsF,IA5MrC,EA+MWK,OAAP,SAAcxB,EAAyB7C,EAAa6B,GAChD,OAAOY,EAAO5P,KAAKgQ,EAAiB1N,EAAK6K,EAAK6B,K,EAhNtD,G,EAAA,yCAgCQ,OAAOzI,EAAMvN,KAAK8W,QAAQpZ,MAAM,EAAG,MAhC3C,aAkC0ByP,GAClB,IAAMsL,EAAMhL,EAAQN,GACF,GAAdsL,EAAI/Z,QLpDT,SAAemM,GAClB,MAAM,IAAI0B,MAAM1B,GKoDR0E,CAAM,cACVvP,KAAK8W,QAAQ9X,IAAIyZ,EAAK,KAtC9B,kCAyCwB,OAAOzY,KAAK8W,QAAQ,KAzC5C,yCA4CQ,GHgBiD,EGhB7C9W,KAAKyX,YACL,OAAO1J,EAAO/N,KAAK8W,QAAS,KA7CxC,2BAkDQ,OAAO9W,KAAK8W,QAAQ,MAlD5B,mCAsDQ,SHImC,EGJ3B9W,KAAKyX,cAtDrB,aAwDqBiB,GACTA,GAAO1Y,KAAK2Y,eACZ3Y,KAAK8W,QAAQ,IHAkB,KG1D3C,qCA8DQ,OHf8B,GGevB9W,KAAK8W,QAAQ,KA9D5B,aAgEuBU,GACf,GAAsB,MAAlBA,EACA,MAAM,IAAIjL,MAAM,0BACpBvM,KAAK8W,QAAQ,IHnBqB,IGmBd9W,KAAK8W,QAAQ,IAAoCU,IAnE7E,oCAuEQ,GAAIxX,KAAK0P,IACL,OAAO1P,KAAK0P,IAAIkJ,eAAe5Y,KAAKwX,kBAxEhD,0BA6EQ,OAAOxJ,EAAOhO,KAAK8W,QAAS,KA7EpC,sCAiFQ,OAAO9I,EAAOhO,KAAK8W,QAAS,KAjFpC,aAmFwB3D,GAChBrF,EAAQ9N,KAAK8W,QAAS,GAAI3D,KApFlC,iCAwFQ,OAAQnT,KAAKgX,iBAAmB,IAAQ6B,IAxFhD,iCA4FQ,OAAQ7Y,KAAKgX,iBAAmB,IAAQ6B,IA5FhD,2BAgGQ,OAAO7Y,KAAK+W,OAhGpB,aAmGatL,GACL,GAAIA,EAAI/M,OHtD0B,IGuD9B,MAAM6N,MAAM,WAChBvM,KAAK8W,QAAQ,IAAMrL,EAAI/M,OACvBsB,KAAK+W,MAAQtL,IAvGrB,+BA2GQ,IAAIA,EAAMzL,KAAK+W,MACf,GAAkB,GAAdtL,EAAI/M,OAIR,OAFI+M,EAAI/M,OAAS,IACb+M,EAAMoD,EAAapD,EAAK,IAAI/P,WAAW,KACpCqS,EAAOtC,EAAK,KAhH3B,8BAoHQ,IAAI0I,EACJ,OAAQnU,KAAK+W,MAAMrY,QACf,KAAK,EACD,OACJ,KAAK,EACDyV,EAAMF,EAAaI,OACnB,MACJ,KAAK,EACL,KAAK,EACDF,EAAMF,EAAaM,QACnB,MACJ,QACIJ,EAAMF,EAAaQ,QAG3B,OAAOzU,KAAK2V,UAAUxB,EAAK,KAnInC,iCAiKQ,SHzG6B,EGyGnBnU,KAAKyX,eAjKvB,gCAqKQ,OAAQzX,KAAK8Y,gB,2BArKrB,K,sKCVO,IAAMC,EAAb,WAQI,WAAmBpB,EAAiBE,GAAkB,KAAnCF,MAAmC,KAAlBE,WAChC7X,KAAKgZ,WAAY,EATzB,I,MAAA,uBAuBIpb,SAAA,WACI,OAAOoC,KAAKiZ,SAAWjZ,KAAK2G,KAAL,KAAiB3G,KAAK2G,KAAtB,SAxB/B,EA2BIuS,WAAA,SAAWlB,GACP,IAAKhY,KAAKmZ,SAAU,OAAO,EAC3B,IAAK,IAAI/Y,EAAI,EAAGA,EAAIJ,KAAKmZ,SAASza,OAAQ0B,GAAK,EAC3C,GAAIuV,EAAU3V,KAAKmZ,SAAUlF,EAAaS,SAAUtU,IAAM4X,EACtD,OAAO,EACf,OAAO,GAhCf,EAwCIY,eAAA,SAAe9L,GAEX,GADAA,IAAQ,EACH9M,KAAKmZ,YAAYrM,EAAM,EAAI9M,KAAKmZ,SAASza,QAE9C,OAAOqP,EAAO/N,KAAKmZ,SAAUrM,IA5CrC,EAuDIsM,gBAAA,SAAgBjG,EAAakG,QAAwB,IAAxBA,MAAkB,MAC3C,IAAMtI,EAAOsI,EAAmCzC,EAAO5P,KAAKmM,EAAKkG,GAA1CzC,EAAOK,WAAW9D,GACzCpC,EAAIyG,eJI0B,EIH9BzG,EAAI+G,aAAa9X,OA1DzB,EA6DIsZ,WAAA,WACItZ,KAAKgZ,WAAY,G,EA9DzB,G,EAAA,4BAaQ,OAAOhZ,KAAK2X,IAAI4B,WAAWvZ,KAAK6X,WAAa7X,KAAK2X,IAAI4B,WAAWvZ,KAAKiZ,WAb9E,8BAsEO,IAAuBO,EACpB7N,EAnDF,OAFK3L,KAAKyZ,WACNzZ,KAAKyZ,UAmDaD,EAnDYxZ,KAAK6X,SAoDrClM,EAAIH,EAAKiC,EAAQ+L,GAAQ,IACxB9V,OAAOiL,aAAa,GAAOhD,EAAI,IAClCjI,OAAOiL,aAAa,GAAO7C,EAAKH,EAAG,IAAM,IACzCjI,OAAOiL,aAAa,GAAO7C,EAAKH,EAAG,KAAW,IAC9CjI,OAAOiL,aAAa,GAAO7C,EAAKH,EAAG,OAAgB,MAvD5C3L,KAAKyZ,WApBpB,oCAoCQ,OAAKzZ,KAAKmZ,SACHnZ,KAAKmZ,SAASza,QAAU,EADJ,IApCnC,qCAkDQ,IAFA,IAAM8O,EAAI,GACJkM,EAAI1Z,KAAK2Z,cACNvZ,EAAI,EAAGA,EAAIsZ,IAAKtZ,EACrBoN,EAAExM,KAAKhB,KAAK4Y,eAAexY,IAC/B,OAAOoN,O,2BApDf,K,imCCsFO,IAAMoM,EAAb,Y,QAcI,WAAmBC,GAAsB,aACrC,sBAdIC,YAAa,EAaoB,EAVjCC,SAAqB,GAUY,EATjCC,aAA6B,GASI,EANjCC,oBAAsBjL,EAAgBkL,IAML,EAAtBL,UAEf,EAAKA,QAAU,EAAKA,SAAW,GAC/B,EAAKM,YACL,EAAKC,GAAG,kBAAkB,kBAAM,EAAKC,iBAJA,E,EAd7C,G,EAAA,G,6EAAA,I,MAAA,uBAqBYF,UAAR,WACIna,KAAKsa,WAAaC,KAAKC,OAtB/B,EAuCYH,YAAR,WACQra,KAAKia,oBAAsBjL,EAAgByL,QAC/B7D,EAAO4B,OL/Ea,KK+EwB,IAAK,CAACxY,KAAKia,sBAC/DlC,wBAAwB/X,KL9Cd,YKI1B,EA8CI8Q,gBAAA,SAAgB7E,GAAW,MAEvB,OADAjM,KAAK0a,KAAK,aAAczO,IACjB,UAAAjM,KAAK6Z,eAAL,eAAc/I,gBAAgB7E,KAAMhB,QAAQC,WAhD3D,EA2DIyP,aAAA,SAAaC,EAAiBC,GAC1B7a,KAAK0a,KAAK,QAAS,CAAEE,UAASC,eA5DtC,EA+DIC,aAAA,WAA8B,WAE1B,GAAI9a,KAAK8Z,WACL,OAAO7O,QAAQC,UAEnB,IAAKlL,KAAK+a,gBAAiB,OACvB/a,KAAK8Z,YAAa,EAClB9Z,KAAK+a,gBAAkB9P,QAAQC,UAC/BlL,KAAK0a,KAAK,cACV,IAAMM,GAAsB,UAAAhb,KAAK6Z,eAAL,eAAciB,iBAAkB7P,QAAQC,UACpElL,KAAK+a,gBAAkBC,EAClBnO,MAAK,WACF,EAAKkO,qBAAkBra,EACvB,EAAKoZ,YAAa,EAClB,EAAKY,KAAK,cAEb3K,OAAM,SAAA3J,GACH,EAAKuU,aAAa,UAAWvU,GAC7B,EAAK0T,YAAa,EAClB,EAAKiB,qBAAkBra,EACvB,EAAKga,KAAK,iBAGtB,OAAO1a,KAAK+a,iBAtFpB,EAyFUlL,gBAzFV,e,EAAA,G,EAAA,UAyFI,4BAAA9D,EAAA,yDACS/L,KAAK8Z,WADd,yCACiC7O,QAAQC,WADzC,WAGQlL,KAAK+a,gBAHb,sBAIc,IAAIxO,MAAM,yCAJxB,OAKIvM,KAAK8Z,YAAa,EACd9Z,KAAKib,cACLC,cAAclb,KAAKib,aACnBjb,KAAKib,iBAAcva,GAEvB,IACI,UAAAV,KAAK6Z,eAAL,SAAchK,kBAChB,MAAOzJ,GACLpG,KAAK2a,aAAa,aAAcvU,GAHpC,QAMIpG,KAAK0a,KAAK,aAhBlB,+C,+KAzFJ,uDAgHIS,QAAA,WAAY,OAAOnb,KAAK+Z,SAASrc,SAhHrC,EAsHI0d,OAAA,SAAOjO,GAAY,WACXkO,EAAIrb,KAAK+Z,SAASjY,MAAK,SAAAuZ,GAAC,OAAIA,EAAExD,UAAY1K,KAS9C,OARKkO,IACDA,EAAI,IAAItC,EAAO/Y,KAAMmN,GACrBnN,KAAK+Z,SAAS/Y,KAAKqa,GACnBrb,KAAK0a,KAAK,gBAAiBW,IAEtBrb,KAAKib,aAAejb,KAAKgZ,YAC1BhZ,KAAKib,YAAcK,aAAY,kBAAM,EAAKC,cAAa,OAExDF,GAhIf,EAmIYE,UAAR,WAEI,IADA,IAAMC,EAASxb,KAAKmY,UAAY,IACvB/X,EAAI,EAAGA,EAAIJ,KAAK+Z,SAASrb,SAAU0B,EAAG,CAC3C,IAAMsP,EAAM1P,KAAK+Z,SAAS3Z,GACtBsP,EAAI+L,SAAWD,IACfxb,KAAK+Z,SAAShN,OAAO3M,EAAG,GACxBA,IACAsP,EAAI4J,aACJtZ,KAAK0a,KAAK,mBAAoBhL,MA3I9C,EAoJIgM,cAAA,SAAc3K,GACV,GAAIA,EAAI4K,yBAED,GAAI5K,EAAI+H,WACX/H,EAAIrB,IAAM1P,KAAKob,OAAOrK,EAAIwG,uBACvB,CACH,IAAM7H,EAAMqB,EAAIrB,IAAM1P,KAAKob,OAAOrK,EAAIwG,mBACtC7H,EAAI+L,SAAW1K,EAAIoH,ULpLO,GKsLtBpH,EAAIyG,gBLrNkB,GKsNlBzG,EAAIiG,kBP3NjB,SAAkBjL,EAAe7F,GACpC,GAAI6F,GAAK7F,EACL,OAAO,EACX,IAAK6F,IAAM7F,GAAK6F,EAAErN,QAAUwH,EAAExH,OAC1B,OAAO,EACX,IAAK,IAAI0B,EAAI,EAAGA,EAAI2L,EAAErN,SAAU0B,EAC5B,GAAI2L,EAAE3L,IAAM8F,EAAE9F,GAAI,OAAO,EAE7B,OAAO,EOoNcwb,CAAS7K,EAAIxL,KAAMmK,EAAIyJ,YACxBzJ,EAAIyJ,SAAWpI,EAAIxL,KACnBmK,EAAImM,kBAAoB9K,EAAIoH,UAC5BnY,KAAK0a,KAAK,iBAAkBhL,KL1Nd,IKgO1BqB,EAAIiG,kBACJhX,KAAK0a,KAAK,gBAAiB3J,GL/Nd,IKgOTA,EAAIiG,iBACJhX,KAAK0a,KAAK,cAAe3J,KA3KzC,EAmLIwI,WAAA,SAAWpM,GACP,OAAOnN,KAAKga,aAAa7M,IApLjC,EAuLI3F,IAAA,SAAIqD,GACI7K,KAAKia,oBAAsBjL,EAAgBkL,KAE/CpP,QAAQtD,IAAIqD,I,EA1LpB,G,EAAA,iCA0BQ,OAAO0P,KAAKC,MAAQxa,KAAKsa,aA1BjC,yCA8BQ,OAAOta,KAAKia,qBA9BpB,aAiC2B6B,GACfA,IAAa9b,KAAKia,sBAClBja,KAAKia,oBAAsB6B,KAnCvC,iCAoDQ,QAAS9b,KAAK+a,kBApDtB,gCAwDQ,OAAO/a,KAAK8Z,gB,2BAxDpB,GCzFA,WAGI,aAAc,KAFLiC,SAAiC,GAD9C,2BAWI3B,GAAA,SAAG4B,EAAcC,GACb,IAAKD,IAASC,EAAS,OAAO,EAE9B,IAAMC,EAAKlc,KAAK+b,SAASC,KAAUhc,KAAK+b,SAASC,GAAQ,IACzD,QAAIE,EAAGha,QAAQ+Z,IAAY,KAE3BC,EAAGlb,KAAKib,IACD,IAlBf,EAqBI1F,IAAA,SAAIyF,EAAcC,GACd,IAAKD,IAASC,EAAS,OAAO,EAE9B,IAAMC,EAAKlc,KAAK+b,SAASC,GACnBtc,EAAQwc,EAAGha,QAAQ+Z,GACzB,QAAIvc,GAAS,KAEbwc,EAAGnP,OAAOrN,GAAQ,IACX,IA7Bf,EAgCIgb,KAAA,SAAKsB,EAAcG,GACf,IAAMD,EAAKlc,KAAK+b,SAASC,GACzB,GAAIE,EACA,cAAgBA,KAAhB,eACIvQ,EADJ,SACMwQ,KApClB,M,s1BCkBeC,GAhBQ,SAAC,GAAiB,IAAfC,EAAe,EAAfA,SAAe,EACfC,mBCFnB,SAAsBpN,GAKzB,IAAIqN,GAJCrN,GAAsC,oBAAdsN,WAA6BA,UAAUC,KAAOD,UAAUC,IAAIvN,gBACrFA,EAAgB,SAAA2K,GAAO,OAAI2C,UAAUC,IAAIvN,cAAc2K,KAI3D,IAAMlC,EAAM,IAAIiC,EAAI,CAChBkB,aAAc,WACV,GAAIyB,EAAK,OAAOtR,QAAQC,UACxB,IAAMwR,EAAY,IAAIzN,EAAUC,GAChCqN,EAAM,IAAInK,EAAMsK,GAChB,IAAM9I,EAAc,SAACnI,GAEjB,IADA,IACA,MADamL,EAAOsB,UAAUzM,EAAKkM,EAAIQ,cACvC,kBAAWpH,EAAX,QACI4G,EAAI+D,cAAc3K,KAE1B,OAAOwL,EAAIrL,OAAOrE,MAAK,kBAAM0P,EAAI3I,YAAYA,OAEjD9C,gBAAiB,SAAA7E,GACb,IAAMR,EAAMQ,EAAEiL,WACd,OAAOqF,EAAIzI,mBAAmBrI,GACzBoB,MAAK,eAAW,SAAAS,GAAG,OAAIxC,QAAQtD,IAAI8F,OAE5CuC,gBAAiB,WACb,IAAMlE,EAAI4Q,EAEV,OADAA,OAAM7b,EACCiL,EAAEkE,qBAIjB,OAAO8H,ED5B6BgF,IAA7BhF,EAD8B,aAEH2E,mBAAS3E,EAAIqB,YAAxCA,EAF8B,KAEnB4D,EAFmB,OAGDN,mBAAS3E,EAAIkF,YAA1CA,EAH8B,UAIrClF,EAAIyC,GAAG,WAAW,kBAAMwC,EAAajF,EAAIqB,cACzCrB,EAAIyC,GAAG,cAAc,kBAAMwC,EAAajF,EAAIkF,eAC5ClF,EAAIyC,GAAG,cAAc,kBAAMwC,EAAajF,EAAIqB,cAI5C,OACI,kBAAC,KAAc8D,SAAf,CAAwB7b,MAAO,CAAE0W,MAAKqB,YAAW6D,aAAY/B,aAH5C,kBAAMnD,EAAImD,gBAGgDjL,gBAFvD,kBAAM8H,EAAI9H,qBAGzBwM,I,aEbPU,GAAS,SAAC,GAAD,IAAGC,EAAH,mBACb,4BACEC,MAAO,CACLC,WADK,gBAELC,aAAa,YAGf,yBACEF,MAAO,CACLG,OADK,SAELC,SAFK,IAGLC,QAAQ,sBAGV,wBAAIL,MAAO,CAAEG,OAAQ,IACnB,2BACEG,GADF,IAEEN,MAAO,CACLO,MADK,QAELC,eAAe,SAnBZ,OAiCfV,gBAAsB,CACpBC,UAAU,IAGZ,U,UCQeU,IAjCA,SAAC,GAAiB,IAAfrB,EAAe,EAAfA,SACV9W,EAAO,OASb,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAQyX,UAAWzX,EAAKoY,KAAKC,aAAaC,QAC1C,yBACEZ,MAAO,CACLG,OAAQ,SACRC,SAAU,IACVC,QAAS,wBAGX,8BAAOjB,GACP,sCACK,IAAI9B,MAAOuD,cADhB,8B,uBCpCR,IAAI5kB,EAAU,EAAQ,QAClB6kB,EAAQtb,KAAKmJ,KAGjB1S,EAAQA,EAAQ+K,EAAI/K,EAAQgL,EAAI,EAAQ,OAAR,EAAoB,WAClD,OAAgC,GAAzB6Z,EAAM,WAAY,IAA4B,GAAhBA,EAAMrf,UACzC,OAAQ,CACVkN,KAAM,SAAcM,EAAG8R,GACrB,IACIC,GAAM/R,EACNgS,GAAMF,EACNG,EAHS,MAGKF,EACdG,EAJS,MAIKF,EAClB,OAAO,EAAIC,EAAKC,IALH,MAKmBH,IAAO,IAAMG,EAAKD,GALrC,MAKoDD,IAAO,KAAO,KAAO,O,qBCb1F,IAAIxkB,EAAY,EAAQ,QACpBC,EAAW,EAAQ,QACvB4K,EAAOC,QAAU,SAAUtF,GACzB,QAAWwB,IAAPxB,EAAkB,OAAO,EAC7B,IAAImf,EAAS3kB,EAAUwF,GACnBR,EAAS/E,EAAS0kB,GACtB,GAAIA,IAAW3f,EAAQ,MAAMlD,WAAW,iBACxC,OAAOkD,I,qBCOT,IAfA,IASI4f,EATAtlB,EAAS,EAAQ,QACjBQ,EAAO,EAAQ,QACfiB,EAAM,EAAQ,QACd6D,EAAQ7D,EAAI,eACZ8D,EAAO9D,EAAI,QACX0K,KAASnM,EAAO8C,cAAe9C,EAAOgD,UACtCoC,EAAS+G,EACT/E,EAAI,EAIJme,EAAyB,iHAE3BC,MAAM,KAEDpe,EAPC,IAQFke,EAAQtlB,EAAOulB,EAAuBne,QACxC5G,EAAK8kB,EAAM/X,UAAWjI,GAAO,GAC7B9E,EAAK8kB,EAAM/X,UAAWhI,GAAM,IACvBH,GAAS,EAGlBmG,EAAOC,QAAU,CACfW,IAAKA,EACL/G,OAAQA,EACRE,MAAOA,EACPC,KAAMA,I,qBC1BR,EAAQ,OAAR,CAA0B,QAAS,GAAG,SAAU2S,GAC9C,OAAO,SAAoB3L,EAAMtC,EAAYvE,GAC3C,OAAOwS,EAAKlR,KAAMuF,EAAMtC,EAAYvE,Q,kCCAxC,IAAIxE,EAAW,EAAQ,QACnBL,EAAkB,EAAQ,QAC1BF,EAAW,EAAQ,QACvB4K,EAAOC,QAAU,SAAcvD,GAO7B,IANA,IAAIxC,EAAIvE,EAAS8F,MACbtB,EAAS/E,EAAS8E,EAAEC,QACpB6B,EAAOC,UAAU9B,OACjBgB,EAAQ7F,EAAgB0G,EAAO,EAAIC,UAAU,QAAKE,EAAWhC,GAC7DqE,EAAMxC,EAAO,EAAIC,UAAU,QAAKE,EAChC+d,OAAiB/d,IAARqC,EAAoBrE,EAAS7E,EAAgBkJ,EAAKrE,GACxD+f,EAAS/e,GAAOjB,EAAEiB,KAAWuB,EACpC,OAAOxC,I,qBCbT,EAAQ,OAAR,CAA0B,UAAW,GAAG,SAAUyS,GAChD,OAAO,SAAsB3L,EAAMtC,EAAYvE,GAC7C,OAAOwS,EAAKlR,KAAMuF,EAAMtC,EAAYvE,Q,qBCFxC,EAAQ,OAAR,CAA0B,UAAW,GAAG,SAAUwS,GAChD,OAAO,SAAsB3L,EAAMtC,EAAYvE,GAC7C,OAAOwS,EAAKlR,KAAMuF,EAAMtC,EAAYvE,Q,8ICFxC,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAQR,IAAIggB,EAAU,SAAUla,GACtB,aAEA,IAAIma,EAAKC,OAAOrY,UACZsY,EAASF,EAAGG,eAGZC,EAA4B,mBAAXC,OAAwBA,OAAS,GAClDC,EAAiBF,EAAQze,UAAY,aACrC4e,EAAsBH,EAAQI,eAAiB,kBAC/CC,EAAoBL,EAAQM,aAAe,gBAE/C,SAASC,EAAKC,EAASC,EAASC,EAAMC,GAEpC,IAAIC,EAAiBH,GAAWA,EAAQjZ,qBAAqBqZ,EAAYJ,EAAUI,EAC/EC,EAAYjB,OAAOxkB,OAAOulB,EAAepZ,WACzCqU,EAAU,IAAIkF,EAAQJ,GAAe,IAIzC,OADAG,EAAUE,QA+LZ,SAA0BR,EAASE,EAAM7E,GACvC,IAAIoF,EAnKuB,iBAoK3B,OAAO,SAAgBC,EAAQC,GAC7B,GAnKoB,cAmKhBF,EACF,MAAM,IAAIzT,MAAM,gCAGlB,GAtKoB,cAsKhByT,EAA6B,CAC/B,GAAe,UAAXC,EACF,MAAMC,EAKR,OAAOC,IAMT,IAHAvF,EAAQqF,OAASA,EACjBrF,EAAQsF,IAAMA,IAED,CACX,IAAIE,EAAWxF,EAAQwF,SAEvB,GAAIA,EAAU,CACZ,IAAIC,EAAiBC,EAAoBF,EAAUxF,GAEnD,GAAIyF,EAAgB,CAClB,GAAIA,IAAmBE,EAAkB,SACzC,OAAOF,GAIX,GAAuB,SAAnBzF,EAAQqF,OAGVrF,EAAQ4F,KAAO5F,EAAQ6F,MAAQ7F,EAAQsF,SAClC,GAAuB,UAAnBtF,EAAQqF,OAAoB,CACrC,GAvMqB,mBAuMjBD,EAEF,MADAA,EArMc,YAsMRpF,EAAQsF,IAGhBtF,EAAQ8F,kBAAkB9F,EAAQsF,SACN,WAAnBtF,EAAQqF,QACjBrF,EAAQ+F,OAAO,SAAU/F,EAAQsF,KAGnCF,EA/MkB,YAgNlB,IAAIY,EAASC,EAAStB,EAASE,EAAM7E,GAErC,GAAoB,WAAhBgG,EAAO5E,KAAmB,CAK5B,GAFAgE,EAAQpF,EAAQ7Z,KApNA,YAFK,iBAwNjB6f,EAAOV,MAAQK,EACjB,SAGF,MAAO,CACLtf,MAAO2f,EAAOV,IACdnf,KAAM6Z,EAAQ7Z,MAES,UAAhB6f,EAAO5E,OAChBgE,EA/NgB,YAkOhBpF,EAAQqF,OAAS,QACjBrF,EAAQsF,IAAMU,EAAOV,OAnQPY,CAAiBvB,EAASE,EAAM7E,GAC7CiF,EAcT,SAASgB,EAASE,EAAIC,EAAKd,GACzB,IACE,MAAO,CACLlE,KAAM,SACNkE,IAAKa,EAAGlgB,KAAKmgB,EAAKd,IAEpB,MAAO5S,GACP,MAAO,CACL0O,KAAM,QACNkE,IAAK5S,IApBX9I,EAAQ8a,KAAOA,EAyBf,IAMIiB,EAAmB,GAKvB,SAASX,KAET,SAASqB,KAET,SAASC,KAIT,IAAIC,EAAoB,GAExBA,EAAkBlC,GAAkB,WAClC,OAAOjf,MAGT,IAAIohB,EAAWxC,OAAOvkB,eAClBgnB,EAA0BD,GAAYA,EAASA,EAAS1kB,EAAO,MAE/D2kB,GAA2BA,IAA4B1C,GAAME,EAAOhe,KAAKwgB,EAAyBpC,KAGpGkC,EAAoBE,GAGtB,IAAIC,EAAKJ,EAA2B3a,UAAYqZ,EAAUrZ,UAAYqY,OAAOxkB,OAAO+mB,GAMpF,SAASI,EAAsBhb,GAC7B,CAAC,OAAQ,QAAS,UAAUtE,SAAQ,SAAUge,GAC5C1Z,EAAU0Z,GAAU,SAAUC,GAC5B,OAAOlgB,KAAK+f,QAAQE,EAAQC,OAqClC,SAASsB,EAAc3B,EAAW4B,GAgChC,IAAIC,EA4BJ1hB,KAAK+f,QA1BL,SAAiBE,EAAQC,GACvB,SAASyB,IACP,OAAO,IAAIF,GAAY,SAAUvW,EAAS0B,IAnC9C,SAASgV,EAAO3B,EAAQC,EAAKhV,EAAS0B,GACpC,IAAIgU,EAASC,EAAShB,EAAUI,GAASJ,EAAWK,GAEpD,GAAoB,UAAhBU,EAAO5E,KAEJ,CACL,IAAIrc,EAASihB,EAAOV,IAChBjf,EAAQtB,EAAOsB,MAEnB,OAAIA,GAA0B,iBAAVA,GAAsB4d,EAAOhe,KAAKI,EAAO,WACpDwgB,EAAYvW,QAAQjK,EAAM4gB,SAAShV,MAAK,SAAU5L,GACvD2gB,EAAO,OAAQ3gB,EAAOiK,EAAS0B,MAC9B,SAAUU,GACXsU,EAAO,QAAStU,EAAKpC,EAAS0B,MAI3B6U,EAAYvW,QAAQjK,GAAO4L,MAAK,SAAUiV,GAI/CniB,EAAOsB,MAAQ6gB,EACf5W,EAAQvL,MACP,SAAU4P,GAGX,OAAOqS,EAAO,QAASrS,EAAOrE,EAAS0B,MAtBzCA,EAAOgU,EAAOV,KAgCZ0B,CAAO3B,EAAQC,EAAKhV,EAAS0B,MAIjC,OAAO8U,EAYPA,EAAkBA,EAAgB7U,KAAK8U,EAEvCA,GAA8BA,KAyGlC,SAASrB,EAAoBF,EAAUxF,GACrC,IAAIqF,EAASG,EAAS9f,SAASsa,EAAQqF,QAEvC,QA9REvf,IA8REuf,EAAsB,CAKxB,GAFArF,EAAQwF,SAAW,KAEI,UAAnBxF,EAAQqF,OAAoB,CAE9B,GAAIG,EAAS9f,SAAiB,SAG5Bsa,EAAQqF,OAAS,SACjBrF,EAAQsF,SAzSZxf,EA0SI4f,EAAoBF,EAAUxF,GAEP,UAAnBA,EAAQqF,QAGV,OAAOM,EAIX3F,EAAQqF,OAAS,QACjBrF,EAAQsF,IAAM,IAAIzkB,UAAU,kDAG9B,OAAO8kB,EAGT,IAAIK,EAASC,EAASZ,EAAQG,EAAS9f,SAAUsa,EAAQsF,KAEzD,GAAoB,UAAhBU,EAAO5E,KAIT,OAHApB,EAAQqF,OAAS,QACjBrF,EAAQsF,IAAMU,EAAOV,IACrBtF,EAAQwF,SAAW,KACZG,EAGT,IAAIhN,EAAOqN,EAAOV,IAElB,OAAK3M,EAODA,EAAKxS,MAGP6Z,EAAQwF,EAAS2B,YAAcxO,EAAKtS,MAEpC2Z,EAAQ9Z,KAAOsf,EAAS4B,QAOD,WAAnBpH,EAAQqF,SACVrF,EAAQqF,OAAS,OACjBrF,EAAQsF,SA1VVxf,GAmWFka,EAAQwF,SAAW,KACZG,GANEhN,GAxBPqH,EAAQqF,OAAS,QACjBrF,EAAQsF,IAAM,IAAIzkB,UAAU,oCAC5Bmf,EAAQwF,SAAW,KACZG,GA+CX,SAAS0B,EAAaC,GACpB,IAAIC,EAAQ,CACVC,OAAQF,EAAK,IAGX,KAAKA,IACPC,EAAME,SAAWH,EAAK,IAGpB,KAAKA,IACPC,EAAMG,WAAaJ,EAAK,GACxBC,EAAMI,SAAWL,EAAK,IAGxBliB,KAAKwiB,WAAWxhB,KAAKmhB,GAGvB,SAASM,EAAcN,GACrB,IAAIvB,EAASuB,EAAMO,YAAc,GACjC9B,EAAO5E,KAAO,gBACP4E,EAAOV,IACdiC,EAAMO,WAAa9B,EAGrB,SAASd,EAAQJ,GAIf1f,KAAKwiB,WAAa,CAAC,CACjBJ,OAAQ,SAEV1C,EAAYzd,QAAQggB,EAAcjiB,MAClCA,KAAK2iB,OAAM,GAgCb,SAASjmB,EAAOkmB,GACd,GAAIA,EAAU,CACZ,IAAIC,EAAiBD,EAAS3D,GAE9B,GAAI4D,EACF,OAAOA,EAAehiB,KAAK+hB,GAG7B,GAA6B,mBAAlBA,EAAS9hB,KAClB,OAAO8hB,EAGT,IAAKE,MAAMF,EAASlkB,QAAS,CAC3B,IAAI0B,GAAK,EACLU,EAAO,SAASA,IAClB,OAASV,EAAIwiB,EAASlkB,QACpB,GAAImgB,EAAOhe,KAAK+hB,EAAUxiB,GAGxB,OAFAU,EAAKG,MAAQ2hB,EAASxiB,GACtBU,EAAKC,MAAO,EACLD,EAMX,OAFAA,EAAKG,WA/cTP,EAgdII,EAAKC,MAAO,EACLD,GAGT,OAAOA,EAAKA,KAAOA,GAKvB,MAAO,CACLA,KAAMqf,GAMV,SAASA,IACP,MAAO,CACLlf,WAleAP,EAmeAK,MAAM,GA+LV,OAplBAkgB,EAAkB1a,UAAY+a,EAAGhd,YAAc4c,EAC/CA,EAA2B5c,YAAc2c,EACzCC,EAA2B9B,GAAqB6B,EAAkB8B,YAAc,oBAWhFve,EAAQwe,oBAAsB,SAAUC,GACtC,IAAIC,EAAyB,mBAAXD,GAAyBA,EAAO3e,YAClD,QAAO4e,IAAOA,IAASjC,GAEa,uBAAnCiC,EAAKH,aAAeG,EAAKvc,QAG5BnC,EAAQ2e,KAAO,SAAUF,GAYvB,OAXIrE,OAAOwE,eACTxE,OAAOwE,eAAeH,EAAQ/B,IAE9B+B,EAAOI,UAAYnC,EAEb9B,KAAqB6D,IACzBA,EAAO7D,GAAqB,sBAIhC6D,EAAO1c,UAAYqY,OAAOxkB,OAAOknB,GAC1B2B,GAOTze,EAAQ8e,MAAQ,SAAUpD,GACxB,MAAO,CACL2B,QAAS3B,IAmEbqB,EAAsBC,EAAcjb,WAEpCib,EAAcjb,UAAU2Y,GAAuB,WAC7C,OAAOlf,MAGTwE,EAAQgd,cAAgBA,EAIxBhd,EAAQ+e,MAAQ,SAAUhE,EAASC,EAASC,EAAMC,EAAa+B,QACzC,IAAhBA,IAAwBA,EAAcxW,SAC1C,IAAI5E,EAAO,IAAImb,EAAclC,EAAKC,EAASC,EAASC,EAAMC,GAAc+B,GACxE,OAAOjd,EAAQwe,oBAAoBxD,GAAWnZ,EAC5CA,EAAKvF,OAAO+L,MAAK,SAAUlN,GAC3B,OAAOA,EAAOoB,KAAOpB,EAAOsB,MAAQoF,EAAKvF,WAgK7CygB,EAAsBD,GACtBA,EAAGlC,GAAqB,YAMxBkC,EAAGrC,GAAkB,WACnB,OAAOjf,MAGTshB,EAAG1jB,SAAW,WACZ,MAAO,sBAsCT4G,EAAQ5H,KAAO,SAAU4mB,GACvB,IAAI5mB,EAAO,GAEX,IAAK,IAAIiD,KAAO2jB,EACd5mB,EAAKoE,KAAKnB,GAMZ,OAHAjD,EAAK2F,UAGE,SAASzB,IACd,KAAOlE,EAAK8B,QAAQ,CAClB,IAAImB,EAAMjD,EAAK6mB,MAEf,GAAI5jB,KAAO2jB,EAGT,OAFA1iB,EAAKG,MAAQpB,EACbiB,EAAKC,MAAO,EACLD,EAQX,OADAA,EAAKC,MAAO,EACLD,IA0CX0D,EAAQ9H,OAASA,EASjBojB,EAAQvZ,UAAY,CAClBjC,YAAawb,EACb6C,MAAO,SAAee,GAYpB,GAXA1jB,KAAK2jB,KAAO,EACZ3jB,KAAKc,KAAO,EAGZd,KAAKwgB,KAAOxgB,KAAKygB,WA9ejB/f,EA+eAV,KAAKe,MAAO,EACZf,KAAKogB,SAAW,KAChBpgB,KAAKigB,OAAS,OACdjgB,KAAKkgB,SAlfLxf,EAmfAV,KAAKwiB,WAAWvgB,QAAQwgB,IAEnBiB,EACH,IAAK,IAAI/c,KAAQ3G,KAEQ,MAAnB2G,EAAK2H,OAAO,IAAcuQ,EAAOhe,KAAKb,KAAM2G,KAAUmc,OAAOnc,EAAKjJ,MAAM,MAC1EsC,KAAK2G,QAzfXjG,IA8fFkjB,KAAM,WACJ5jB,KAAKe,MAAO,EACZ,IACI8iB,EADY7jB,KAAKwiB,WAAW,GACLE,WAE3B,GAAwB,UAApBmB,EAAW7H,KACb,MAAM6H,EAAW3D,IAGnB,OAAOlgB,KAAK8jB,MAEdpD,kBAAmB,SAA2B7F,GAC5C,GAAI7a,KAAKe,KACP,MAAM8Z,EAGR,IAAID,EAAU5a,KAEd,SAAS+jB,EAAOC,EAAKC,GAYnB,OAXArD,EAAO5E,KAAO,QACd4E,EAAOV,IAAMrF,EACbD,EAAQ9Z,KAAOkjB,EAEXC,IAGFrJ,EAAQqF,OAAS,OACjBrF,EAAQsF,SAzhBZxf,KA4hBWujB,EAGX,IAAK,IAAI7jB,EAAIJ,KAAKwiB,WAAW9jB,OAAS,EAAG0B,GAAK,IAAKA,EAAG,CACpD,IAAI+hB,EAAQniB,KAAKwiB,WAAWpiB,GACxBwgB,EAASuB,EAAMO,WAEnB,GAAqB,SAAjBP,EAAMC,OAIR,OAAO2B,EAAO,OAGhB,GAAI5B,EAAMC,QAAUpiB,KAAK2jB,KAAM,CAC7B,IAAIO,EAAWrF,EAAOhe,KAAKshB,EAAO,YAC9BgC,EAAatF,EAAOhe,KAAKshB,EAAO,cAEpC,GAAI+B,GAAYC,EAAY,CAC1B,GAAInkB,KAAK2jB,KAAOxB,EAAME,SACpB,OAAO0B,EAAO5B,EAAME,UAAU,GACzB,GAAIriB,KAAK2jB,KAAOxB,EAAMG,WAC3B,OAAOyB,EAAO5B,EAAMG,iBAEjB,GAAI4B,GACT,GAAIlkB,KAAK2jB,KAAOxB,EAAME,SACpB,OAAO0B,EAAO5B,EAAME,UAAU,OAE3B,KAAI8B,EAKT,MAAM,IAAI5X,MAAM,0CAJhB,GAAIvM,KAAK2jB,KAAOxB,EAAMG,WACpB,OAAOyB,EAAO5B,EAAMG,gBAQ9B3B,OAAQ,SAAgB3E,EAAMkE,GAC5B,IAAK,IAAI9f,EAAIJ,KAAKwiB,WAAW9jB,OAAS,EAAG0B,GAAK,IAAKA,EAAG,CACpD,IAAI+hB,EAAQniB,KAAKwiB,WAAWpiB,GAE5B,GAAI+hB,EAAMC,QAAUpiB,KAAK2jB,MAAQ9E,EAAOhe,KAAKshB,EAAO,eAAiBniB,KAAK2jB,KAAOxB,EAAMG,WAAY,CACjG,IAAI8B,EAAejC,EACnB,OAIAiC,IAA0B,UAATpI,GAA6B,aAATA,IAAwBoI,EAAahC,QAAUlC,GAAOA,GAAOkE,EAAa9B,aAGjH8B,EAAe,MAGjB,IAAIxD,EAASwD,EAAeA,EAAa1B,WAAa,GAItD,OAHA9B,EAAO5E,KAAOA,EACd4E,EAAOV,IAAMA,EAETkE,GACFpkB,KAAKigB,OAAS,OACdjgB,KAAKc,KAAOsjB,EAAa9B,WAClB/B,GAGFvgB,KAAKqkB,SAASzD,IAEvByD,SAAU,SAAkBzD,EAAQ2B,GAClC,GAAoB,UAAhB3B,EAAO5E,KACT,MAAM4E,EAAOV,IAaf,MAVoB,UAAhBU,EAAO5E,MAAoC,aAAhB4E,EAAO5E,KACpChc,KAAKc,KAAO8f,EAAOV,IACM,WAAhBU,EAAO5E,MAChBhc,KAAK8jB,KAAO9jB,KAAKkgB,IAAMU,EAAOV,IAC9BlgB,KAAKigB,OAAS,SACdjgB,KAAKc,KAAO,OACa,WAAhB8f,EAAO5E,MAAqBuG,IACrCviB,KAAKc,KAAOyhB,GAGPhC,GAET+D,OAAQ,SAAgBhC,GACtB,IAAK,IAAIliB,EAAIJ,KAAKwiB,WAAW9jB,OAAS,EAAG0B,GAAK,IAAKA,EAAG,CACpD,IAAI+hB,EAAQniB,KAAKwiB,WAAWpiB,GAE5B,GAAI+hB,EAAMG,aAAeA,EAGvB,OAFAtiB,KAAKqkB,SAASlC,EAAMO,WAAYP,EAAMI,UACtCE,EAAcN,GACP5B,IAIb,MAAS,SAAgB6B,GACvB,IAAK,IAAIhiB,EAAIJ,KAAKwiB,WAAW9jB,OAAS,EAAG0B,GAAK,IAAKA,EAAG,CACpD,IAAI+hB,EAAQniB,KAAKwiB,WAAWpiB,GAE5B,GAAI+hB,EAAMC,SAAWA,EAAQ,CAC3B,IAAIxB,EAASuB,EAAMO,WAEnB,GAAoB,UAAhB9B,EAAO5E,KAAkB,CAC3B,IAAIuI,EAAS3D,EAAOV,IACpBuC,EAAcN,GAGhB,OAAOoC,GAMX,MAAM,IAAIhY,MAAM,0BAElBiY,cAAe,SAAuB5B,EAAUb,EAAYC,GAa1D,OAZAhiB,KAAKogB,SAAW,CACd9f,SAAU5D,EAAOkmB,GACjBb,WAAYA,EACZC,QAASA,GAGS,SAAhBhiB,KAAKigB,SAGPjgB,KAAKkgB,SAxpBPxf,GA2pBO6f,IAOJ/b,EAvqBK,CA4qBeD,EAAOC,SAEpC,IACEigB,mBAAqB/F,EACrB,MAAOgG,GAUPpe,SAAS,IAAK,yBAAdA,CAAwCoY,K,qBCxtB1Cna,EAAOC,QAAU,EAAQ,S,kCCEzB,IAAItK,EAAW,EAAQ,QACnBL,EAAkB,EAAQ,QAC1BF,EAAW,EAAQ,QAEvB4K,EAAOC,QAAU,GAAGjD,YAAc,SAAoBC,EAAkBC,GACtE,IAAIhD,EAAIvE,EAAS8F,MACbuD,EAAM5J,EAAS8E,EAAEC,QACjB6e,EAAK1jB,EAAgB2H,EAAQ+B,GAC7ByD,EAAOnN,EAAgB4H,EAAO8B,GAC9BR,EAAMvC,UAAU9B,OAAS,EAAI8B,UAAU,QAAKE,EAC5CikB,EAAQliB,KAAKmiB,UAAalkB,IAARqC,EAAoBQ,EAAM1J,EAAgBkJ,EAAKQ,IAAQyD,EAAMzD,EAAMga,GACrFsH,EAAM,EAMV,IALI7d,EAAOuW,GAAMA,EAAKvW,EAAO2d,IAC3BE,GAAO,EACP7d,GAAQ2d,EAAQ,EAChBpH,GAAMoH,EAAQ,GAETA,KAAU,GACX3d,KAAQvI,EAAGA,EAAE8e,GAAM9e,EAAEuI,UACbvI,EAAE8e,GACdA,GAAMsH,EACN7d,GAAQ6d,EACR,OAAOpmB,I,qBCxBX,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAER,EAAQ,QAQP,SAAUzF,GACT,aAEA,IAAI2lB,EAAKC,OAAOrY,UACZsY,EAASF,EAAGG,eAGZC,EAA4B,mBAAXC,OAAwBA,OAAS,GAClDC,EAAiBF,EAAQze,UAAY,aACrC4e,EAAsBH,EAAQI,eAAiB,kBAC/CC,EAAoBL,EAAQM,aAAe,gBAC3CyF,EAA6B,iBAAXvgB,EAClBma,EAAU1lB,EAAOyrB,mBAErB,GAAI/F,EACEoG,IAGFvgB,EAAOC,QAAUka,OAJrB,EAcAA,EAAU1lB,EAAOyrB,mBAAqBK,EAAWvgB,EAAOC,QAAU,IAa1D8a,KAAOA,EAyBf,IAMIiB,EAAmB,GAanBY,EAAoB,GAExBA,EAAkBlC,GAAkB,WAClC,OAAOjf,MAGT,IAAIohB,EAAWxC,OAAOvkB,eAClBgnB,EAA0BD,GAAYA,EAASA,EAAS1kB,EAAO,MAE/D2kB,GAA2BA,IAA4B1C,GAAME,EAAOhe,KAAKwgB,EAAyBpC,KAGpGkC,EAAoBE,GAGtB,IAAIC,EAAKJ,EAA2B3a,UAAYqZ,EAAUrZ,UAAYqY,OAAOxkB,OAAO+mB,GACpFF,EAAkB1a,UAAY+a,EAAGhd,YAAc4c,EAC/CA,EAA2B5c,YAAc2c,EACzCC,EAA2B9B,GAAqB6B,EAAkB8B,YAAc,oBAWhFrE,EAAQsE,oBAAsB,SAAUC,GACtC,IAAIC,EAAyB,mBAAXD,GAAyBA,EAAO3e,YAClD,QAAO4e,IAAOA,IAASjC,GAEa,uBAAnCiC,EAAKH,aAAeG,EAAKvc,QAG5B+X,EAAQyE,KAAO,SAAUF,GAYvB,OAXIrE,OAAOwE,eACTxE,OAAOwE,eAAeH,EAAQ/B,IAE9B+B,EAAOI,UAAYnC,EAEb9B,KAAqB6D,IACzBA,EAAO7D,GAAqB,sBAIhC6D,EAAO1c,UAAYqY,OAAOxkB,OAAOknB,GAC1B2B,GAOTvE,EAAQ4E,MAAQ,SAAUpD,GACxB,MAAO,CACL2B,QAAS3B,IA2EbqB,EAAsBC,EAAcjb,WAEpCib,EAAcjb,UAAU2Y,GAAuB,WAC7C,OAAOlf,MAGT0e,EAAQ8C,cAAgBA,EAIxB9C,EAAQ6E,MAAQ,SAAUhE,EAASC,EAASC,EAAMC,GAChD,IAAIrZ,EAAO,IAAImb,EAAclC,EAAKC,EAASC,EAASC,EAAMC,IAC1D,OAAOhB,EAAQsE,oBAAoBxD,GAAWnZ,EAC5CA,EAAKvF,OAAO+L,MAAK,SAAUlN,GAC3B,OAAOA,EAAOoB,KAAOpB,EAAOsB,MAAQoF,EAAKvF,WA+J7CygB,EAAsBD,GACtBA,EAAGlC,GAAqB,YAMxBkC,EAAGrC,GAAkB,WACnB,OAAOjf,MAGTshB,EAAG1jB,SAAW,WACZ,MAAO,sBAsCT8gB,EAAQ9hB,KAAO,SAAU4mB,GACvB,IAAI5mB,EAAO,GAEX,IAAK,IAAIiD,KAAO2jB,EACd5mB,EAAKoE,KAAKnB,GAMZ,OAHAjD,EAAK2F,UAGE,SAASzB,IACd,KAAOlE,EAAK8B,QAAQ,CAClB,IAAImB,EAAMjD,EAAK6mB,MAEf,GAAI5jB,KAAO2jB,EAGT,OAFA1iB,EAAKG,MAAQpB,EACbiB,EAAKC,MAAO,EACLD,EAQX,OADAA,EAAKC,MAAO,EACLD,IA0CX4d,EAAQhiB,OAASA,EASjBojB,EAAQvZ,UAAY,CAClBjC,YAAawb,EACb6C,MAAO,SAAee,GAYpB,GAXA1jB,KAAK2jB,KAAO,EACZ3jB,KAAKc,KAAO,EAGZd,KAAKwgB,KAAOxgB,KAAKygB,WAtgBjB/f,EAugBAV,KAAKe,MAAO,EACZf,KAAKogB,SAAW,KAChBpgB,KAAKigB,OAAS,OACdjgB,KAAKkgB,SA1gBLxf,EA2gBAV,KAAKwiB,WAAWvgB,QAAQwgB,IAEnBiB,EACH,IAAK,IAAI/c,KAAQ3G,KAEQ,MAAnB2G,EAAK2H,OAAO,IAAcuQ,EAAOhe,KAAKb,KAAM2G,KAAUmc,OAAOnc,EAAKjJ,MAAM,MAC1EsC,KAAK2G,QAjhBXjG,IAshBFkjB,KAAM,WACJ5jB,KAAKe,MAAO,EACZ,IACI8iB,EADY7jB,KAAKwiB,WAAW,GACLE,WAE3B,GAAwB,UAApBmB,EAAW7H,KACb,MAAM6H,EAAW3D,IAGnB,OAAOlgB,KAAK8jB,MAEdpD,kBAAmB,SAA2B7F,GAC5C,GAAI7a,KAAKe,KACP,MAAM8Z,EAGR,IAAID,EAAU5a,KAEd,SAAS+jB,EAAOC,EAAKC,GAYnB,OAXArD,EAAO5E,KAAO,QACd4E,EAAOV,IAAMrF,EACbD,EAAQ9Z,KAAOkjB,EAEXC,IAGFrJ,EAAQqF,OAAS,OACjBrF,EAAQsF,SAjjBZxf,KAojBWujB,EAGX,IAAK,IAAI7jB,EAAIJ,KAAKwiB,WAAW9jB,OAAS,EAAG0B,GAAK,IAAKA,EAAG,CACpD,IAAI+hB,EAAQniB,KAAKwiB,WAAWpiB,GACxBwgB,EAASuB,EAAMO,WAEnB,GAAqB,SAAjBP,EAAMC,OAIR,OAAO2B,EAAO,OAGhB,GAAI5B,EAAMC,QAAUpiB,KAAK2jB,KAAM,CAC7B,IAAIO,EAAWrF,EAAOhe,KAAKshB,EAAO,YAC9BgC,EAAatF,EAAOhe,KAAKshB,EAAO,cAEpC,GAAI+B,GAAYC,EAAY,CAC1B,GAAInkB,KAAK2jB,KAAOxB,EAAME,SACpB,OAAO0B,EAAO5B,EAAME,UAAU,GACzB,GAAIriB,KAAK2jB,KAAOxB,EAAMG,WAC3B,OAAOyB,EAAO5B,EAAMG,iBAEjB,GAAI4B,GACT,GAAIlkB,KAAK2jB,KAAOxB,EAAME,SACpB,OAAO0B,EAAO5B,EAAME,UAAU,OAE3B,KAAI8B,EAKT,MAAM,IAAI5X,MAAM,0CAJhB,GAAIvM,KAAK2jB,KAAOxB,EAAMG,WACpB,OAAOyB,EAAO5B,EAAMG,gBAQ9B3B,OAAQ,SAAgB3E,EAAMkE,GAC5B,IAAK,IAAI9f,EAAIJ,KAAKwiB,WAAW9jB,OAAS,EAAG0B,GAAK,IAAKA,EAAG,CACpD,IAAI+hB,EAAQniB,KAAKwiB,WAAWpiB,GAE5B,GAAI+hB,EAAMC,QAAUpiB,KAAK2jB,MAAQ9E,EAAOhe,KAAKshB,EAAO,eAAiBniB,KAAK2jB,KAAOxB,EAAMG,WAAY,CACjG,IAAI8B,EAAejC,EACnB,OAIAiC,IAA0B,UAATpI,GAA6B,aAATA,IAAwBoI,EAAahC,QAAUlC,GAAOA,GAAOkE,EAAa9B,aAGjH8B,EAAe,MAGjB,IAAIxD,EAASwD,EAAeA,EAAa1B,WAAa,GAItD,OAHA9B,EAAO5E,KAAOA,EACd4E,EAAOV,IAAMA,EAETkE,GACFpkB,KAAKigB,OAAS,OACdjgB,KAAKc,KAAOsjB,EAAa9B,WAClB/B,GAGFvgB,KAAKqkB,SAASzD,IAEvByD,SAAU,SAAkBzD,EAAQ2B,GAClC,GAAoB,UAAhB3B,EAAO5E,KACT,MAAM4E,EAAOV,IAaf,MAVoB,UAAhBU,EAAO5E,MAAoC,aAAhB4E,EAAO5E,KACpChc,KAAKc,KAAO8f,EAAOV,IACM,WAAhBU,EAAO5E,MAChBhc,KAAK8jB,KAAO9jB,KAAKkgB,IAAMU,EAAOV,IAC9BlgB,KAAKigB,OAAS,SACdjgB,KAAKc,KAAO,OACa,WAAhB8f,EAAO5E,MAAqBuG,IACrCviB,KAAKc,KAAOyhB,GAGPhC,GAET+D,OAAQ,SAAgBhC,GACtB,IAAK,IAAIliB,EAAIJ,KAAKwiB,WAAW9jB,OAAS,EAAG0B,GAAK,IAAKA,EAAG,CACpD,IAAI+hB,EAAQniB,KAAKwiB,WAAWpiB,GAE5B,GAAI+hB,EAAMG,aAAeA,EAGvB,OAFAtiB,KAAKqkB,SAASlC,EAAMO,WAAYP,EAAMI,UACtCE,EAAcN,GACP5B,IAIb,MAAS,SAAgB6B,GACvB,IAAK,IAAIhiB,EAAIJ,KAAKwiB,WAAW9jB,OAAS,EAAG0B,GAAK,IAAKA,EAAG,CACpD,IAAI+hB,EAAQniB,KAAKwiB,WAAWpiB,GAE5B,GAAI+hB,EAAMC,SAAWA,EAAQ,CAC3B,IAAIxB,EAASuB,EAAMO,WAEnB,GAAoB,UAAhB9B,EAAO5E,KAAkB,CAC3B,IAAIuI,EAAS3D,EAAOV,IACpBuC,EAAcN,GAGhB,OAAOoC,GAMX,MAAM,IAAIhY,MAAM,0BAElBiY,cAAe,SAAuB5B,EAAUb,EAAYC,GAa1D,OAZAhiB,KAAKogB,SAAW,CACd9f,SAAU5D,EAAOkmB,GACjBb,WAAYA,EACZC,QAASA,GAGS,SAAhBhiB,KAAKigB,SAGPjgB,KAAKkgB,SAhrBPxf,GAmrBO6f,IA1pBX,SAASjB,EAAKC,EAASC,EAASC,EAAMC,GAEpC,IAAIC,EAAiBH,GAAWA,EAAQjZ,qBAAqBqZ,EAAYJ,EAAUI,EAC/EC,EAAYjB,OAAOxkB,OAAOulB,EAAepZ,WACzCqU,EAAU,IAAIkF,EAAQJ,GAAe,IAIzC,OADAG,EAAUE,QAsMZ,SAA0BR,EAASE,EAAM7E,GACvC,IAAIoF,EA1KuB,iBA2K3B,OAAO,SAAgBC,EAAQC,GAC7B,GA1KoB,cA0KhBF,EACF,MAAM,IAAIzT,MAAM,gCAGlB,GA7KoB,cA6KhByT,EAA6B,CAC/B,GAAe,UAAXC,EACF,MAAMC,EAKR,OAAOC,IAMT,IAHAvF,EAAQqF,OAASA,EACjBrF,EAAQsF,IAAMA,IAED,CACX,IAAIE,EAAWxF,EAAQwF,SAEvB,GAAIA,EAAU,CACZ,IAAIC,EAAiBC,EAAoBF,EAAUxF,GAEnD,GAAIyF,EAAgB,CAClB,GAAIA,IAAmBE,EAAkB,SACzC,OAAOF,GAIX,GAAuB,SAAnBzF,EAAQqF,OAGVrF,EAAQ4F,KAAO5F,EAAQ6F,MAAQ7F,EAAQsF,SAClC,GAAuB,UAAnBtF,EAAQqF,OAAoB,CACrC,GA9MqB,mBA8MjBD,EAEF,MADAA,EA5Mc,YA6MRpF,EAAQsF,IAGhBtF,EAAQ8F,kBAAkB9F,EAAQsF,SACN,WAAnBtF,EAAQqF,QACjBrF,EAAQ+F,OAAO,SAAU/F,EAAQsF,KAGnCF,EAtNkB,YAuNlB,IAAIY,EAASC,EAAStB,EAASE,EAAM7E,GAErC,GAAoB,WAAhBgG,EAAO5E,KAAmB,CAK5B,GAFAgE,EAAQpF,EAAQ7Z,KA3NA,YAFK,iBA+NjB6f,EAAOV,MAAQK,EACjB,SAGF,MAAO,CACLtf,MAAO2f,EAAOV,IACdnf,KAAM6Z,EAAQ7Z,MAES,UAAhB6f,EAAO5E,OAChBgE,EAtOgB,YAyOhBpF,EAAQqF,OAAS,QACjBrF,EAAQsF,IAAMU,EAAOV,OA1QPY,CAAiBvB,EAASE,EAAM7E,GAC7CiF,EAcT,SAASgB,EAASE,EAAIC,EAAKd,GACzB,IACE,MAAO,CACLlE,KAAM,SACNkE,IAAKa,EAAGlgB,KAAKmgB,EAAKd,IAEpB,MAAO5S,GACP,MAAO,CACL0O,KAAM,QACNkE,IAAK5S,IAgBX,SAASsS,KAET,SAASqB,KAET,SAASC,KAyBT,SAASK,EAAsBhb,GAC7B,CAAC,OAAQ,QAAS,UAAUtE,SAAQ,SAAUge,GAC5C1Z,EAAU0Z,GAAU,SAAUC,GAC5B,OAAOlgB,KAAK+f,QAAQE,EAAQC,OAqClC,SAASsB,EAAc3B,GAwCrB,IAAI6B,EA4BJ1hB,KAAK+f,QA1BL,SAAiBE,EAAQC,GACvB,SAASyB,IACP,OAAO,IAAI1W,SAAQ,SAAUC,EAAS0B,IA3C1C,SAASgV,EAAO3B,EAAQC,EAAKhV,EAAS0B,GACpC,IAAIgU,EAASC,EAAShB,EAAUI,GAASJ,EAAWK,GAEpD,GAAoB,UAAhBU,EAAO5E,KAEJ,CACL,IAAIrc,EAASihB,EAAOV,IAChBjf,EAAQtB,EAAOsB,MAEnB,OAAIA,GAA0B,iBAAVA,GAAsB4d,EAAOhe,KAAKI,EAAO,WACpDgK,QAAQC,QAAQjK,EAAM4gB,SAAShV,MAAK,SAAU5L,GACnD2gB,EAAO,OAAQ3gB,EAAOiK,EAAS0B,MAC9B,SAAUU,GACXsU,EAAO,QAAStU,EAAKpC,EAAS0B,MAI3B3B,QAAQC,QAAQjK,GAAO4L,MAAK,SAAUiV,GAgB3CniB,EAAOsB,MAAQ6gB,EACf5W,EAAQvL,KACPiN,GA/BHA,EAAOgU,EAAOV,KAwCZ0B,CAAO3B,EAAQC,EAAKhV,EAAS0B,MAIjC,OAAO8U,EAYPA,EAAkBA,EAAgB7U,KAAK8U,EAEvCA,GAA8BA,KAwGlC,SAASrB,EAAoBF,EAAUxF,GACrC,IAAIqF,EAASG,EAAS9f,SAASsa,EAAQqF,QAEvC,QAvTEvf,IAuTEuf,EAAsB,CAKxB,GAFArF,EAAQwF,SAAW,KAEI,UAAnBxF,EAAQqF,OAAoB,CAC9B,GAAIG,EAAS9f,SAAiB,SAG5Bsa,EAAQqF,OAAS,SACjBrF,EAAQsF,SAjUZxf,EAkUI4f,EAAoBF,EAAUxF,GAEP,UAAnBA,EAAQqF,QAGV,OAAOM,EAIX3F,EAAQqF,OAAS,QACjBrF,EAAQsF,IAAM,IAAIzkB,UAAU,kDAG9B,OAAO8kB,EAGT,IAAIK,EAASC,EAASZ,EAAQG,EAAS9f,SAAUsa,EAAQsF,KAEzD,GAAoB,UAAhBU,EAAO5E,KAIT,OAHApB,EAAQqF,OAAS,QACjBrF,EAAQsF,IAAMU,EAAOV,IACrBtF,EAAQwF,SAAW,KACZG,EAGT,IAAIhN,EAAOqN,EAAOV,IAElB,OAAK3M,EAODA,EAAKxS,MAGP6Z,EAAQwF,EAAS2B,YAAcxO,EAAKtS,MAEpC2Z,EAAQ9Z,KAAOsf,EAAS4B,QAOD,WAAnBpH,EAAQqF,SACVrF,EAAQqF,OAAS,OACjBrF,EAAQsF,SAlXVxf,GA2XFka,EAAQwF,SAAW,KACZG,GANEhN,GAxBPqH,EAAQqF,OAAS,QACjBrF,EAAQsF,IAAM,IAAIzkB,UAAU,oCAC5Bmf,EAAQwF,SAAW,KACZG,GA+CX,SAAS0B,EAAaC,GACpB,IAAIC,EAAQ,CACVC,OAAQF,EAAK,IAGX,KAAKA,IACPC,EAAME,SAAWH,EAAK,IAGpB,KAAKA,IACPC,EAAMG,WAAaJ,EAAK,GACxBC,EAAMI,SAAWL,EAAK,IAGxBliB,KAAKwiB,WAAWxhB,KAAKmhB,GAGvB,SAASM,EAAcN,GACrB,IAAIvB,EAASuB,EAAMO,YAAc,GACjC9B,EAAO5E,KAAO,gBACP4E,EAAOV,IACdiC,EAAMO,WAAa9B,EAGrB,SAASd,EAAQJ,GAIf1f,KAAKwiB,WAAa,CAAC,CACjBJ,OAAQ,SAEV1C,EAAYzd,QAAQggB,EAAcjiB,MAClCA,KAAK2iB,OAAM,GAgCb,SAASjmB,EAAOkmB,GACd,GAAIA,EAAU,CACZ,IAAIC,EAAiBD,EAAS3D,GAE9B,GAAI4D,EACF,OAAOA,EAAehiB,KAAK+hB,GAG7B,GAA6B,mBAAlBA,EAAS9hB,KAClB,OAAO8hB,EAGT,IAAKE,MAAMF,EAASlkB,QAAS,CAC3B,IAAI0B,GAAK,EACLU,EAAO,SAASA,IAClB,OAASV,EAAIwiB,EAASlkB,QACpB,GAAImgB,EAAOhe,KAAK+hB,EAAUxiB,GAGxB,OAFAU,EAAKG,MAAQ2hB,EAASxiB,GACtBU,EAAKC,MAAO,EACLD,EAMX,OAFAA,EAAKG,WAveTP,EAweII,EAAKC,MAAO,EACLD,GAGT,OAAOA,EAAKA,KAAOA,GAKvB,MAAO,CACLA,KAAMqf,GAMV,SAASA,IACP,MAAO,CACLlf,WA1fAP,EA2fAK,MAAM,IAhgBX,CA8rBD,WACE,OAAOf,KADT,IAEOsG,SAAS,cAATA,K,kCC9tBP,gBAGMye,EAHN,OAGsBC,EAAMC,cAMzB,CAAEtN,SAAKjX,EAAWsY,WAAW,EAAO6D,YAAY,EAAO/B,kBAAcpa,EAAWmP,qBAAiBnP,IACpGqkB,EAAchC,YAAc,SAEbgC","file":"commons-f3ff7bcf09d867010646.js","sourcesContent":["'use strict';\nif (require('./_descriptors')) {\n  var LIBRARY = require('./_library');\n  var global = require('./_global');\n  var fails = require('./_fails');\n  var $export = require('./_export');\n  var $typed = require('./_typed');\n  var $buffer = require('./_typed-buffer');\n  var ctx = require('./_ctx');\n  var anInstance = require('./_an-instance');\n  var propertyDesc = require('./_property-desc');\n  var hide = require('./_hide');\n  var redefineAll = require('./_redefine-all');\n  var toInteger = require('./_to-integer');\n  var toLength = require('./_to-length');\n  var toIndex = require('./_to-index');\n  var toAbsoluteIndex = require('./_to-absolute-index');\n  var toPrimitive = require('./_to-primitive');\n  var has = require('./_has');\n  var classof = require('./_classof');\n  var isObject = require('./_is-object');\n  var toObject = require('./_to-object');\n  var isArrayIter = require('./_is-array-iter');\n  var create = require('./_object-create');\n  var getPrototypeOf = require('./_object-gpo');\n  var gOPN = require('./_object-gopn').f;\n  var getIterFn = require('./core.get-iterator-method');\n  var uid = require('./_uid');\n  var wks = require('./_wks');\n  var createArrayMethod = require('./_array-methods');\n  var createArrayIncludes = require('./_array-includes');\n  var speciesConstructor = require('./_species-constructor');\n  var ArrayIterators = require('./es6.array.iterator');\n  var Iterators = require('./_iterators');\n  var $iterDetect = require('./_iter-detect');\n  var setSpecies = require('./_set-species');\n  var arrayFill = require('./_array-fill');\n  var arrayCopyWithin = require('./_array-copy-within');\n  var $DP = require('./_object-dp');\n  var $GOPD = require('./_object-gopd');\n  var dP = $DP.f;\n  var gOPD = $GOPD.f;\n  var RangeError = global.RangeError;\n  var TypeError = global.TypeError;\n  var Uint8Array = global.Uint8Array;\n  var ARRAY_BUFFER = 'ArrayBuffer';\n  var SHARED_BUFFER = 'Shared' + ARRAY_BUFFER;\n  var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';\n  var PROTOTYPE = 'prototype';\n  var ArrayProto = Array[PROTOTYPE];\n  var $ArrayBuffer = $buffer.ArrayBuffer;\n  var $DataView = $buffer.DataView;\n  var arrayForEach = createArrayMethod(0);\n  var arrayFilter = createArrayMethod(2);\n  var arraySome = createArrayMethod(3);\n  var arrayEvery = createArrayMethod(4);\n  var arrayFind = createArrayMethod(5);\n  var arrayFindIndex = createArrayMethod(6);\n  var arrayIncludes = createArrayIncludes(true);\n  var arrayIndexOf = createArrayIncludes(false);\n  var arrayValues = ArrayIterators.values;\n  var arrayKeys = ArrayIterators.keys;\n  var arrayEntries = ArrayIterators.entries;\n  var arrayLastIndexOf = ArrayProto.lastIndexOf;\n  var arrayReduce = ArrayProto.reduce;\n  var arrayReduceRight = ArrayProto.reduceRight;\n  var arrayJoin = ArrayProto.join;\n  var arraySort = ArrayProto.sort;\n  var arraySlice = ArrayProto.slice;\n  var arrayToString = ArrayProto.toString;\n  var arrayToLocaleString = ArrayProto.toLocaleString;\n  var ITERATOR = wks('iterator');\n  var TAG = wks('toStringTag');\n  var TYPED_CONSTRUCTOR = uid('typed_constructor');\n  var DEF_CONSTRUCTOR = uid('def_constructor');\n  var ALL_CONSTRUCTORS = $typed.CONSTR;\n  var TYPED_ARRAY = $typed.TYPED;\n  var VIEW = $typed.VIEW;\n  var WRONG_LENGTH = 'Wrong length!';\n\n  var $map = createArrayMethod(1, function (O, length) {\n    return allocate(speciesConstructor(O, O[DEF_CONSTRUCTOR]), length);\n  });\n\n  var LITTLE_ENDIAN = fails(function () {\n    // eslint-disable-next-line no-undef\n    return new Uint8Array(new Uint16Array([1]).buffer)[0] === 1;\n  });\n\n  var FORCED_SET = !!Uint8Array && !!Uint8Array[PROTOTYPE].set && fails(function () {\n    new Uint8Array(1).set({});\n  });\n\n  var toOffset = function (it, BYTES) {\n    var offset = toInteger(it);\n    if (offset < 0 || offset % BYTES) throw RangeError('Wrong offset!');\n    return offset;\n  };\n\n  var validate = function (it) {\n    if (isObject(it) && TYPED_ARRAY in it) return it;\n    throw TypeError(it + ' is not a typed array!');\n  };\n\n  var allocate = function (C, length) {\n    if (!(isObject(C) && TYPED_CONSTRUCTOR in C)) {\n      throw TypeError('It is not a typed array constructor!');\n    } return new C(length);\n  };\n\n  var speciesFromList = function (O, list) {\n    return fromList(speciesConstructor(O, O[DEF_CONSTRUCTOR]), list);\n  };\n\n  var fromList = function (C, list) {\n    var index = 0;\n    var length = list.length;\n    var result = allocate(C, length);\n    while (length > index) result[index] = list[index++];\n    return result;\n  };\n\n  var addGetter = function (it, key, internal) {\n    dP(it, key, { get: function () { return this._d[internal]; } });\n  };\n\n  var $from = function from(source /* , mapfn, thisArg */) {\n    var O = toObject(source);\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var iterFn = getIterFn(O);\n    var i, length, values, result, step, iterator;\n    if (iterFn != undefined && !isArrayIter(iterFn)) {\n      for (iterator = iterFn.call(O), values = [], i = 0; !(step = iterator.next()).done; i++) {\n        values.push(step.value);\n      } O = values;\n    }\n    if (mapping && aLen > 2) mapfn = ctx(mapfn, arguments[2], 2);\n    for (i = 0, length = toLength(O.length), result = allocate(this, length); length > i; i++) {\n      result[i] = mapping ? mapfn(O[i], i) : O[i];\n    }\n    return result;\n  };\n\n  var $of = function of(/* ...items */) {\n    var index = 0;\n    var length = arguments.length;\n    var result = allocate(this, length);\n    while (length > index) result[index] = arguments[index++];\n    return result;\n  };\n\n  // iOS Safari 6.x fails here\n  var TO_LOCALE_BUG = !!Uint8Array && fails(function () { arrayToLocaleString.call(new Uint8Array(1)); });\n\n  var $toLocaleString = function toLocaleString() {\n    return arrayToLocaleString.apply(TO_LOCALE_BUG ? arraySlice.call(validate(this)) : validate(this), arguments);\n  };\n\n  var proto = {\n    copyWithin: function copyWithin(target, start /* , end */) {\n      return arrayCopyWithin.call(validate(this), target, start, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    every: function every(callbackfn /* , thisArg */) {\n      return arrayEvery(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    fill: function fill(value /* , start, end */) { // eslint-disable-line no-unused-vars\n      return arrayFill.apply(validate(this), arguments);\n    },\n    filter: function filter(callbackfn /* , thisArg */) {\n      return speciesFromList(this, arrayFilter(validate(this), callbackfn,\n        arguments.length > 1 ? arguments[1] : undefined));\n    },\n    find: function find(predicate /* , thisArg */) {\n      return arrayFind(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    findIndex: function findIndex(predicate /* , thisArg */) {\n      return arrayFindIndex(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    forEach: function forEach(callbackfn /* , thisArg */) {\n      arrayForEach(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    indexOf: function indexOf(searchElement /* , fromIndex */) {\n      return arrayIndexOf(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    includes: function includes(searchElement /* , fromIndex */) {\n      return arrayIncludes(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    join: function join(separator) { // eslint-disable-line no-unused-vars\n      return arrayJoin.apply(validate(this), arguments);\n    },\n    lastIndexOf: function lastIndexOf(searchElement /* , fromIndex */) { // eslint-disable-line no-unused-vars\n      return arrayLastIndexOf.apply(validate(this), arguments);\n    },\n    map: function map(mapfn /* , thisArg */) {\n      return $map(validate(this), mapfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    reduce: function reduce(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduce.apply(validate(this), arguments);\n    },\n    reduceRight: function reduceRight(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduceRight.apply(validate(this), arguments);\n    },\n    reverse: function reverse() {\n      var that = this;\n      var length = validate(that).length;\n      var middle = Math.floor(length / 2);\n      var index = 0;\n      var value;\n      while (index < middle) {\n        value = that[index];\n        that[index++] = that[--length];\n        that[length] = value;\n      } return that;\n    },\n    some: function some(callbackfn /* , thisArg */) {\n      return arraySome(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    sort: function sort(comparefn) {\n      return arraySort.call(validate(this), comparefn);\n    },\n    subarray: function subarray(begin, end) {\n      var O = validate(this);\n      var length = O.length;\n      var $begin = toAbsoluteIndex(begin, length);\n      return new (speciesConstructor(O, O[DEF_CONSTRUCTOR]))(\n        O.buffer,\n        O.byteOffset + $begin * O.BYTES_PER_ELEMENT,\n        toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - $begin)\n      );\n    }\n  };\n\n  var $slice = function slice(start, end) {\n    return speciesFromList(this, arraySlice.call(validate(this), start, end));\n  };\n\n  var $set = function set(arrayLike /* , offset */) {\n    validate(this);\n    var offset = toOffset(arguments[1], 1);\n    var length = this.length;\n    var src = toObject(arrayLike);\n    var len = toLength(src.length);\n    var index = 0;\n    if (len + offset > length) throw RangeError(WRONG_LENGTH);\n    while (index < len) this[offset + index] = src[index++];\n  };\n\n  var $iterators = {\n    entries: function entries() {\n      return arrayEntries.call(validate(this));\n    },\n    keys: function keys() {\n      return arrayKeys.call(validate(this));\n    },\n    values: function values() {\n      return arrayValues.call(validate(this));\n    }\n  };\n\n  var isTAIndex = function (target, key) {\n    return isObject(target)\n      && target[TYPED_ARRAY]\n      && typeof key != 'symbol'\n      && key in target\n      && String(+key) == String(key);\n  };\n  var $getDesc = function getOwnPropertyDescriptor(target, key) {\n    return isTAIndex(target, key = toPrimitive(key, true))\n      ? propertyDesc(2, target[key])\n      : gOPD(target, key);\n  };\n  var $setDesc = function defineProperty(target, key, desc) {\n    if (isTAIndex(target, key = toPrimitive(key, true))\n      && isObject(desc)\n      && has(desc, 'value')\n      && !has(desc, 'get')\n      && !has(desc, 'set')\n      // TODO: add validation descriptor w/o calling accessors\n      && !desc.configurable\n      && (!has(desc, 'writable') || desc.writable)\n      && (!has(desc, 'enumerable') || desc.enumerable)\n    ) {\n      target[key] = desc.value;\n      return target;\n    } return dP(target, key, desc);\n  };\n\n  if (!ALL_CONSTRUCTORS) {\n    $GOPD.f = $getDesc;\n    $DP.f = $setDesc;\n  }\n\n  $export($export.S + $export.F * !ALL_CONSTRUCTORS, 'Object', {\n    getOwnPropertyDescriptor: $getDesc,\n    defineProperty: $setDesc\n  });\n\n  if (fails(function () { arrayToString.call({}); })) {\n    arrayToString = arrayToLocaleString = function toString() {\n      return arrayJoin.call(this);\n    };\n  }\n\n  var $TypedArrayPrototype$ = redefineAll({}, proto);\n  redefineAll($TypedArrayPrototype$, $iterators);\n  hide($TypedArrayPrototype$, ITERATOR, $iterators.values);\n  redefineAll($TypedArrayPrototype$, {\n    slice: $slice,\n    set: $set,\n    constructor: function () { /* noop */ },\n    toString: arrayToString,\n    toLocaleString: $toLocaleString\n  });\n  addGetter($TypedArrayPrototype$, 'buffer', 'b');\n  addGetter($TypedArrayPrototype$, 'byteOffset', 'o');\n  addGetter($TypedArrayPrototype$, 'byteLength', 'l');\n  addGetter($TypedArrayPrototype$, 'length', 'e');\n  dP($TypedArrayPrototype$, TAG, {\n    get: function () { return this[TYPED_ARRAY]; }\n  });\n\n  // eslint-disable-next-line max-statements\n  module.exports = function (KEY, BYTES, wrapper, CLAMPED) {\n    CLAMPED = !!CLAMPED;\n    var NAME = KEY + (CLAMPED ? 'Clamped' : '') + 'Array';\n    var GETTER = 'get' + KEY;\n    var SETTER = 'set' + KEY;\n    var TypedArray = global[NAME];\n    var Base = TypedArray || {};\n    var TAC = TypedArray && getPrototypeOf(TypedArray);\n    var FORCED = !TypedArray || !$typed.ABV;\n    var O = {};\n    var TypedArrayPrototype = TypedArray && TypedArray[PROTOTYPE];\n    var getter = function (that, index) {\n      var data = that._d;\n      return data.v[GETTER](index * BYTES + data.o, LITTLE_ENDIAN);\n    };\n    var setter = function (that, index, value) {\n      var data = that._d;\n      if (CLAMPED) value = (value = Math.round(value)) < 0 ? 0 : value > 0xff ? 0xff : value & 0xff;\n      data.v[SETTER](index * BYTES + data.o, value, LITTLE_ENDIAN);\n    };\n    var addElement = function (that, index) {\n      dP(that, index, {\n        get: function () {\n          return getter(this, index);\n        },\n        set: function (value) {\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n    if (FORCED) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME, '_d');\n        var index = 0;\n        var offset = 0;\n        var buffer, byteLength, length, klass;\n        if (!isObject(data)) {\n          length = toIndex(data);\n          byteLength = length * BYTES;\n          buffer = new $ArrayBuffer(byteLength);\n        } else if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          buffer = data;\n          offset = toOffset($offset, BYTES);\n          var $len = data.byteLength;\n          if ($length === undefined) {\n            if ($len % BYTES) throw RangeError(WRONG_LENGTH);\n            byteLength = $len - offset;\n            if (byteLength < 0) throw RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if (byteLength + offset > $len) throw RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if (TYPED_ARRAY in data) {\n          return fromList(TypedArray, data);\n        } else {\n          return $from.call(TypedArray, data);\n        }\n        hide(that, '_d', {\n          b: buffer,\n          o: offset,\n          l: byteLength,\n          e: length,\n          v: new $DataView(buffer)\n        });\n        while (index < length) addElement(that, index++);\n      });\n      TypedArrayPrototype = TypedArray[PROTOTYPE] = create($TypedArrayPrototype$);\n      hide(TypedArrayPrototype, 'constructor', TypedArray);\n    } else if (!fails(function () {\n      TypedArray(1);\n    }) || !fails(function () {\n      new TypedArray(-1); // eslint-disable-line no-new\n    }) || !$iterDetect(function (iter) {\n      new TypedArray(); // eslint-disable-line no-new\n      new TypedArray(null); // eslint-disable-line no-new\n      new TypedArray(1.5); // eslint-disable-line no-new\n      new TypedArray(iter); // eslint-disable-line no-new\n    }, true)) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME);\n        var klass;\n        // `ws` module bug, temporarily remove validation length for Uint8Array\n        // https://github.com/websockets/ws/pull/645\n        if (!isObject(data)) return new Base(toIndex(data));\n        if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          return $length !== undefined\n            ? new Base(data, toOffset($offset, BYTES), $length)\n            : $offset !== undefined\n              ? new Base(data, toOffset($offset, BYTES))\n              : new Base(data);\n        }\n        if (TYPED_ARRAY in data) return fromList(TypedArray, data);\n        return $from.call(TypedArray, data);\n      });\n      arrayForEach(TAC !== Function.prototype ? gOPN(Base).concat(gOPN(TAC)) : gOPN(Base), function (key) {\n        if (!(key in TypedArray)) hide(TypedArray, key, Base[key]);\n      });\n      TypedArray[PROTOTYPE] = TypedArrayPrototype;\n      if (!LIBRARY) TypedArrayPrototype.constructor = TypedArray;\n    }\n    var $nativeIterator = TypedArrayPrototype[ITERATOR];\n    var CORRECT_ITER_NAME = !!$nativeIterator\n      && ($nativeIterator.name == 'values' || $nativeIterator.name == undefined);\n    var $iterator = $iterators.values;\n    hide(TypedArray, TYPED_CONSTRUCTOR, true);\n    hide(TypedArrayPrototype, TYPED_ARRAY, NAME);\n    hide(TypedArrayPrototype, VIEW, true);\n    hide(TypedArrayPrototype, DEF_CONSTRUCTOR, TypedArray);\n\n    if (CLAMPED ? new TypedArray(1)[TAG] != NAME : !(TAG in TypedArrayPrototype)) {\n      dP(TypedArrayPrototype, TAG, {\n        get: function () { return NAME; }\n      });\n    }\n\n    O[NAME] = TypedArray;\n\n    $export($export.G + $export.W + $export.F * (TypedArray != Base), O);\n\n    $export($export.S, NAME, {\n      BYTES_PER_ELEMENT: BYTES\n    });\n\n    $export($export.S + $export.F * fails(function () { Base.of.call(TypedArray, 1); }), NAME, {\n      from: $from,\n      of: $of\n    });\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayPrototype)) hide(TypedArrayPrototype, BYTES_PER_ELEMENT, BYTES);\n\n    $export($export.P, NAME, proto);\n\n    setSpecies(NAME);\n\n    $export($export.P + $export.F * FORCED_SET, NAME, { set: $set });\n\n    $export($export.P + $export.F * !CORRECT_ITER_NAME, NAME, $iterators);\n\n    if (!LIBRARY && TypedArrayPrototype.toString != arrayToString) TypedArrayPrototype.toString = arrayToString;\n\n    $export($export.P + $export.F * fails(function () {\n      new TypedArray(1).slice();\n    }), NAME, { slice: $slice });\n\n    $export($export.P + $export.F * (fails(function () {\n      return [1, 2].toLocaleString() != new TypedArray([1, 2]).toLocaleString();\n    }) || !fails(function () {\n      TypedArrayPrototype.toLocaleString.call([1, 2]);\n    })), NAME, { toLocaleString: $toLocaleString });\n\n    Iterators[NAME] = CORRECT_ITER_NAME ? $nativeIterator : $iterator;\n    if (!LIBRARY && !CORRECT_ITER_NAME) hide(TypedArrayPrototype, ITERATOR, $iterator);\n  };\n} else module.exports = function () { /* empty */ };\n","'use strict';\nvar global = require('./_global');\nvar DESCRIPTORS = require('./_descriptors');\nvar LIBRARY = require('./_library');\nvar $typed = require('./_typed');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar fails = require('./_fails');\nvar anInstance = require('./_an-instance');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar toIndex = require('./_to-index');\nvar gOPN = require('./_object-gopn').f;\nvar dP = require('./_object-dp').f;\nvar arrayFill = require('./_array-fill');\nvar setToStringTag = require('./_set-to-string-tag');\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar DATA_VIEW = 'DataView';\nvar PROTOTYPE = 'prototype';\nvar WRONG_LENGTH = 'Wrong length!';\nvar WRONG_INDEX = 'Wrong index!';\nvar $ArrayBuffer = global[ARRAY_BUFFER];\nvar $DataView = global[DATA_VIEW];\nvar Math = global.Math;\nvar RangeError = global.RangeError;\n// eslint-disable-next-line no-shadow-restricted-names\nvar Infinity = global.Infinity;\nvar BaseBuffer = $ArrayBuffer;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar floor = Math.floor;\nvar log = Math.log;\nvar LN2 = Math.LN2;\nvar BUFFER = 'buffer';\nvar BYTE_LENGTH = 'byteLength';\nvar BYTE_OFFSET = 'byteOffset';\nvar $BUFFER = DESCRIPTORS ? '_b' : BUFFER;\nvar $LENGTH = DESCRIPTORS ? '_l' : BYTE_LENGTH;\nvar $OFFSET = DESCRIPTORS ? '_o' : BYTE_OFFSET;\n\n// IEEE754 conversions based on https://github.com/feross/ieee754\nfunction packIEEE754(value, mLen, nBytes) {\n  var buffer = new Array(nBytes);\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? pow(2, -24) - pow(2, -77) : 0;\n  var i = 0;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  var e, m, c;\n  value = abs(value);\n  // eslint-disable-next-line no-self-compare\n  if (value != value || value === Infinity) {\n    // eslint-disable-next-line no-self-compare\n    m = value != value ? 1 : 0;\n    e = eMax;\n  } else {\n    e = floor(log(value) / LN2);\n    if (value * (c = pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * pow(2, eBias - 1) * pow(2, mLen);\n      e = 0;\n    }\n  }\n  for (; mLen >= 8; buffer[i++] = m & 255, m /= 256, mLen -= 8);\n  e = e << mLen | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[i++] = e & 255, e /= 256, eLen -= 8);\n  buffer[--i] |= s * 128;\n  return buffer;\n}\nfunction unpackIEEE754(buffer, mLen, nBytes) {\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = eLen - 7;\n  var i = nBytes - 1;\n  var s = buffer[i--];\n  var e = s & 127;\n  var m;\n  s >>= 7;\n  for (; nBits > 0; e = e * 256 + buffer[i], i--, nBits -= 8);\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[i], i--, nBits -= 8);\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : s ? -Infinity : Infinity;\n  } else {\n    m = m + pow(2, mLen);\n    e = e - eBias;\n  } return (s ? -1 : 1) * m * pow(2, e - mLen);\n}\n\nfunction unpackI32(bytes) {\n  return bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0];\n}\nfunction packI8(it) {\n  return [it & 0xff];\n}\nfunction packI16(it) {\n  return [it & 0xff, it >> 8 & 0xff];\n}\nfunction packI32(it) {\n  return [it & 0xff, it >> 8 & 0xff, it >> 16 & 0xff, it >> 24 & 0xff];\n}\nfunction packF64(it) {\n  return packIEEE754(it, 52, 8);\n}\nfunction packF32(it) {\n  return packIEEE754(it, 23, 4);\n}\n\nfunction addGetter(C, key, internal) {\n  dP(C[PROTOTYPE], key, { get: function () { return this[internal]; } });\n}\n\nfunction get(view, bytes, index, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = store.slice(start, start + bytes);\n  return isLittleEndian ? pack : pack.reverse();\n}\nfunction set(view, bytes, index, conversion, value, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = conversion(+value);\n  for (var i = 0; i < bytes; i++) store[start + i] = pack[isLittleEndian ? i : bytes - i - 1];\n}\n\nif (!$typed.ABV) {\n  $ArrayBuffer = function ArrayBuffer(length) {\n    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);\n    var byteLength = toIndex(length);\n    this._b = arrayFill.call(new Array(byteLength), 0);\n    this[$LENGTH] = byteLength;\n  };\n\n  $DataView = function DataView(buffer, byteOffset, byteLength) {\n    anInstance(this, $DataView, DATA_VIEW);\n    anInstance(buffer, $ArrayBuffer, DATA_VIEW);\n    var bufferLength = buffer[$LENGTH];\n    var offset = toInteger(byteOffset);\n    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset!');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);\n    this[$BUFFER] = buffer;\n    this[$OFFSET] = offset;\n    this[$LENGTH] = byteLength;\n  };\n\n  if (DESCRIPTORS) {\n    addGetter($ArrayBuffer, BYTE_LENGTH, '_l');\n    addGetter($DataView, BUFFER, '_b');\n    addGetter($DataView, BYTE_LENGTH, '_l');\n    addGetter($DataView, BYTE_OFFSET, '_o');\n  }\n\n  redefineAll($DataView[PROTOTYPE], {\n    getInt8: function getInt8(byteOffset) {\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset) {\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1]));\n    },\n    getUint32: function getUint32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1])) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 4, byteOffset, arguments[1]), 23, 4);\n    },\n    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 8, byteOffset, arguments[1]), 52, 8);\n    },\n    setInt8: function setInt8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packF32, value, arguments[2]);\n    },\n    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {\n      set(this, 8, byteOffset, packF64, value, arguments[2]);\n    }\n  });\n} else {\n  if (!fails(function () {\n    $ArrayBuffer(1);\n  }) || !fails(function () {\n    new $ArrayBuffer(-1); // eslint-disable-line no-new\n  }) || fails(function () {\n    new $ArrayBuffer(); // eslint-disable-line no-new\n    new $ArrayBuffer(1.5); // eslint-disable-line no-new\n    new $ArrayBuffer(NaN); // eslint-disable-line no-new\n    return $ArrayBuffer.name != ARRAY_BUFFER;\n  })) {\n    $ArrayBuffer = function ArrayBuffer(length) {\n      anInstance(this, $ArrayBuffer);\n      return new BaseBuffer(toIndex(length));\n    };\n    var ArrayBufferProto = $ArrayBuffer[PROTOTYPE] = BaseBuffer[PROTOTYPE];\n    for (var keys = gOPN(BaseBuffer), j = 0, key; keys.length > j;) {\n      if (!((key = keys[j++]) in $ArrayBuffer)) hide($ArrayBuffer, key, BaseBuffer[key]);\n    }\n    if (!LIBRARY) ArrayBufferProto.constructor = $ArrayBuffer;\n  }\n  // iOS Safari 7.x bug\n  var view = new $DataView(new $ArrayBuffer(2));\n  var $setInt8 = $DataView[PROTOTYPE].setInt8;\n  view.setInt8(0, 2147483648);\n  view.setInt8(1, 2147483649);\n  if (view.getInt8(0) || !view.getInt8(1)) redefineAll($DataView[PROTOTYPE], {\n    setInt8: function setInt8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    }\n  }, true);\n}\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\nhide($DataView[PROTOTYPE], $typed.VIEW, true);\nexports[ARRAY_BUFFER] = $ArrayBuffer;\nexports[DATA_VIEW] = $DataView;\n","export function error(msg: string) {\n    throw new Error(msg)\n}\n\nexport function log(msg: string, v?: any) {\n    if (v === undefined)\n        console.log(\"JD: \" + msg)\n    else\n        console.log(\"JD: \" + msg, v)\n}\n\nexport function warn(msg: string, v?: any) {\n    if (v === undefined)\n        console.log(\"JD-WARN: \" + msg)\n    else\n        console.log(\"JD-WARN: \" + msg, v)\n}\n\nexport function delay<T>(millis: number, value?: T): Promise<T> {\n    return new Promise((resolve) => setTimeout(() => resolve(value), millis))\n}\n\nexport function memcpy(trg: Uint8Array, trgOff: number, src: ArrayLike<number>, srcOff?: number, len?: number) {\n    if (srcOff === void 0)\n        srcOff = 0\n    if (len === void 0)\n        len = src.length - srcOff\n    for (let i = 0; i < len; ++i)\n        trg[trgOff + i] = src[srcOff + i]\n}\n\nexport function bufferEq(a: Uint8Array, b: ArrayLike<number>) {\n    if (a == b)\n        return true\n    if (!a || !b || a.length != b.length)\n        return false\n    for (let i = 0; i < a.length; ++i) {\n        if (a[i] != b[i]) return false\n    }\n    return true\n}\n\n\nexport function hash(buf: Uint8Array, bits: number) {\n    bits |= 0\n    if (bits < 1)\n        return 0\n    const h = fnv1(buf)\n    if (bits >= 32)\n        return h >>> 0\n    else\n        return ((h ^ (h >>> bits)) & ((1 << bits) - 1)) >>> 0\n}\n\nexport function idiv(a: number, b: number) { return ((a | 0) / (b | 0)) | 0 }\nexport function fnv1(data: Uint8Array) {\n    let h = 0x811c9dc5\n    for (let i = 0; i < data.length; ++i) {\n        h = Math.imul(h, 0x1000193) ^ data[i]\n    }\n    return h\n}\n\nexport function crc(p: Uint8Array) {\n    let crc = 0xffff;\n    for (let i = 0; i < p.length; ++i) {\n        const data = p[i];\n        let x = (crc >> 8) ^ data;\n        x ^= x >> 4;\n        crc = (crc << 8) ^ (x << 12) ^ (x << 5) ^ x;\n        crc &= 0xffff;\n    }\n    return crc;\n}\n\nexport function ALIGN(n: number) { return (n + 3) & ~3 }\n\n// this will take lower 8 bits from each character\nexport function stringToUint8Array(input: string) {\n    let len = input.length;\n    let res = new Uint8Array(len)\n    for (let i = 0; i < len; ++i)\n        res[i] = input.charCodeAt(i) & 0xff;\n    return res;\n}\n\nexport function uint8ArrayToString(input: ArrayLike<number>) {\n    let len = input.length;\n    let res = \"\"\n    for (let i = 0; i < len; ++i)\n        res += String.fromCharCode(input[i]);\n    return res;\n}\n\n\nexport function fromUTF8(binstr: string) {\n    if (!binstr) return \"\"\n\n    // escape function is deprecated\n    let escaped = \"\"\n    for (let i = 0; i < binstr.length; ++i) {\n        let k = binstr.charCodeAt(i) & 0xff\n        if (k == 37 || k > 0x7f) {\n            escaped += \"%\" + k.toString(16);\n        } else {\n            escaped += binstr.charAt(i)\n        }\n    }\n\n    // decodeURIComponent does the actual UTF8 decoding\n    return decodeURIComponent(escaped)\n}\n\nexport function toUTF8(str: string, cesu8?: boolean) {\n    let res = \"\";\n    if (!str) return res;\n    for (let i = 0; i < str.length; ++i) {\n        let code = str.charCodeAt(i);\n        if (code <= 0x7f) res += str.charAt(i);\n        else if (code <= 0x7ff) {\n            res += String.fromCharCode(0xc0 | (code >> 6), 0x80 | (code & 0x3f));\n        } else {\n            if (!cesu8 && 0xd800 <= code && code <= 0xdbff) {\n                let next = str.charCodeAt(++i);\n                if (!isNaN(next))\n                    code = 0x10000 + ((code - 0xd800) << 10) + (next - 0xdc00);\n            }\n\n            if (code <= 0xffff)\n                res += String.fromCharCode(0xe0 | (code >> 12), 0x80 | ((code >> 6) & 0x3f), 0x80 | (code & 0x3f));\n            else\n                res += String.fromCharCode(0xf0 | (code >> 18), 0x80 | ((code >> 12) & 0x3f), 0x80 | ((code >> 6) & 0x3f), 0x80 | (code & 0x3f));\n        }\n\n    }\n    return res;\n}\n\n\nexport interface SMap<T> {\n    [index: string]: T;\n}\n\nexport class PromiseBuffer<T> {\n    private waiting: ((v: (T | Error)) => void)[] = [];\n    private available: (T | Error)[] = [];\n\n    drain() {\n        for (let f of this.waiting) {\n            f(new Error(\"Promise Buffer Reset\"))\n        }\n        this.waiting = []\n        this.available = []\n    }\n\n\n    pushError(v: Error) {\n        this.push(v as any)\n    }\n\n    push(v: T) {\n        let f = this.waiting.shift()\n        if (f) f(v)\n        else this.available.push(v)\n    }\n\n    shiftAsync(timeout = 0) {\n        if (this.available.length > 0) {\n            let v = this.available.shift()\n            if (v instanceof Error)\n                return Promise.reject<T>(v)\n            else\n                return Promise.resolve<T>(v)\n        } else\n            return new Promise<T>((resolve, reject) => {\n                let f = (v: (T | Error)) => {\n                    if (v instanceof Error) reject(v)\n                    else resolve(v)\n                }\n                this.waiting.push(f)\n                if (timeout > 0) {\n                    delay(timeout)\n                        .then(() => {\n                            let idx = this.waiting.indexOf(f)\n                            if (idx >= 0) {\n                                this.waiting.splice(idx, 1)\n                                reject(new Error(\"Timeout\"))\n                            }\n                        })\n                }\n            })\n    }\n}\n\n\nexport class PromiseQueue {\n    promises: SMap<(() => Promise<any>)[]> = {};\n\n    enqueue<T>(id: string, f: () => Promise<T>): Promise<T> {\n        return new Promise<T>((resolve, reject) => {\n            let arr = this.promises[id]\n            if (!arr) {\n                arr = this.promises[id] = []\n            }\n            const cleanup = () => {\n                arr.shift()\n                if (arr.length == 0)\n                    delete this.promises[id]\n                else\n                    arr[0]()\n            }\n            arr.push(() =>\n                f().then(v => {\n                    cleanup()\n                    resolve(v)\n                }, err => {\n                    cleanup()\n                    reject(err)\n                }))\n            if (arr.length == 1)\n                arr[0]()\n        })\n    }\n}\n\nexport function toHex(bytes: ArrayLike<number>) {\n    let r = \"\"\n    for (let i = 0; i < bytes.length; ++i)\n        r += (\"0\" + bytes[i].toString(16)).slice(-2)\n    return r\n}\n\nexport function fromHex(hex: string) {\n    let r = new Uint8Array(hex.length >> 1)\n    for (let i = 0; i < hex.length; i += 2)\n        r[i >> 1] = parseInt(hex.slice(i, i + 2), 16)\n    return r\n}\n\nexport interface MutableArrayLike<T> {\n    readonly length: number;\n    [n: number]: T;\n}\n\nexport function write32(buf: MutableArrayLike<number>, pos: number, v: number) {\n    buf[pos + 0] = (v >> 0) & 0xff;\n    buf[pos + 1] = (v >> 8) & 0xff;\n    buf[pos + 2] = (v >> 16) & 0xff;\n    buf[pos + 3] = (v >> 24) & 0xff;\n}\n\nexport function write16(buf: MutableArrayLike<number>, pos: number, v: number) {\n    buf[pos + 0] = (v >> 0) & 0xff;\n    buf[pos + 1] = (v >> 8) & 0xff;\n}\n\nexport function read32(buf: ArrayLike<number>, pos: number) {\n    return (buf[pos] | (buf[pos + 1] << 8) | (buf[pos + 2] << 16) | (buf[pos + 3] << 24)) >>> 0\n}\n\nexport function read16(buf: ArrayLike<number>, pos: number) {\n    return buf[pos] | (buf[pos + 1] << 8)\n}\n\nexport function encodeU32LE(words: number[]) {\n    let r = new Uint8Array(words.length * 4)\n    for (let i = 0; i < words.length; ++i)\n        write32(r, i * 4, words[i])\n    return r\n}\n\nexport function decodeU32LE(buf: Uint8Array) {\n    let res: number[] = []\n    for (let i = 0; i < buf.length; i += 4)\n        res.push(read32(buf, i))\n    return res\n}\n\nexport function bufferToString(buf: Uint8Array) {\n    return fromUTF8(uint8ArrayToString(buf))\n}\n\nexport function bufferConcat(a: Uint8Array, b: Uint8Array) {\n    const r = new Uint8Array(a.length + b.length)\n    r.set(a, 0)\n    r.set(b, a.length)\n    return r\n}\n\nexport function jsonCopyFrom<T>(trg: T, src: T) {\n    let v = clone(src)\n    for (let k of Object.keys(src)) {\n        (trg as any)[k] = (v as any)[k]\n    }\n}\nexport function assert(cond: boolean, msg = \"Assertion failed\") {\n    if (!cond) {\n        debugger\n        throw new Error(msg)\n    }\n}\n\nexport function flatClone<T extends Object>(obj: T): T {\n    if (obj == null) return null\n    let r: any = {}\n    Object.keys(obj).forEach((k) => { r[k] = (obj as any)[k] })\n    return r;\n}\n\nexport function clone<T>(v: T): T {\n    if (v == null) return null\n    return JSON.parse(JSON.stringify(v))\n}\n\n","import * as U from \"./utils\"\nimport { Bus } from \"./bus\";\nimport { Packet } from \"./packet\";\n\nconst controlTransferGetReport = 0x01;\nconst controlTransferSetReport = 0x09;\nconst controlTransferOutReport = 0x200;\nconst controlTransferInReport = 0x100;\n\n// see https://github.com/microsoft/uf2/blob/master/hf2.md for full spec\nexport const HF2_DEVICE_MAJOR = 42\nexport const HF2_CMD_BININFO = 0x0001 // no arguments\nexport const HF2_MODE_BOOTLOADER = 0x01\nexport const HF2_MODE_USERSPACE = 0x02\n/*\nstruct HF2_BININFO_Result {\n    uint32_t mode;\n    uint32_t flash_page_size;\n    uint32_t flash_num_pages;\n    uint32_t max_message_size;\n};\n*/\n\nexport const HF2_CMD_INFO = 0x0002\n// no arguments\n// results is utf8 character array\n\nexport const HF2_CMD_RESET_INTO_APP = 0x0003// no arguments, no result\n\nexport const HF2_CMD_RESET_INTO_BOOTLOADER = 0x0004  // no arguments, no result\n\nexport const HF2_CMD_START_FLASH = 0x0005   // no arguments, no result\n\nexport const HF2_CMD_WRITE_FLASH_PAGE = 0x0006\n/*\nstruct HF2_WRITE_FLASH_PAGE_Command {\n    uint32_t target_addr;\n    uint32_t data[flash_page_size];\n};\n*/\n// no result\n\nexport const HF2_CMD_CHKSUM_PAGES = 0x0007\n/*\nstruct HF2_CHKSUM_PAGES_Command {\n    uint32_t target_addr;\n    uint32_t num_pages;\n};\nstruct HF2_CHKSUM_PAGES_Result {\n    uint16_t chksums[num_pages];\n};\n*/\n\nexport const HF2_CMD_READ_WORDS = 0x0008\n/*\nstruct HF2_READ_WORDS_Command {\n    uint32_t target_addr;\n    uint32_t num_words;\n};\nstruct HF2_READ_WORDS_Result {\n    uint32_t words[num_words];\n};\n*/\n\nexport const HF2_CMD_WRITE_WORDS = 0x0009\n/*\nstruct HF2_WRITE_WORDS_Command {\n    uint32_t target_addr;\n    uint32_t num_words;\n    uint32_t words[num_words];\n};\n*/\n// no result\n\nexport const HF2_CMD_DMESG = 0x0010\n// no arguments\n// results is utf8 character array\n\nexport const HF2_FLAG_SERIAL_OUT = 0x80\nexport const HF2_FLAG_SERIAL_ERR = 0xC0\nexport const HF2_FLAG_CMDPKT_LAST = 0x40\nexport const HF2_FLAG_CMDPKT_BODY = 0x00\nexport const HF2_FLAG_MASK = 0xC0\nexport const HF2_SIZE_MASK = 63\n\nexport const HF2_STATUS_OK = 0x00\nexport const HF2_STATUS_INVALID_CMD = 0x01\nexport const HF2_STATUS_EXEC_ERR = 0x02\nexport const HF2_STATUS_EVENT = 0x80\n\n// the eventId is overlayed on the tag+status; the mask corresponds\n// to the HF2_STATUS_EVENT above\nexport const HF2_EV_MASK = 0x800000\n\nexport const HF2_CMD_JDS_CONFIG = 0x0020\nexport const HF2_CMD_JDS_SEND = 0x0021\nexport const HF2_EV_JDS_PACKET = 0x800020\n\nexport class Transport {\n    dev: USBDevice;\n    iface: USBInterface;\n    altIface: USBAlternateInterface;\n    epIn: USBEndpoint;\n    epOut: USBEndpoint;\n    readLoopStarted = false;\n    ready = false;\n\n    constructor(private requestDevice: (options: USBDeviceRequestOptions) => Promise<USBDevice>) {\n\n    }\n\n    onData = (v: Uint8Array) => { };\n    onError = (e: Error) => {\n        console.error(\"HF2 error: \" + (e ? e.stack : e))\n    };\n\n    log(msg: string, v?: any) {\n        if (v != undefined)\n            console.log(\"HF2: \" + msg, v)\n        else\n            console.log(\"HF2: \" + msg)\n    }\n\n\n    private clearDev() {\n        if (this.dev) {\n            this.dev = null\n            this.epIn = null\n            this.epOut = null\n        }\n    }\n\n    disconnectAsync(): Promise<void> {\n        this.ready = false\n        if (!this.dev) return Promise.resolve()\n        this.log(\"close device\")\n        return this.dev.close()\n            .catch(e => {\n                // just ignore errors closing, most likely device just disconnected\n            })\n            .then(() => {\n                this.clearDev()\n                return U.delay(500)\n            })\n    }\n\n    private recvPacketAsync(): Promise<Uint8Array> {\n        let final = (res: USBInTransferResult) => {\n            if (res.status != \"ok\")\n                this.error(\"USB IN transfer failed\")\n            let arr = new Uint8Array(res.data.buffer)\n            if (arr.length == 0)\n                return this.recvPacketAsync()\n            return arr\n        }\n\n        if (!this.dev)\n            return Promise.reject(new Error(\"Disconnected\"))\n\n        if (!this.epIn) {\n            return this.dev.controlTransferIn({\n                requestType: \"class\",\n                recipient: \"interface\",\n                request: controlTransferGetReport,\n                value: controlTransferInReport,\n                index: this.iface.interfaceNumber\n            }, 64).then(final)\n        }\n\n        return this.dev.transferIn(this.epIn.endpointNumber, 64)\n            .then(final)\n    }\n\n    error(msg: string) {\n        throw new Error(`USB error on device ${this.dev ? this.dev.productName : \"n/a\"} (${msg})`)\n    }\n\n    private async readLoop() {\n        if (this.readLoopStarted)\n            return\n        this.readLoopStarted = true\n        this.log(\"start read loop\")\n\n        while (true) {\n            if (!this.ready) {\n                break\n                //await U.delay(300)\n                //continue\n            }\n\n            try {\n                const buf = await this.recvPacketAsync()\n\n                if (buf[0]) {\n                    // we've got data; retry reading immedietly after processing it\n                    this.onData(buf)\n                } else {\n                    // throttle down if no data coming\n                    await U.delay(5)\n                }\n            } catch (err) {\n                if (this.dev)\n                    this.onError(err)\n                await U.delay(300)\n            }\n        }\n    }\n\n    sendPacketAsync(pkt: Uint8Array) {\n        if (!this.dev)\n            return Promise.reject(new Error(\"Disconnected\"))\n        U.assert(pkt.length <= 64)\n        if (!this.epOut) {\n            return this.dev.controlTransferOut({\n                requestType: \"class\",\n                recipient: \"interface\",\n                request: controlTransferSetReport,\n                value: controlTransferOutReport,\n                index: this.iface.interfaceNumber\n            }, pkt).then(res => {\n                if (res.status != \"ok\")\n                    this.error(\"USB CTRL OUT transfer failed\")\n            })\n        }\n        return this.dev.transferOut(this.epOut.endpointNumber, pkt)\n            .then(res => {\n                if (res.status != \"ok\")\n                    this.error(\"USB OUT transfer failed\")\n            })\n    }\n\n\n    async init() {\n        this.dev = await this.requestDevice({\n            filters: [{\n                classCode: 255,\n                subclassCode: HF2_DEVICE_MAJOR,\n            }]\n        })\n        this.iface = undefined;\n        this.altIface = undefined;\n        this.log(\"connect device: \" + this.dev.manufacturerName + \" \" + this.dev.productName)\n\n        // resolve interfaces\n        for (const iface of this.dev.configuration.interfaces) {\n            const alt = iface.alternates[0]\n            if (alt.interfaceClass == 0xff && alt.interfaceSubclass == HF2_DEVICE_MAJOR) {\n                this.iface = iface;\n                this.altIface = alt;\n                break;\n            }\n        }\n\n        if (!this.iface) throw new Error(\"HF2 interface not found\")\n\n        await this.dev.open()\n        await this.dev.selectConfiguration(1)\n\n        if (this.altIface.endpoints.length) {\n            this.epIn = this.altIface.endpoints.filter(e => e.direction == \"in\")[0]\n            this.epOut = this.altIface.endpoints.filter(e => e.direction == \"out\")[0]\n            U.assert(this.epIn.packetSize == 64);\n            U.assert(this.epOut.packetSize == 64);\n        }\n        this.log(\"claim interface\")\n        await this.dev.claimInterface(this.iface.interfaceNumber)\n        this.log(\"all connected\")\n        this.ready = true\n        this.readLoop()\n    }\n}\n\nexport class Proto {\n    eventHandlers: U.SMap<(buf: Uint8Array) => void> = {}\n    msgs = new U.PromiseBuffer<Uint8Array>()\n    cmdSeq = (Math.random() * 0xffff) | 0;\n    private lock = new U.PromiseQueue();\n\n    constructor(public io: Transport) {\n        let frames: Uint8Array[] = []\n\n        io.onData = buf => {\n            let tp = buf[0] & HF2_FLAG_MASK\n            let len = buf[0] & 63\n            //console.log(`msg tp=${tp} len=${len}`)\n            let frame = new Uint8Array(len)\n            U.memcpy(frame, 0, buf, 1, len)\n            if (tp & HF2_FLAG_SERIAL_OUT) {\n                this.onSerial(frame, tp == HF2_FLAG_SERIAL_ERR)\n                return\n            }\n            frames.push(frame)\n            if (tp == HF2_FLAG_CMDPKT_BODY) {\n                return\n            } else {\n                U.assert(tp == HF2_FLAG_CMDPKT_LAST)\n                let total = 0\n                for (let f of frames) total += f.length\n                let r = new Uint8Array(total)\n                let ptr = 0\n                for (let f of frames) {\n                    U.memcpy(r, ptr, f)\n                    ptr += f.length\n                }\n                frames = []\n                if (r[2] & HF2_STATUS_EVENT) {\n                    // asynchronous event\n                    this.handleEvent(r)\n                } else {\n                    this.msgs.push(r)\n                }\n            }\n        }\n    }\n\n\n    error(m: string) {\n        return this.io.error(m)\n    }\n\n    talkAsync(cmd: number, data?: Uint8Array) {\n        let len = 8\n        if (data) len += data.length\n        let pkt = new Uint8Array(len)\n        let seq = ++this.cmdSeq & 0xffff\n        U.write32(pkt, 0, cmd);\n        U.write16(pkt, 4, seq);\n        U.write16(pkt, 6, 0);\n        if (data)\n            U.memcpy(pkt, 8, data, 0, data.length)\n        let numSkipped = 0\n        let handleReturnAsync = (): Promise<Uint8Array> =>\n            this.msgs.shiftAsync(1000) // we wait up to a second\n                .then(res => {\n                    if (U.read16(res, 0) != seq) {\n                        if (numSkipped < 3) {\n                            numSkipped++\n                            this.io.log(`message out of sync, (${seq} vs ${U.read16(res, 0)}); will re-try`)\n                            return handleReturnAsync()\n                        }\n                        this.error(\"out of sync\")\n                    }\n                    let info = \"\"\n                    if (res[3])\n                        info = \"; info=\" + res[3]\n                    switch (res[2]) {\n                        case HF2_STATUS_OK:\n                            return res.slice(4)\n                        case HF2_STATUS_INVALID_CMD:\n                            this.error(\"invalid command\" + info)\n                            break\n                        case HF2_STATUS_EXEC_ERR:\n                            this.error(\"execution error\" + info)\n                            break\n                        default:\n                            this.error(\"error \" + res[2] + info)\n                            break\n                    }\n                    return null\n                })\n\n        return this.lock.enqueue(\"talk\", () =>\n            this.sendMsgAsync(pkt)\n                .then(handleReturnAsync))\n    }\n\n\n    private sendMsgAsync(buf: Uint8Array, serial: number = 0) {\n        // Util.assert(buf.length <= this.maxMsgSize)\n        let frame = new Uint8Array(64)\n        let loop = (pos: number): Promise<void> => {\n            let len = buf.length - pos\n            if (len <= 0) return Promise.resolve()\n            if (len > 63) {\n                len = 63\n                frame[0] = HF2_FLAG_CMDPKT_BODY;\n            } else {\n                frame[0] = HF2_FLAG_CMDPKT_LAST;\n            }\n            if (serial) frame[0] = serial == 1 ? HF2_FLAG_SERIAL_OUT : HF2_FLAG_SERIAL_ERR;\n            frame[0] |= len;\n            for (let i = 0; i < len; ++i)\n                frame[i + 1] = buf[pos + i]\n            return this.io.sendPacketAsync(frame)\n                .then(() => loop(pos + len))\n        }\n        return loop(0)\n    }\n\n    onEvent(id: number, f: (buf: Uint8Array) => void) {\n        U.assert(!!(id & HF2_EV_MASK))\n        this.eventHandlers[id + \"\"] = f\n    }\n\n    onJDMessage(f: (buf: Uint8Array) => void) {\n        this.talkAsync(HF2_CMD_JDS_CONFIG, U.encodeU32LE([1]))\n        this.onEvent(HF2_EV_JDS_PACKET, f)\n    }\n\n    sendJDMessageAsync(buf: Uint8Array) {\n        return this.talkAsync(HF2_CMD_JDS_SEND, buf)\n    }\n\n    handleEvent(buf: Uint8Array) {\n        let evid = U.read32(buf, 0)\n        let f = this.eventHandlers[evid + \"\"]\n        if (f) {\n            f(buf.slice(4))\n        } else {\n            this.io.log(\"unhandled event: \" + evid.toString(16))\n        }\n    }\n    onSerial(data: Uint8Array, iserr: boolean) {\n        console.log(\"SERIAL:\", U.bufferToString(data))\n    }\n\n    async init() {\n        await this.io.init()\n        const buf = await this.talkAsync(HF2_CMD_INFO)\n        this.io.log(\"Connected to: \" + U.bufferToString(buf))\n    }\n\n    disconnectAsync(): Promise<void> {\n        return this.io.disconnectAsync();\n    }\n}\n","\n// Registers 0x001-0x07f - r/w common to all services\n// Registers 0x080-0x0ff - r/w defined per-service\n// Registers 0x100-0x17f - r/o common to all services\n// Registers 0x180-0x1ff - r/o defined per-service\n// Registers 0x200-0xeff - custom, defined per-service\n// Registers 0xf00-0xfff - reserved for implementation, should not be on the wire\n\n// this is either binary (0 or non-zero), or can be gradual (eg. brightness of neopixel)\nexport const REG_INTENSITY = 0x01\n// the primary value of actuator (eg. servo angle)\nexport const REG_VALUE = 0x02\n// enable/disable streaming\nexport const REG_IS_STREAMING = 0x03\n// streaming interval in miliseconds\nexport const REG_STREAMING_INTERVAL = 0x04\n// for analog sensors\nexport const REG_LOW_THRESHOLD = 0x05\nexport const REG_HIGH_THRESHOLD = 0x06\n// limit power drawn; in mA\nexport const REG_MAX_POWER = 0x07\n\n// eg. one number for light sensor, all 3 coordinates for accelerometer\nexport const REG_READING = 0x101\n\nexport const CMD_GET_REG = 0x1000\nexport const CMD_SET_REG = 0x2000\n\nexport const CMD_TOP_MASK = 0xf000\nexport const CMD_REG_MASK = 0x0fff\n\n\n// Commands 0x000-0x07f - common to all services\n// Commands 0x080-0xeff - defined per-service\n// Commands 0xf00-0xfff - reserved for implementation\n// enumeration data for CTRL, ad-data for other services\nexport const CMD_ADVERTISEMENT_DATA = 0x00\n// event from sensor or on broadcast service\nexport const CMD_EVENT = 0x01\n// request to calibrate sensor\nexport const CMD_CALIBRATE = 0x02\n// request human-readable description of service\nexport const CMD_GET_DESCRIPTION = 0x03\n\n// Commands specific to control service\n// do nothing\nexport const CMD_CTRL_NOOP = 0x80\n// blink led or otherwise draw user's attention\nexport const CMD_CTRL_IDENTIFY = 0x81\n// reset device\nexport const CMD_CTRL_RESET = 0x82\n\nexport const CMD_CONSOLE_REG = 0x80\nexport const CMD_CONSOLE_MESSAGE_DBG = 0x80\nexport const CMD_CONSOLE_SET_MIN_PRIORITY = 0x2000 | CMD_CONSOLE_REG\n\nexport const STREAM_PORT_SHIFT = 7\nexport const STREAM_COUNTER_MASK = 0x001f\nexport const STREAM_CLOSE_MASK = 0x0020\nexport const STREAM_METADATA_MASK = 0x0040\n\nexport const JD_SERIAL_HEADER_SIZE = 16\nexport const JD_SERIAL_MAX_PAYLOAD_SIZE = 236\nexport const JD_SERVICE_NUMBER_MASK = 0x3f\nexport const JD_SERVICE_NUMBER_INV_MASK = 0xc0\nexport const JD_SERVICE_NUMBER_CRC_ACK = 0x3f\nexport const JD_SERVICE_NUMBER_STREAM = 0x3e\nexport const JD_SERVICE_NUMBER_CTRL = 0x00\n\n// the COMMAND flag signifies that the device_identifier is the recipent\n// (i.e., it's a command for the peripheral); the bit clear means device_identifier is the source\n// (i.e., it's a report from peripheral or a broadcast message)\nexport const JD_FRAME_FLAG_COMMAND = 0x01\n// an ACK should be issued with CRC of this package upon reception\nexport const JD_FRAME_FLAG_ACK_REQUESTED = 0x02\n// the device_identifier contains target service class number\nexport const JD_FRAME_FLAG_IDENTIFIER_IS_SERVICE_CLASS = 0x04\n\nexport enum ConsolePriority {\n    Debug = 0,\n    Log = 1,\n    Warning = 2,\n    Error = 3,\n    Silent = 4\n}\n\n/** known service numbers */\nexport const SRV_CTRL = 0;\nexport const SRV_LOGGER = 0x12dc1fca;\nexport const SRV_BATTERY = 0x1d2a2acd;\nexport const SRV_ACCELEROMETER = 0x1f140409;\nexport const SRV_BUTTON = 0x1473a263;\nexport const SRV_TOUCHBUTTON = 0x130cf5be;\nexport const SRV_LIGHT_SENSOR = 0x15e7a0ff;\nexport const SRV_MICROPHONE = 0x1a5c5866;\nexport const SRV_THERMOMETER = 0x1421bac7;\nexport const SRV_SWITCH = 0x14218172;\nexport const SRV_PIXEL = 0x1768fbbf;\nexport const SRV_HAPTIC = 0x116b14a3;\nexport const SRV_LIGHT = 0x126f00e0;\nexport const SRV_KEYBOARD = 0x1ae4812d;\nexport const SRV_MOUSE = 0x14bc97bf;\nexport const SRV_GAMEPAD = 0x100527e8;\nexport const SRV_MUSIC = 0x1b57b1d7;\nexport const SRV_SERVO = 0x12fc9103;\nexport const SRV_CONTROLLER = 0x188ae4b8;\nexport const SRV_LCD = 0x18d5284c;\nexport const SRV_MESSAGE_BUS = 0x115cabf5;\nexport const SRV_COLOR_SENSOR = 0x14d6dda2;\nexport const SRV_LIGHT_SPECTRUM_SENSOR = 0x16fa0c0d;\nexport const SRV_PROXIMITY = 0x14c1791b;\nexport const SRV_TOUCH_BUTTONS = 0x1acb49d5;\nexport const SRV_SERVOS = 0x182988d8;\nexport const SRV_ROTARY_ENCODER = 0x10fa29c9;\nexport const SRV_DNS = 0x117729bd;\nexport const SRV_PWM_LIGHT = 0x1fb57453;\nexport const SRV_BOOTLOADER = 0x1ffa9948;\nexport const SRV_ARCADE_CONTROLS = 0x1deaa06e;\nexport const SRV_POWER = 0x1fa4c95a;\nexport const SRV_SLIDER = 0x1f274746;\nexport const SRV_MOTOR = 0x17004cd8;\nexport const SRV_TCP = 0x1b43b70b;\nexport const SRV_WIFI = 0x18aae1fa;\n","import { read16, read32 } from \"./utils\";\n\nexport enum NumberFormat {\n    Int8LE = 1,\n    UInt8LE = 2,\n    Int16LE = 3,\n    UInt16LE = 4,\n    Int32LE = 5,\n    Int8BE = 6,\n    UInt8BE = 7,\n    Int16BE = 8,\n    UInt16BE = 9,\n    Int32BE = 10,\n    UInt32LE = 11,\n    UInt32BE = 12,\n    Float32LE = 13,\n    Float64LE = 14,\n    Float32BE = 15,\n    Float64BE = 16,\n}\n\nfunction fmtInfoCore(fmt: NumberFormat) {\n    switch (fmt) {\n        case NumberFormat.Int8LE: return -1;\n        case NumberFormat.UInt8LE: return 1;\n        case NumberFormat.Int16LE: return -2;\n        case NumberFormat.UInt16LE: return 2;\n        case NumberFormat.Int32LE: return -4;\n        case NumberFormat.UInt32LE: return 4;\n        case NumberFormat.Int8BE: return -10;\n        case NumberFormat.UInt8BE: return 10;\n        case NumberFormat.Int16BE: return -20;\n        case NumberFormat.UInt16BE: return 20;\n        case NumberFormat.Int32BE: return -40;\n        case NumberFormat.UInt32BE: return 40;\n\n        case NumberFormat.Float32LE: return 4;\n        case NumberFormat.Float32BE: return 40;\n        case NumberFormat.Float64LE: return 8;\n        case NumberFormat.Float64BE: return 80;\n        default: throw new Error(\"unknown format\");\n    }\n}\n\nfunction fmtInfo(fmt: NumberFormat) {\n    let size = fmtInfoCore(fmt)\n    let signed = false\n    if (size < 0) {\n        signed = true\n        size = -size\n    }\n    let swap = false\n    if (size >= 10) {\n        swap = true\n        size /= 10\n    }\n    let isFloat = fmt >= NumberFormat.Float32LE\n    return { size, signed, swap, isFloat }\n}\n\n/**\n * Get the size in bytes of specified number format.\n */\nexport function sizeOfNumberFormat(format: NumberFormat) {\n    switch (format) {\n        case NumberFormat.Int8LE:\n        case NumberFormat.UInt8LE:\n        case NumberFormat.Int8BE:\n        case NumberFormat.UInt8BE:\n            return 1;\n        case NumberFormat.Int16LE:\n        case NumberFormat.UInt16LE:\n        case NumberFormat.Int16BE:\n        case NumberFormat.UInt16BE:\n            return 2;\n        case NumberFormat.Int32LE:\n        case NumberFormat.Int32BE:\n        case NumberFormat.UInt32BE:\n        case NumberFormat.UInt32LE:\n        case NumberFormat.Float32BE:\n        case NumberFormat.Float32LE:\n            return 4;\n        case NumberFormat.Float64BE:\n        case NumberFormat.Float64LE:\n            return 8;\n    }\n    return 0;\n}\n\nexport function getNumber(buf: ArrayLike<number>, fmt: NumberFormat, offset: number) {\n    switch (fmt) {\n        case NumberFormat.UInt8BE:\n        case NumberFormat.UInt8LE:\n            return buf[offset]\n        case NumberFormat.Int8BE:\n        case NumberFormat.Int8LE:\n            return (buf[offset] << 24) >> 24\n        case NumberFormat.UInt16LE:\n            return read16(buf, offset)\n        case NumberFormat.Int16LE:\n            return (read16(buf, offset) << 16) >> 16\n        case NumberFormat.UInt32LE:\n            return read32(buf, offset)\n        case NumberFormat.Int32LE:\n            return read32(buf, offset) >> 0\n        default:\n            throw new Error(\"unsupported fmt:\" + fmt)\n    }\n}\n\nexport function setNumber(buf: Uint8Array, fmt: NumberFormat, offset: number, r: number) {\n    let inf = fmtInfo(fmt)\n    if (inf.isFloat) {\n        let arr = new Uint8Array(inf.size)\n        if (inf.size == 4)\n            new Float32Array(arr.buffer)[0] = r\n        else\n            new Float64Array(arr.buffer)[0] = r\n        if (inf.swap)\n            arr.reverse()\n        for (let i = 0; i < inf.size; ++i) {\n            buf[offset + i] = arr[i]\n        }\n        return\n    }\n\n    for (let i = 0; i < inf.size; ++i) {\n        let off = !inf.swap ? offset + i : offset + inf.size - i - 1\n        buf[off] = (r & 0xff)\n        r >>= 8\n    }\n}\n\nexport function intOfBuffer(data: Uint8Array) {\n    let fmt: NumberFormat\n    switch (data.length) {\n        case 0:\n        case 1:\n            fmt = NumberFormat.Int8LE\n            break\n        case 2:\n        case 3:\n            fmt = NumberFormat.Int16LE\n            break\n        default:\n            fmt = NumberFormat.Int32LE\n            break\n    }\n    return getNumber(data, fmt, 0)\n}","// Python-like packing, see https://docs.python.org/3/library/struct.html\n\nimport { NumberFormat, setNumber, getNumber, sizeOfNumberFormat } from \"./buffer\"\n\nexport function packedSize(format: string) {\n    return packUnpackCore(format, null, null, true)\n}\n\nexport function pack(format: string, nums: number[]) {\n    let buf = new Uint8Array(packedSize(format))\n    packUnpackCore(format, nums, buf, true)\n    return buf\n}\n\n\nfunction getFormat(pychar: string, isBig: boolean) {\n    switch (pychar) {\n        case 'B':\n            return NumberFormat.UInt8LE\n        case 'b':\n            return NumberFormat.Int8LE\n        case 'H':\n            return isBig ? NumberFormat.UInt16BE : NumberFormat.UInt16LE\n        case 'h':\n            return isBig ? NumberFormat.Int16BE : NumberFormat.Int16LE\n        case 'I':\n        case 'L':\n            return isBig ? NumberFormat.UInt32BE : NumberFormat.UInt32LE\n        case 'i':\n        case 'l':\n            return isBig ? NumberFormat.Int32BE : NumberFormat.Int32LE\n        case 'f':\n            return isBig ? NumberFormat.Float32BE : NumberFormat.Float32LE\n        case 'd':\n            return isBig ? NumberFormat.Float64BE : NumberFormat.Float64LE\n        default:\n            return null as NumberFormat\n    }\n}\n\nfunction isDigit(ch: string) {\n    const code = ch.charCodeAt(0)\n    return 0x30 <= code && code <= 0x39\n}\n\nfunction packUnpackCore(format: string, nums: number[], buf: Uint8Array, isPack: boolean, off = 0) {\n    let isBig = false\n    let idx = 0\n    for (let i = 0; i < format.length; ++i) {\n        switch (format[i]) {\n            case ' ':\n            case '<':\n            case '=':\n                isBig = false\n                break\n            case '>':\n            case '!':\n                isBig = true\n                break\n            case 'x':\n                off++\n                break\n            default:\n                const i0 = i\n                while (isDigit(format[i])) i++\n                let reps = 1\n                if (i0 != i)\n                    reps = parseInt(format.slice(i0, i))\n                while (reps--) {\n                    let fmt = getFormat(format[i], isBig)\n                    if (fmt === null) {\n                        throw new Error(\"Unsupported format character: \" + format[i])\n                    } else {\n                        if (buf) {\n                            if (isPack)\n                                setNumber(buf, fmt, off, nums[idx++])\n                            else\n                                nums.push(getNumber(buf, fmt, off))\n                        }\n\n                        off += sizeOfNumberFormat(fmt)\n                    }\n                }\n                break\n        }\n    }\n    return off\n}","import { warn, crc, ALIGN, write16, bufferConcat, toHex, fromHex, error, read32, read16, write32 } from \"./utils\";\nimport {\n    JD_FRAME_FLAG_COMMAND,\n    JD_FRAME_FLAG_IDENTIFIER_IS_SERVICE_CLASS,\n    CMD_SET_REG,\n    JD_SERIAL_HEADER_SIZE,\n    JD_FRAME_FLAG_ACK_REQUESTED,\n    JD_SERVICE_NUMBER_MASK,\n    JD_SERVICE_NUMBER_INV_MASK,\n    JD_SERIAL_MAX_PAYLOAD_SIZE,\n} from \"./constants\";\nimport { Device } from \"./device\";\nimport { NumberFormat, getNumber } from \"./buffer\";\nimport { pack } from \"./struct\";\nimport { Bus } from \"./bus\";\n\nexport class Packet {\n    _header: Uint8Array;\n    _data: Uint8Array;\n    timestamp: number\n    dev: Device\n\n    private constructor() { }\n\n    static fromBinary(buf: Uint8Array) {\n        const p = new Packet()\n        p._header = buf.slice(0, JD_SERIAL_HEADER_SIZE)\n        p._data = buf.slice(JD_SERIAL_HEADER_SIZE)\n        return p\n    }\n\n    static from(service_command: number, data: Uint8Array) {\n        const p = new Packet()\n        p._header = new Uint8Array(JD_SERIAL_HEADER_SIZE)\n        p.data = data\n        p.service_command = service_command\n        return p\n    }\n\n    static onlyHeader(service_command: number) {\n        return Packet.from(service_command, new Uint8Array(0))\n    }\n\n    toBuffer() {\n        return bufferConcat(this._header, this._data)\n    }\n\n    get device_identifier() {\n        return toHex(this._header.slice(4, 4 + 8))\n    }\n    set device_identifier(id: string) {\n        const idb = fromHex(id)\n        if (idb.length != 8)\n            error(\"Invalid id\")\n        this._header.set(idb, 4)\n    }\n\n    get frame_flags() { return this._header[3] }\n\n    get multicommand_class() {\n        if (this.frame_flags & JD_FRAME_FLAG_IDENTIFIER_IS_SERVICE_CLASS)\n            return read32(this._header, 4)\n        return undefined\n    }\n\n    get size(): number {\n        return this._header[12];\n    }\n\n    get requires_ack(): boolean {\n        return (this.frame_flags & JD_FRAME_FLAG_ACK_REQUESTED) ? true : false;\n    }\n    set requires_ack(ack: boolean) {\n        if (ack != this.requires_ack)\n            this._header[3] ^= JD_FRAME_FLAG_ACK_REQUESTED\n    }\n\n    get service_number(): number {\n        return this._header[13] & JD_SERVICE_NUMBER_MASK;\n    }\n    set service_number(service_number: number) {\n        if (service_number == null)\n            throw new Error(\"service_number not set\")\n        this._header[13] = (this._header[13] & JD_SERVICE_NUMBER_INV_MASK) | service_number;\n    }\n\n    get service_class(): number {\n        if (this.dev)\n            return this.dev.serviceClassAt(this.service_number)\n        return undefined\n    }\n\n    get crc(): number {\n        return read16(this._header, 0)\n    }\n\n    get service_command(): number {\n        return read16(this._header, 14)\n    }\n    set service_command(cmd: number) {\n        write16(this._header, 14, cmd)\n    }\n\n    get is_reg_set() {\n        return (this.service_command >> 12) == (CMD_SET_REG >> 12)\n    }\n\n    get is_reg_get() {\n        return (this.service_command >> 12) == (CMD_SET_REG >> 12)\n    }\n\n    get data(): Uint8Array {\n        return this._data\n    }\n\n    set data(buf: Uint8Array) {\n        if (buf.length > JD_SERIAL_MAX_PAYLOAD_SIZE)\n            throw Error(\"Too big\")\n        this._header[12] = buf.length\n        this._data = buf\n    }\n\n    get uintData() {\n        let buf = this._data\n        if (buf.length == 0)\n            return undefined\n        if (buf.length < 4)\n            buf = bufferConcat(buf, new Uint8Array(4))\n        return read32(buf, 0)\n    }\n\n    get intData() {\n        let fmt: NumberFormat\n        switch (this._data.length) {\n            case 0:\n                return undefined\n            case 1:\n                fmt = NumberFormat.Int8LE\n                break\n            case 2:\n            case 3:\n                fmt = NumberFormat.Int16LE\n                break\n            default:\n                fmt = NumberFormat.Int32LE\n                break\n        }\n        return this.getNumber(fmt, 0)\n    }\n\n    compress(stripped: Uint8Array[]) {\n        if (stripped.length == 0)\n            return\n        let sz = -4\n        for (let s of stripped) {\n            sz += s.length\n        }\n        const data = new Uint8Array(sz)\n        this._header.set(stripped[0], 12)\n        data.set(stripped[0].slice(4), 0)\n        sz = stripped[0].length - 4\n        for (let s of stripped.slice(1)) {\n            data.set(s, sz)\n            sz += s.length\n        }\n        this._data = data\n    }\n\n    withFrameStripped() {\n        return bufferConcat(this._header.slice(12, 12 + 4), this._data)\n    }\n\n    getNumber(fmt: NumberFormat, offset: number) {\n        return getNumber(this._data, fmt, offset)\n    }\n\n    get is_command() {\n        return !!(this.frame_flags & JD_FRAME_FLAG_COMMAND)\n    }\n\n    get is_report() {\n        return !this.is_command\n    }\n\n    toString(): string {\n        let msg = `${this.device_identifier}/${this.service_number}[${this.frame_flags}]: ${this.service_command} sz=${this.size}`\n        if (this.size < 20) msg += \": \" + toHex(this.data)\n        else msg += \": \" + toHex(this.data.slice(0, 20)) + \"...\"\n        return msg\n    }\n\n    sendCoreAsync(bus: Bus) {\n        this._header[2] = this.size + 4\n        write16(this._header, 0, crc(bufferConcat(this._header.slice(2), this._data)))\n        return bus.sendPacketAsync(this)\n    }\n\n    sendReportAsync(dev: Device) {\n        if (!dev)\n            return Promise.resolve()\n        this.device_identifier = dev.deviceId\n        return this.sendCoreAsync(dev.bus)\n    }\n\n    sendCmdAsync(dev: Device) {\n        if (!dev)\n            return Promise.resolve()\n        this.device_identifier = dev.deviceId\n        this._header[3] |= JD_FRAME_FLAG_COMMAND\n        return this.sendCoreAsync(dev.bus)\n    }\n\n    sendAsMultiCommandAsync(bus: Bus, service_class: number) {\n        this._header[3] |= JD_FRAME_FLAG_IDENTIFIER_IS_SERVICE_CLASS | JD_FRAME_FLAG_COMMAND\n        write32(this._header, 4, service_class)\n        write32(this._header, 8, 0)\n        return this.sendCoreAsync(bus)\n    }\n\n    static fromFrame(frame: Uint8Array, timestamp: number) {\n        return frameToPackets(frame, timestamp)\n    }\n\n    static packed(service_command: number, fmt: string, nums: number[]) {\n        return Packet.from(service_command, pack(fmt, nums))\n    }\n}\n\n\nfunction frameToPackets(frame: Uint8Array, timestamp: number) {\n    const size = frame[2] || 0\n    if (frame.length < size + 12) {\n        warn(`${timestamp}ms: got only ${frame.length} bytes; expecting ${size + 12}`)\n    } else if (size < 4) {\n        warn(`${timestamp}ms: empty packet`)\n    } else {\n        const computed = crc(frame.slice(2, size + 12))\n        const actual = read16(frame, 0)\n        if (actual != computed)\n            console.log(`crc mismatch; sz=${size} got:${actual}, exp:${computed}`)\n\n        const res: Packet[] = []\n        if (frame.length != 12 + frame[2])\n            warn(`${timestamp}ms: unexpected packet len: ${frame.length}`)\n        for (let ptr = 12; ptr < 12 + frame[2];) {\n            const psz = frame[ptr] + 4\n            const sz = ALIGN(psz)\n            const pkt = bufferConcat(frame.slice(0, 12), frame.slice(ptr, ptr + psz))\n            if (ptr + sz > 12 + frame[2])\n                warn(`${timestamp}ms: invalid frame compression, res len=${res.length}`)\n            const p = Packet.fromBinary(pkt)\n            p.timestamp = timestamp\n            res.push(p)\n            ptr += sz\n        }\n\n        return res\n    }\n\n    return []\n}","import { Packet } from \"./packet\"\nimport { JD_SERVICE_NUMBER_CTRL } from \"./constants\"\nimport { hash, fromHex, idiv, read32, SMap, bufferEq } from \"./utils\"\nimport { getNumber, NumberFormat } from \"./buffer\";\nimport { Bus } from \"./bus\";\n\nexport class Device {\n    connected: boolean;\n    services: Uint8Array\n    lastSeen: number\n    lastServiceUpdate: number\n    currentReading: Uint8Array\n    private _shortId: string\n\n    constructor(public bus: Bus, public deviceId: string) {\n        this.connected = true;\n    }\n\n    get name() {\n        return this.bus.lookupName(this.deviceId) || this.bus.lookupName(this.shortId);\n    }\n\n    get shortId() {\n        // TODO measure if caching is worth it\n        if (!this._shortId)\n            this._shortId = shortDeviceId(this.deviceId)\n        return this._shortId;\n    }\n\n    toString() {\n        return this.shortId + (this.name ? ` (${this.name})` : ``)\n    }\n\n    hasService(service_class: number): boolean {\n        if (!this.services) return false;\n        for (let i = 4; i < this.services.length; i += 4)\n            if (getNumber(this.services, NumberFormat.UInt32LE, i) == service_class)\n                return true\n        return false\n    }\n\n    get serviceLength() {\n        if (!this.services) return 0;\n        return this.services.length >> 2;\n    }\n\n    serviceClassAt(idx: number): number {\n        idx <<= 2\n        if (!this.services || idx + 4 > this.services.length)\n            return undefined\n        return read32(this.services, idx)\n    }\n\n    get serviceClasses(): number[] {\n        const r = [];\n        const n = this.serviceLength;\n        for (let i = 0; i < n; ++i)\n            r.push(this.serviceClassAt(i))\n        return r;\n    }\n\n    sendCtrlCommand(cmd: number, payload: Buffer = null) {\n        const pkt = !payload ? Packet.onlyHeader(cmd) : Packet.from(cmd, payload)\n        pkt.service_number = JD_SERVICE_NUMBER_CTRL\n        pkt.sendCmdAsync(this)\n    }\n\n    disconnect() {\n        this.connected = false;\n    }\n}\n\n\n// 4 letter ID; 0.04%/0.01%/0.002% collision probability among 20/10/5 devices\n// 3 letter ID; 1.1%/2.6%/0.05%\n// 2 letter ID; 25%/6.4%/1.5%\nexport function shortDeviceId(devid: string) {\n    const h = hash(fromHex(devid), 30)\n    return String.fromCharCode(0x41 + h % 26) +\n        String.fromCharCode(0x41 + idiv(h, 26) % 26) +\n        String.fromCharCode(0x41 + idiv(h, 26 * 26) % 26) +\n        String.fromCharCode(0x41 + idiv(h, 26 * 26 * 26) % 26)\n}","import { Packet } from \"./packet\";\nimport { Device } from \"./device\";\nimport { EventEmitter } from \"./eventemitter\";\nimport { SMap, bufferEq } from \"./utils\";\nimport { ConsolePriority, CMD_CONSOLE_SET_MIN_PRIORITY, SRV_LOGGER, JD_SERVICE_NUMBER_CTRL, CMD_ADVERTISEMENT_DATA, CMD_EVENT } from \"./constants\";\n\nexport interface BusOptions {\n    sendPacketAsync?: (p: Packet) => Promise<void>;\n    connectAsync?: () => Promise<void>;\n    disconnectAsync?: () => Promise<void>;\n}\n\nexport interface Error {\n    context: string;\n    exception: any;\n}\n\nexport interface PacketEventEmitter {\n    /**\n     * Event emitted when the bus is connected\n     * @param event \n     * @param listener \n     */\n    on(event: 'connect', listener: () => void): boolean;\n\n    /**\n     * Event emitted when the bus is connecting\n     * @param event \n     * @param listener \n     */\n    on(event: 'connecting', listener: () => void): boolean;\n\n    /**\n     * Event emitted when the bus is disconnected\n     * @param event \n     * @param listener \n     */\n    on(event: 'disconnect', listener: () => void): boolean;\n\n    /**\n     * Event emitted when a packet is received and processed\n     * @param event \n     * @param listener \n     */\n    on(event: 'packetreceive', listener: (packet: Packet) => void): boolean;\n\n    /**\n     * Event emitted when an event packet is received and processed\n     * @param event \n     * @param listener \n     */\n    on(event: 'packetevent', listener: (packet: Packet) => void): boolean;\n\n    /**\n     * Event emitted before a packet is sent\n     * @param event \n     * @param listener \n     */\n    on(event: 'packetsend', listener: (packet: Packet) => void): boolean;\n\n    /**\n     * Event emitted when a device is detected on the bus. The information on the device might not be fully populated yet.\n     * @param event \n     * @param listener \n     */\n    on(event: 'deviceconnect', listener: (device: Device) => void): boolean;\n\n    /**\n     * Event emitted when a device hasn't been on the bus for a while and is considered disconected.\n     * @param event \n     * @param listener \n     */\n    on(event: 'devicedisconnect', listener: (device: Device) => void): boolean;\n\n    /**\n     * Event emitted device advertisement information for a device has been updated\n     * @param event \n     * @param listener \n     */\n    on(event: 'deviceannounce', listener: (device: Device) => void): boolean;\n\n    /**\n     * Event emitted when an exception occurs\n     * @param event \n     * @param listener \n     */\n    on(event: 'error', listener: (error: Error) => void): void;\n}\n\n/**\n * A JACDAC bus manager. This instance maintains the list of devices on the bus.\n */\nexport class Bus extends EventEmitter implements PacketEventEmitter {\n    private _connected = false;\n    private _connectPromise: Promise<void>;\n\n    private _devices: Device[] = [];\n    private _deviceNames: SMap<string> = {};\n    private _startTime: number;\n    private _gcInterval: any;\n    private _minConsolePriority = ConsolePriority.Log;\n\n    /**\n     * Creates the bus with the given transport\n     * @param sendPacket \n     */\n    constructor(public options?: BusOptions) {\n        super();\n        this.options = this.options || {};\n        this.resetTime();\n        this.on('deviceannounce', () => this.pingLoggers());\n    }\n\n    private resetTime() {\n        this._startTime = Date.now();\n    }\n\n    get timestamp() {\n        return Date.now() - this._startTime;\n    }\n\n    get minConsolePriority(): ConsolePriority {\n        return this._minConsolePriority;\n    }\n\n    set minConsolePriority(priority: ConsolePriority) {\n        if (priority !== this._minConsolePriority) {\n            this._minConsolePriority = priority;\n        }\n    }\n\n    private pingLoggers() {\n        if (this._minConsolePriority < ConsolePriority.Silent) {\n            const pkt = Packet.packed(CMD_CONSOLE_SET_MIN_PRIORITY, \"i\", [this._minConsolePriority]);\n            pkt.sendAsMultiCommandAsync(this, SRV_LOGGER);\n        }\n    }\n\n    sendPacketAsync(p: Packet) {\n        this.emit('packetsend', p);\n        return this.options?.sendPacketAsync(p) || Promise.resolve();\n    }\n\n    get connecting() {\n        return !!this._connectPromise;\n    }\n\n    get connected() {\n        return this._connected;\n    }\n\n    errorHandler(context: string, exception: any) {\n        this.emit(\"error\", { context, exception })\n    }\n\n    connectAsync(): Promise<void> {\n        // already connected\n        if (this._connected)\n            return Promise.resolve();\n        // connecting\n        if (!this._connectPromise) {\n            this._connected = false;\n            this._connectPromise = Promise.resolve();\n            this.emit(\"connecting\");\n            const connectAsyncPromise = this.options?.connectAsync() || Promise.resolve();\n            this._connectPromise = connectAsyncPromise\n                .then(() => {\n                    this._connectPromise = undefined;\n                    this._connected = true;\n                    this.emit(\"connect\");\n                })\n                .catch(e => {\n                    this.errorHandler(\"connect\", e);\n                    this._connected = false;\n                    this._connectPromise = undefined;\n                    this.emit(\"disconnect\");\n                })\n        }\n        return this._connectPromise;\n    }\n\n    async disconnectAsync(): Promise<void> {\n        if (!this._connected) return Promise.resolve();\n\n        if (this._connectPromise)\n            throw new Error(\"trying to disconnect while connecting\");\n        this._connected = false;\n        if (this._gcInterval) {\n            clearInterval(this._gcInterval);\n            this._gcInterval = undefined;\n        }\n        try {\n            this.options?.disconnectAsync();\n        } catch (e) {\n            this.errorHandler(\"disconnect\", e)\n        }\n        finally {\n            this.emit(\"disconnet\");\n        }\n    }\n\n    /**\n     * Gets the current list of known devices on the bus\n     */\n    devices() { return this._devices.slice() }\n\n    /**\n     * Gets a device on the bus\n     * @param id \n     */\n    device(id: string) {\n        let d = this._devices.find(d => d.deviceId == id)\n        if (!d) {\n            d = new Device(this, id)\n            this._devices.push(d);\n            this.emit('deviceconnect', d);\n\n            if (!this._gcInterval && this.connected)\n                this._gcInterval = setInterval(() => this.gcDevices(), 2000);\n        }\n        return d\n    }\n\n    private gcDevices() {\n        const cutoff = this.timestamp - 2000;\n        for (let i = 0; i < this._devices.length; ++i) {\n            const dev = this._devices[i]\n            if (dev.lastSeen < cutoff) {\n                this._devices.splice(i, 1)\n                i--\n                dev.disconnect();\n                this.emit('devicedisconnect', dev);\n            }\n        }\n    }\n\n    /**\n     * Ingests and process a packet received from the bus.\n     * @param pkt a jacdac packet\n     */\n    processPacket(pkt: Packet) {\n        if (pkt.multicommand_class) {\n            //\n        } else if (pkt.is_command) {\n            pkt.dev = this.device(pkt.device_identifier)\n        } else {\n            const dev = pkt.dev = this.device(pkt.device_identifier)\n            dev.lastSeen = pkt.timestamp\n\n            if (pkt.service_number == JD_SERVICE_NUMBER_CTRL) {\n                if (pkt.service_command == CMD_ADVERTISEMENT_DATA) {\n                    if (!bufferEq(pkt.data, dev.services)) {\n                        dev.services = pkt.data\n                        dev.lastServiceUpdate = pkt.timestamp\n                        this.emit('deviceannounce', dev);\n                    }\n                }\n            }\n        }\n        // don't spam with duplicate advertisement events\n        if (pkt.service_command !== CMD_ADVERTISEMENT_DATA) {\n            this.emit('packetreceive', pkt)\n            if (pkt.service_command === CMD_EVENT)\n                this.emit('packetevent', pkt);\n        }\n    }\n\n    /**\n     * Tries to find the given device by id\n     * @param id \n     */\n    lookupName(id: string) {\n        return this._deviceNames[id];\n    }\n\n    log(msg: any) {\n        if (this._minConsolePriority > ConsolePriority.Log)\n            return\n        console.log(msg);\n    }\n}\n","import { SMap } from \"./utils\";\n\nexport type EventHandler = (evt: any) => void;\nexport class EventEmitter {\n    readonly handlers: SMap<EventHandler[]> = {};\n\n    constructor() {\n    }\n\n    /**\n     * Registers an event handler\n     * @param type \n     * @param handler \n     */\n    on(type: string, handler: EventHandler): boolean {\n        if (!type || !handler) return false;\n\n        const hs = this.handlers[type] || (this.handlers[type] = []);\n        if (hs.indexOf(handler) > -1) return false;\n\n        hs.push(handler);\n        return true;\n    }\n\n    off(type: string, handler: EventHandler) {\n        if (!type || !handler) return false;\n\n        const hs = this.handlers[type];\n        const index = hs.indexOf(handler);\n        if (index > -1) return false;\n\n        hs.splice(index, -1);\n        return true;\n    }\n\n    emit(type: string, evt?: any) {\n        const hs = this.handlers[type];\n        if (hs)\n            for (const h of hs)\n                h(evt);\n    }\n}","import React, { useState, useEffect } from \"react\";\nimport { Bus } from \"../../../src/bus\";\nimport { createUSBBus } from \"../../../src/webusb\";\nimport JacdacContext from \"./Context\";\n\nconst JacdacProvider = ({ children }) => {\n    const [bus, setBus] = useState<Bus>(createUSBBus());\n    const [connected, setConnected] = useState(bus.connected);\n    const [connecting, setConnecting] = useState(bus.connecting);\n    bus.on(\"connect\", () => setConnected(bus.connected))\n    bus.on(\"connecting\", () => setConnected(bus.connecting))\n    bus.on(\"disconnect\", () => setConnected(bus.connected))\n\n    const connectAsync = () => bus.connectAsync();\n    const disconnectAsync = () => bus.disconnectAsync();\n    return (\n        <JacdacContext.Provider value={{ bus, connected, connecting, connectAsync, disconnectAsync }}>\n            {children}\n        </JacdacContext.Provider>\n    )\n}\nexport default JacdacProvider;","import { Transport, Proto } from \"./hf2\";\nimport { Bus } from \"./bus\";\nimport { Packet } from \"./packet\";\n\nexport function createUSBBus(requestDevice?: (options: USBDeviceRequestOptions) => Promise<USBDevice>): Bus {\n    if (!requestDevice && typeof navigator !== \"undefined\" && navigator.usb && navigator.usb.requestDevice) {\n        requestDevice = options => navigator.usb.requestDevice(options);\n    }\n\n    let hf2: Proto;\n    const bus = new Bus({\n        connectAsync: () => {\n            if (hf2) return Promise.resolve();\n            const transport = new Transport(requestDevice);\n            hf2 = new Proto(transport);\n            const onJDMessage = (buf: Uint8Array) => {\n                const pkts = Packet.fromFrame(buf, bus.timestamp)\n                for (const pkt of pkts)\n                    bus.processPacket(pkt);\n            }\n            return hf2.init().then(() => hf2.onJDMessage(onJDMessage))\n        },\n        sendPacketAsync: p => {\n            const buf = p.toBuffer();\n            return hf2.sendJDMessageAsync(buf)\n                .then(() => { }, err => console.log(err));\n        },\n        disconnectAsync: () => {\n            const h = hf2;\n            hf2 = undefined;\n            return h.disconnectAsync();\n        }\n    });\n\n    return bus;\n}","import { Link } from \"gatsby\"\nimport PropTypes from \"prop-types\"\nimport React from \"react\"\n\nconst Header = ({ siteTitle }) => (\n  <header\n    style={{\n      background: `rebeccapurple`,\n      marginBottom: `1.45rem`,\n    }}\n  >\n    <div\n      style={{\n        margin: `0 auto`,\n        maxWidth: 960,\n        padding: `1.45rem 1.0875rem`,\n      }}\n    >\n      <h1 style={{ margin: 0 }}>\n        <Link\n          to=\"/\"\n          style={{\n            color: `white`,\n            textDecoration: `none`,\n          }}\n        >\n          {siteTitle}\n        </Link>\n      </h1>\n    </div>\n  </header>\n)\n\nHeader.propTypes = {\n  siteTitle: PropTypes.string,\n}\n\nHeader.defaultProps = {\n  siteTitle: ``,\n}\n\nexport default Header\n","/**\n * Layout component that queries for data\n * with Gatsby's useStaticQuery component\n *\n * See: https://www.gatsbyjs.org/docs/use-static-query/\n */\n\nimport React, { useState } from \"react\"\nimport PropTypes from \"prop-types\"\nimport { useStaticQuery, graphql } from \"gatsby\"\nimport JacdacProvider from \"../jacdac/Provider\"\n\nimport Header from \"./header\"\n// tslint:disable-next-line: no-import-side-effect\nimport \"./layout.css\"\n\nconst Layout = ({ children }) => {\n  const data = useStaticQuery(graphql`\n    query SiteTitleQuery {\n      site {\n        siteMetadata {\n          title\n        }\n      }\n    }\n  `)\n  return (\n    <JacdacProvider>\n      <Header siteTitle={data.site.siteMetadata.title} />\n      <div\n        style={{\n          margin: `0 auto`,\n          maxWidth: 960,\n          padding: `0 1.0875rem 1.45rem`,\n        }}\n      >\n        <main>{children}</main>\n        <footer>\n           {new Date().getFullYear()} Microsoft Corporation\n        </footer>\n      </div>\n    </JacdacProvider>\n  )\n}\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n","// 20.2.2.18 Math.imul(x, y)\nvar $export = require('./_export');\nvar $imul = Math.imul;\n\n// some WebKit versions fails with big numbers, some has wrong arity\n$export($export.S + $export.F * require('./_fails')(function () {\n  return $imul(0xffffffff, 5) != -5 || $imul.length != 2;\n}), 'Math', {\n  imul: function imul(x, y) {\n    var UINT16 = 0xffff;\n    var xn = +x;\n    var yn = +y;\n    var xl = UINT16 & xn;\n    var yl = UINT16 & yn;\n    return 0 | xl * yl + ((UINT16 & xn >>> 16) * yl + xl * (UINT16 & yn >>> 16) << 16 >>> 0);\n  }\n});\n","// https://tc39.github.io/ecma262/#sec-toindex\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toInteger(it);\n  var length = toLength(number);\n  if (number !== length) throw RangeError('Wrong length!');\n  return length;\n};\n","var global = require('./_global');\nvar hide = require('./_hide');\nvar uid = require('./_uid');\nvar TYPED = uid('typed_array');\nvar VIEW = uid('view');\nvar ABV = !!(global.ArrayBuffer && global.DataView);\nvar CONSTR = ABV;\nvar i = 0;\nvar l = 9;\nvar Typed;\n\nvar TypedArrayConstructors = (\n  'Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'\n).split(',');\n\nwhile (i < l) {\n  if (Typed = global[TypedArrayConstructors[i++]]) {\n    hide(Typed.prototype, TYPED, true);\n    hide(Typed.prototype, VIEW, true);\n  } else CONSTR = false;\n}\n\nmodule.exports = {\n  ABV: ABV,\n  CONSTR: CONSTR,\n  TYPED: TYPED,\n  VIEW: VIEW\n};\n","require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","require('./_typed-array')('Float64', 8, function (init) {\n  return function Float64Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","require('./_typed-array')('Float32', 4, function (init) {\n  return function Float32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","require(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar runtime = function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n    return generator;\n  }\n\n  exports.wrap = wrap; // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n\n  var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n\n\n  var IteratorPrototype = {};\n\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\n  if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\"; // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      prototype[method] = function (arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function (genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can\n    // do is to check its .name property.\n    (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n  };\n\n  exports.mark = function (genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  }; // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n\n\n  exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n\n        if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function (value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function (err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function (unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function (error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = // If enqueue has been called before, then we want to wait until\n      // all previous Promises have been resolved before calling invoke,\n      // so that results are always delivered in the correct order. If\n      // enqueue has not been called before, then it is important to\n      // call invoke immediately, without waiting on a callback to fire,\n      // so that the async generator function has the opportunity to do\n      // any necessary setup in a predictable way. This predictability\n      // is why the Promise constructor synchronously invokes its\n      // executor callback, and why async functions synchronously\n      // execute code before the first await. Since we implement simple\n      // async functions in terms of async generators, it is especially\n      // important to get this right, even though it requires care.\n      previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later\n      // invocations of the iterator.\n      callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    } // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n\n\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n\n  exports.AsyncIterator = AsyncIterator; // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n\n  exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n    : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        } // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n        var record = tryCatch(innerFn, self, context);\n\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted; // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  } // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (!info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n      context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    } // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n\n\n    context.delegate = null;\n    return ContinueSentinel;\n  } // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n\n\n  defineIteratorMethods(Gp);\n  Gp[toStringTagSymbol] = \"Generator\"; // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n\n  Gp[iteratorSymbol] = function () {\n    return this;\n  };\n\n  Gp.toString = function () {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    keys.reverse(); // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      } // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n\n\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n          return next;\n        };\n\n        return next.next = next;\n      }\n    } // Return an iterator with no values.\n\n\n    return {\n      next: doneResult\n    };\n  }\n\n  exports.values = values;\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: true\n    };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      this.prev = 0;\n      this.next = 0; // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n      this.method = \"next\";\n      this.arg = undefined;\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n    stop: function stop() {\n      this.done = true;\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" || record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      } // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  }; // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n\n  return exports;\n}( // If this script is executing as a CommonJS module, use module.exports\n// as the regeneratorRuntime namespace. Otherwise create a new empty\n// object. Either way, the resulting object will be used to initialize\n// the regeneratorRuntime variable at the top of this file.\ntypeof module === \"object\" ? module.exports : {});\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}","module.exports = require(\"regenerator-runtime\");\n","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\n\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = toLength(O.length);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = Math.min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else delete O[to];\n    to += inc;\n    from += inc;\n  } return O;\n};\n","require(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n!function (global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    } // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n\n\n    return;\n  } // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n\n\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n    return generator;\n  }\n\n  runtime.wrap = wrap; // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n\n  var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n\n\n  var IteratorPrototype = {};\n\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\n  if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\"; // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      prototype[method] = function (arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function (genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can\n    // do is to check its .name property.\n    (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n  };\n\n  runtime.mark = function (genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  }; // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n\n\n  runtime.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n\n        if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function (value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function (err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function (unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = // If enqueue has been called before, then we want to wait until\n      // all previous Promises have been resolved before calling invoke,\n      // so that results are always delivered in the correct order. If\n      // enqueue has not been called before, then it is important to\n      // call invoke immediately, without waiting on a callback to fire,\n      // so that the async generator function has the opportunity to do\n      // any necessary setup in a predictable way. This predictability\n      // is why the Promise constructor synchronously invokes its\n      // executor callback, and why async functions synchronously\n      // execute code before the first await. Since we implement simple\n      // async functions in terms of async generators, it is especially\n      // important to get this right, even though it requires care.\n      previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later\n      // invocations of the iterator.\n      callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    } // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n\n\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n\n  runtime.AsyncIterator = AsyncIterator; // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n\n  runtime.async = function (innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList));\n    return runtime.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n    : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        } // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n        var record = tryCatch(innerFn, self, context);\n\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted; // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  } // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (!info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n      context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    } // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n\n\n    context.delegate = null;\n    return ContinueSentinel;\n  } // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n\n\n  defineIteratorMethods(Gp);\n  Gp[toStringTagSymbol] = \"Generator\"; // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n\n  Gp[iteratorSymbol] = function () {\n    return this;\n  };\n\n  Gp.toString = function () {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    keys.reverse(); // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      } // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n\n\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n          return next;\n        };\n\n        return next.next = next;\n      }\n    } // Return an iterator with no values.\n\n\n    return {\n      next: doneResult\n    };\n  }\n\n  runtime.values = values;\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: true\n    };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      this.prev = 0;\n      this.next = 0; // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n      this.method = \"next\";\n      this.arg = undefined;\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n    stop: function stop() {\n      this.done = true;\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" || record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      } // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n}( // In sloppy mode, unbound `this` refers to the global object, fallback to\n// Function constructor if we're in global strict mode. That is sadly a form\n// of indirect eval which violates Content Security Policy.\nfunction () {\n  return this;\n}() || Function(\"return this\")());","import React from \"react\";\nimport { Bus } from \"../../../src/bus\";\n\nconst JacdacContext = React.createContext<{\n    bus: Bus,\n    connected: boolean,\n    connecting: boolean,\n    connectAsync: () => Promise<void>,\n    disconnectAsync: () => Promise<void>\n}>({ bus: undefined, connected: false, connecting: false, connectAsync: undefined, disconnectAsync: undefined });\nJacdacContext.displayName = \"jacdac\";\n\nexport default JacdacContext;"],"sourceRoot":""}